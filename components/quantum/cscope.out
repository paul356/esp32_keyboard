cscope 15 $HOME/code/qmk_firmware/quantum               0000271958
	@api.c

17 
	~"≠i.h
"

18 
	~"qu™tum.h
"

20 
	$dw‹d_to_byãs
(
uöt32_t
 
dw‹d
, 
uöt8_t
* 
byãs
) {

21 
byãs
[0] = (
dw‹d
 >> 24) & 0xFF;

22 
byãs
[1] = (
dw‹d
 >> 16) & 0xFF;

23 
byãs
[2] = (
dw‹d
 >> 8) & 0xFF;

24 
byãs
[3] = (
dw‹d
 >> 0) & 0xFF;

25 
	}
}

27 
uöt32_t
 
	$byãs_to_dw‹d
(
uöt8_t
* 
byãs
, uöt8_à
ödex
Ë{  ((
uöt32_t
)byãs[ödex + 0] << 24Ë| ((uöt32_t)byãs[ödex + 1] << 16Ë| ((uöt32_t)byãs[ödex + 2] << 8Ë| (uöt32_t)byãs[ödex + 3]; 
	}
}

29 
__©åibuã__
((
wók
)Ë
boﬁ
 
	$¥o˚ss_≠i_qu™tum
(
uöt8_t
 
Àngth
, uöt8_t* 
d©a
Ë{  
	`¥o˚ss_≠i_keybﬂrd
÷ígth, d©a); 
	}
}

31 
__©åibuã__
((
wók
)Ë
boﬁ
 
	$¥o˚ss_≠i_keybﬂrd
(
uöt8_t
 
Àngth
, uöt8_t* 
d©a
Ë{  
	`¥o˚ss_≠i_u£r
÷ígth, d©a); 
	}
}

33 
__©åibuã__
((
wók
)Ë
boﬁ
 
	$¥o˚ss_≠i_u£r
(
uöt8_t
 
Àngth
, uöt8_t* 
d©a
Ë{  
åue
; 
	}
}

35 
	$¥o˚ss_≠i
(
uöt16_t
 
Àngth
, 
uöt8_t
* 
d©a
) {

41 i‡(!
	`¥o˚ss_≠i_qu™tum
(
Àngth
, 
d©a
)) ;

43 
d©a
[0]) {

44 
MT_SET_DATA
:

45 
d©a
[1]) {

46 
DT_DEFAULT_LAYER
: {

47 
	`ìc⁄fig_upd©e_deÁu…_œyî
(
d©a
[2]);

48 
	`deÁu…_œyî_£t
((
uöt32_t
)(
d©a
[2]));

51 
DT_KEYMAP_OPTIONS
: {

52 
	`ìc⁄fig_upd©e_keym≠
(
d©a
[2]);

55 
DT_RGBLIGHT
: {

56 #ifde‡
RGBLIGHT_ENABLE


57 
uöt32_t
 
rgblight
 = 
	`byãs_to_dw‹d
(
d©a
, 2);

58 
	`ìc⁄fig_upd©e_rgblight
(
rgblight
);

63 
MT_GET_DATA
:

64 
d©a
[1]) {

65 
DT_HANDSHAKE
: {

66 
	`MT_GET_DATA_ACK
(
DT_HANDSHAKE
, 
NULL
, 0);

69 
DT_DEBUG
: {

70 
uöt8_t
 
debug_byãs
[1] = {
	`ì¥om_ªad_byã
(
EECONFIG_DEBUG
)};

71 
	`MT_GET_DATA_ACK
(
DT_DEBUG
, 
debug_byãs
, 1);

74 
DT_DEFAULT_LAYER
: {

75 
uöt8_t
 
deÁu…_byãs
[1] = {
	`ì¥om_ªad_byã
(
EECONFIG_DEFAULT_LAYER
)};

76 
	`MT_GET_DATA_ACK
(
DT_DEFAULT_LAYER
, 
deÁu…_byãs
, 1);

79 
DT_CURRENT_LAYER
: {

80 
uöt8_t
 
œyî_°©e_byãs
[4];

81 
	`dw‹d_to_byãs
(
œyî_°©e
, 
œyî_°©e_byãs
);

82 
	`MT_GET_DATA_ACK
(
DT_CURRENT_LAYER
, 
œyî_°©e_byãs
, 4);

85 
DT_AUDIO
: {

86 #ifde‡
AUDIO_ENABLE


87 
uöt8_t
 
audio_byãs
[1] = {
	`ì¥om_ªad_byã
(
EECONFIG_AUDIO
)};

88 
	`MT_GET_DATA_ACK
(
DT_AUDIO
, 
audio_byãs
, 1);

90 
	`MT_GET_DATA_ACK
(
DT_AUDIO
, 
NULL
, 0);

94 
DT_BACKLIGHT
: {

95 #ifde‡
BACKLIGHT_ENABLE


96 
uöt8_t
 
backlight_byãs
[1] = {
	`ì¥om_ªad_byã
(
EECONFIG_BACKLIGHT
)};

97 
	`MT_GET_DATA_ACK
(
DT_BACKLIGHT
, 
backlight_byãs
, 1);

99 
	`MT_GET_DATA_ACK
(
DT_BACKLIGHT
, 
NULL
, 0);

103 
DT_RGBLIGHT
: {

104 #ifde‡
RGBLIGHT_ENABLE


105 
uöt8_t
 
rgblight_byãs
[4];

106 
	`dw‹d_to_byãs
(
	`ìc⁄fig_ªad_rgblight
(), 
rgblight_byãs
);

107 
	`MT_GET_DATA_ACK
(
DT_RGBLIGHT
, 
rgblight_byãs
, 4);

109 
	`MT_GET_DATA_ACK
(
DT_RGBLIGHT
, 
NULL
, 0);

113 
DT_KEYMAP_OPTIONS
: {

114 
uöt8_t
 
keym≠_byãs
[1] = {
	`ìc⁄fig_ªad_keym≠
()};

115 
	`MT_GET_DATA_ACK
(
DT_KEYMAP_OPTIONS
, 
keym≠_byãs
, 1);

118 
DT_KEYMAP_SIZE
: {

119 
uöt8_t
 
keym≠_size
[2] = {
MATRIX_ROWS
, 
MATRIX_COLS
};

120 
	`MT_GET_DATA_ACK
(
DT_KEYMAP_SIZE
, 
keym≠_size
, 2);

150 
MT_SET_DATA_ACK
:

151 
MT_GET_DATA_ACK
:

153 
MT_SEND_DATA
:

155 
MT_SEND_DATA_ACK
:

157 
MT_EXE_ACTION
:

159 
MT_EXE_ACTION_ACK
:

161 
MT_TYPE_ERROR
:

164 
	`SEND_BYTES
(
MT_TYPE_ERROR
, 
DT_NONE
, 
d©a
, 
Àngth
);

182 
	}
}

	@api.h

17 #i‚de‡
_API_H_


18 
	#_API_H_


	)

20 #ifde‡
__AVR__


21 
	~"luÁ.h
"

24 
	eMESSAGE_TYPE
 {

25 
	mMT_GET_DATA
 = 0x10,

26 
	mMT_GET_DATA_ACK
 = 0x11,

27 
	mMT_SET_DATA
 = 0x20,

28 
	mMT_SET_DATA_ACK
 = 0x21,

29 
	mMT_SEND_DATA
 = 0x30,

30 
	mMT_SEND_DATA_ACK
 = 0x31,

31 
	mMT_EXE_ACTION
 = 0x40,

32 
	mMT_EXE_ACTION_ACK
 = 0x41,

33 
	mMT_TYPE_ERROR
 = 0x80

36 
	eDATA_TYPE
 { 
	mDT_NONE
 = 0x00, 
	mDT_HANDSHAKE
, 
	mDT_DEFAULT_LAYER
, 
	mDT_CURRENT_LAYER
, 
	mDT_KEYMAP_OPTIONS
, 
	mDT_BACKLIGHT
, 
	mDT_RGBLIGHT
, 
	mDT_UNICODE
, 
	mDT_DEBUG
, 
	mDT_AUDIO
, 
	mDT_QUANTUM_ACTION
, 
	mDT_KEYBOARD_ACTION
, 
	mDT_USER_ACTION
, 
	mDT_KEYMAP_SIZE
, 
	mDT_KEYMAP
 };

38 
dw‹d_to_byãs
(
uöt32_t
 
dw‹d
, 
uöt8_t
* 
byãs
);

39 
uöt32_t
 
byãs_to_dw‹d
(
uöt8_t
* 
byãs
, uöt8_à
ödex
);

41 
	#MT_GET_DATA
(
d©a_ty≥
, 
d©a
, 
Àngth
Ë
	`SEND_BYTES
(
MT_GET_DATA
, d©a_ty≥, d©a,Üígth)

	)

42 
	#MT_GET_DATA_ACK
(
d©a_ty≥
, 
d©a
, 
Àngth
Ë
	`SEND_BYTES
(
MT_GET_DATA_ACK
, d©a_ty≥, d©a,Üígth)

	)

43 
	#MT_SET_DATA
(
d©a_ty≥
, 
d©a
, 
Àngth
Ë
	`SEND_BYTES
(
MT_SET_DATA
, d©a_ty≥, d©a,Üígth)

	)

44 
	#MT_SET_DATA_ACK
(
d©a_ty≥
, 
d©a
, 
Àngth
Ë
	`SEND_BYTES
(
MT_SET_DATA_ACK
, d©a_ty≥, d©a,Üígth)

	)

45 
	#MT_SEND_DATA
(
d©a_ty≥
, 
d©a
, 
Àngth
Ë
	`SEND_BYTES
(
MT_SEND_DATA
, d©a_ty≥, d©a,Üígth)

	)

46 
	#MT_SEND_DATA_ACK
(
d©a_ty≥
, 
d©a
, 
Àngth
Ë
	`SEND_BYTES
(
MT_SEND_DATA_ACK
, d©a_ty≥, d©a,Üígth)

	)

47 
	#MT_EXE_ACTION
(
d©a_ty≥
, 
d©a
, 
Àngth
Ë
	`SEND_BYTES
(
MT_EXE_ACTION
, d©a_ty≥, d©a,Üígth)

	)

48 
	#MT_EXE_ACTION_ACK
(
d©a_ty≥
, 
d©a
, 
Àngth
Ë
	`SEND_BYTES
(
MT_EXE_ACTION_ACK
, d©a_ty≥, d©a,Üígth)

	)

50 
¥o˚ss_≠i
(
uöt16_t
 
Àngth
, 
uöt8_t
* 
d©a
);

52 
__©åibuã__
((
wók
)Ë
boﬁ
 
¥o˚ss_≠i_qu™tum
(
uöt8_t
 
Àngth
, uöt8_t* 
d©a
);

54 
__©åibuã__
((
wók
)Ë
boﬁ
 
¥o˚ss_≠i_keybﬂrd
(
uöt8_t
 
Àngth
, uöt8_t* 
d©a
);

56 
__©åibuã__
((
wók
)Ë
boﬁ
 
¥o˚ss_≠i_u£r
(
uöt8_t
 
Àngth
, uöt8_t* 
d©a
);

	@color.c

17 
	~"cﬁ‹.h
"

18 
	~"Àd_èbÀs.h
"

19 
	~"¥ogmem.h
"

21 
RGB
 
	$hsv_to_rgb_im∂
(
HSV
 
hsv
, 
boﬁ
 
u£_cõ
) {

22 
RGB
 
rgb
;

23 
uöt8_t
 
ªgi⁄
, 
ªmaödî
, 
p
, 
q
, 
t
;

24 
uöt16_t
 
h
, 
s
, 
v
;

26 i‡(
hsv
.
s
 == 0) {

27 #ifde‡
USE_CIE1931_CURVE


28 i‡(
u£_cõ
) {

29 
rgb
.
r
 =Ñgb.
g
 =Ñgb.
b
 = 
	`pgm_ªad_byã
(&
CIE1931_CURVE
[
hsv
.
v
]);

31 
rgb
.
r
 = 
hsv
.
v
;

32 
rgb
.
g
 = 
hsv
.
v
;

33 
rgb
.
b
 = 
hsv
.
v
;

36 
rgb
.
r
 = 
hsv
.
v
;

37 
rgb
.
g
 = 
hsv
.
v
;

38 
rgb
.
b
 = 
hsv
.
v
;

40  
rgb
;

43 
h
 = 
hsv
.h;

44 
s
 = 
hsv
.s;

45 #ifde‡
USE_CIE1931_CURVE


46 i‡(
u£_cõ
) {

47 
v
 = 
	`pgm_ªad_byã
(&
CIE1931_CURVE
[
hsv
.v]);

49 
v
 = 
hsv
.v;

52 
v
 = 
hsv
.v;

55 
ªgi⁄
 = 
h
 * 6 / 255;

56 
ªmaödî
 = (
h
 * 2 - 
ªgi⁄
 * 85) * 3;

58 
p
 = (
v
 * (255 - 
s
)) >> 8;

59 
q
 = (
v
 * (255 - ((
s
 * 
ªmaödî
) >> 8))) >> 8;

60 
t
 = (
v
 * (255 - ((
s
 * (255 - 
ªmaödî
)) >> 8))) >> 8;

62 
ªgi⁄
) {

65 
rgb
.
r
 = 
v
;

66 
rgb
.
g
 = 
t
;

67 
rgb
.
b
 = 
p
;

70 
rgb
.
r
 = 
q
;

71 
rgb
.
g
 = 
v
;

72 
rgb
.
b
 = 
p
;

75 
rgb
.
r
 = 
p
;

76 
rgb
.
g
 = 
v
;

77 
rgb
.
b
 = 
t
;

80 
rgb
.
r
 = 
p
;

81 
rgb
.
g
 = 
q
;

82 
rgb
.
b
 = 
v
;

85 
rgb
.
r
 = 
t
;

86 
rgb
.
g
 = 
p
;

87 
rgb
.
b
 = 
v
;

90 
rgb
.
r
 = 
v
;

91 
rgb
.
g
 = 
p
;

92 
rgb
.
b
 = 
q
;

96  
rgb
;

97 
	}
}

99 
RGB
 
	$hsv_to_rgb
(
HSV
 
hsv
) {

100 #ifde‡
USE_CIE1931_CURVE


101  
	`hsv_to_rgb_im∂
(
hsv
, 
åue
);

103  
	`hsv_to_rgb_im∂
(
hsv
, 
Ál£
);

105 
	}
}

107 
RGB
 
	$hsv_to_rgb_nocõ
(
HSV
 
hsv
Ë{  
	`hsv_to_rgb_im∂
(hsv, 
Ál£
); 
	}
}

109 #ifde‡
RGBW


110 #i‚de‡
MIN


111 
	#MIN
(
a
, 
b
Ë(◊Ë< (bË? (aË: (b))

	)

113 
	$c⁄vît_rgb_to_rgbw
(
LED_TYPE
 *
Àd
) {

116 
Àd
->
w
 = 
	`MIN
÷ed->
r
, MIN÷ed->
g
,Üed->
b
));

117 
Àd
->
r
 -Àd->
w
;

118 
Àd
->
g
 -Àd->
w
;

119 
Àd
->
b
 -Àd->
w
;

120 
	}
}

	@color.h

17 #i‚de‡
COLOR_H


18 
	#COLOR_H


	)

20 
	~<°döt.h
>

21 
	~<°dboﬁ.h
>

23 #i‡
deföed
(
__GNUC__
)

24 
	#PACKED
 
	`__©åibuã__
((
__∑cked__
))

	)

26 
	#PACKED


	)

29 #i‡
deföed
(
_MSC_VER
)

30 #¥agm®
∑ck
(
push
, 1)

33 #ifde‡
RGBW


34 
	#LED_TYPE
 
cRGBW


	)

36 
	#LED_TYPE
 
RGB


	)

40 
	sPACKED
 {

41 
uöt8_t
 
	mg
;

42 
uöt8_t
 
	mr
;

43 
uöt8_t
 
	mb
;

44 } 
	tcRGB
;

46 
cRGB
 
	tRGB
;

49 
	sPACKED
 {

50 
uöt8_t
 
	mg
;

51 
uöt8_t
 
	mr
;

52 
uöt8_t
 
	mb
;

53 
uöt8_t
 
	mw
;

54 } 
	tcRGBW
;

56 
	sPACKED
 {

57 
uöt8_t
 
	mh
;

58 
uöt8_t
 
	ms
;

59 
uöt8_t
 
	mv
;

60 } 
	tHSV
;

62 #i‡
deföed
(
_MSC_VER
)

63 #¥agm®
∑ck
(
p›
)

66 
RGB
 
hsv_to_rgb
(
HSV
 
hsv
);

67 
RGB
 
hsv_to_rgb_nocõ
(
HSV
 
hsv
);

68 #ifde‡
RGBW


69 
c⁄vît_rgb_to_rgbw
(
LED_TYPE
 *
Àd
);

	@config_common.h

17 #¥agm®
⁄˚


20 
	#COL2ROW
 0

	)

21 
	#ROW2COL
 1

	)

24 
	#NO_PIN
 (
pö_t
)(~0)

	)

26 #ifde‡
__AVR__


27 #i‚de‡
__ASSEMBLER__


28 
	~<avr/io.h
>

30 
	#PORT_SHIFTER
 4

31 

	)

35 #i‡
deföed
(
__AVR_ATmega32U4__
Ë|| deföed(
__AVR_ATmega16U4__
)

36 
	#ADDRESS_BASE
 0x00

	)

37 
	#PINB_ADDRESS
 0x3

	)

38 
	#PINC_ADDRESS
 0x6

	)

39 
	#PIND_ADDRESS
 0x9

	)

40 
	#PINE_ADDRESS
 0xC

	)

41 
	#PINF_ADDRESS
 0xF

	)

42 #ñi‡
deföed
(
__AVR_ATmega32U2__
Ë|| deföed(
__AVR_ATmega16U2__
)

43 
	#ADDRESS_BASE
 0x00

	)

44 
	#PINB_ADDRESS
 0x3

	)

45 
	#PINC_ADDRESS
 0x6

	)

46 
	#PIND_ADDRESS
 0x9

	)

47 #ñi‡
deföed
(
__AVR_AT90USB646__
Ë|| deföed(
__AVR_AT90USB647__
Ë|| deföed(
__AVR_AT90USB1286__
Ë|| deföed(
__AVR_AT90USB1287__
)

48 
	#ADDRESS_BASE
 0x00

	)

49 
	#PINA_ADDRESS
 0x0

	)

50 
	#PINB_ADDRESS
 0x3

	)

51 
	#PINC_ADDRESS
 0x6

	)

52 
	#PIND_ADDRESS
 0x9

	)

53 
	#PINE_ADDRESS
 0xC

	)

54 
	#PINF_ADDRESS
 0xF

	)

55 #ñi‡
deföed
(
__AVR_ATmega32A__
)

56 
	#ADDRESS_BASE
 0x10

	)

57 
	#PIND_ADDRESS
 0x0

	)

58 
	#PINC_ADDRESS
 0x3

	)

59 
	#PINB_ADDRESS
 0x6

	)

60 
	#PINA_ADDRESS
 0x9

	)

61 #ñi‡
deföed
(
__AVR_ATmega328P__
Ë|| deföed(
__AVR_ATmega328__
)

62 
	#ADDRESS_BASE
 0x00

	)

63 
	#PINB_ADDRESS
 0x3

	)

64 
	#PINC_ADDRESS
 0x6

	)

65 
	#PIND_ADDRESS
 0x9

	)

66 #ñi‡
deföed
(
__AVR_ATtöy85__
)

67 
	#ADDRESS_BASE
 0x10

	)

68 
	#PINB_ADDRESS
 0x6

	)

74 
	#PINDEF
(
p‹t
, 
pö
Ë((
PIN
##p‹t##
_ADDRESS
 << 
PORT_SHIFTER
Ë|Öö)

	)

76 #ifde‡
PORTA


77 
	#A0
 
	`PINDEF
(
A
, 0)

	)

78 
	#A1
 
	`PINDEF
(
A
, 1)

	)

79 
	#A2
 
	`PINDEF
(
A
, 2)

	)

80 
	#A3
 
	`PINDEF
(
A
, 3)

	)

81 
	#A4
 
	`PINDEF
(
A
, 4)

	)

82 
	#A5
 
	`PINDEF
(
A
, 5)

	)

83 
	#A6
 
	`PINDEF
(
A
, 6)

	)

84 
	#A7
 
	`PINDEF
(
A
, 7)

	)

86 #ifde‡
PORTB


87 
	#B0
 
	`PINDEF
(
B
, 0)

	)

88 
	#B1
 
	`PINDEF
(
B
, 1)

	)

89 
	#B2
 
	`PINDEF
(
B
, 2)

	)

90 
	#B3
 
	`PINDEF
(
B
, 3)

	)

91 
	#B4
 
	`PINDEF
(
B
, 4)

	)

92 
	#B5
 
	`PINDEF
(
B
, 5)

	)

93 
	#B6
 
	`PINDEF
(
B
, 6)

	)

94 
	#B7
 
	`PINDEF
(
B
, 7)

	)

96 #ifde‡
PORTC


97 
	#C0
 
	`PINDEF
(
C
, 0)

	)

98 
	#C1
 
	`PINDEF
(
C
, 1)

	)

99 
	#C2
 
	`PINDEF
(
C
, 2)

	)

100 
	#C3
 
	`PINDEF
(
C
, 3)

	)

101 
	#C4
 
	`PINDEF
(
C
, 4)

	)

102 
	#C5
 
	`PINDEF
(
C
, 5)

	)

103 
	#C6
 
	`PINDEF
(
C
, 6)

	)

104 
	#C7
 
	`PINDEF
(
C
, 7)

	)

106 #ifde‡
PORTD


107 
	#D0
 
	`PINDEF
(
D
, 0)

	)

108 
	#D1
 
	`PINDEF
(
D
, 1)

	)

109 
	#D2
 
	`PINDEF
(
D
, 2)

	)

110 
	#D3
 
	`PINDEF
(
D
, 3)

	)

111 
	#D4
 
	`PINDEF
(
D
, 4)

	)

112 
	#D5
 
	`PINDEF
(
D
, 5)

	)

113 
	#D6
 
	`PINDEF
(
D
, 6)

	)

114 
	#D7
 
	`PINDEF
(
D
, 7)

	)

116 #ifde‡
PORTE


117 
	#E0
 
	`PINDEF
(
E
, 0)

	)

118 
	#E1
 
	`PINDEF
(
E
, 1)

	)

119 
	#E2
 
	`PINDEF
(
E
, 2)

	)

120 
	#E3
 
	`PINDEF
(
E
, 3)

	)

121 
	#E4
 
	`PINDEF
(
E
, 4)

	)

122 
	#E5
 
	`PINDEF
(
E
, 5)

	)

123 
	#E6
 
	`PINDEF
(
E
, 6)

	)

124 
	#E7
 
	`PINDEF
(
E
, 7)

	)

126 #ifde‡
PORTF


127 
	#F0
 
	`PINDEF
(
F
, 0)

	)

128 
	#F1
 
	`PINDEF
(
F
, 1)

	)

129 
	#F2
 
	`PINDEF
(
F
, 2)

	)

130 
	#F3
 
	`PINDEF
(
F
, 3)

	)

131 
	#F4
 
	`PINDEF
(
F
, 4)

	)

132 
	#F5
 
	`PINDEF
(
F
, 5)

	)

133 
	#F6
 
	`PINDEF
(
F
, 6)

	)

134 
	#F7
 
	`PINDEF
(
F
, 7)

	)

137 #i‚de‡
__ASSEMBLER__


138 
	#_PIN_ADDRESS
(
p
, 
off£t
Ë
	`_SFR_IO8
(
ADDRESS_BASE
 + (’Ë>> 
PORT_SHIFTER
Ë+ (off£t))

	)

140 
	#PINx_ADDRESS
(
p
Ë
	`_PIN_ADDRESS
’, 0)

	)

142 
	#DDRx_ADDRESS
(
p
Ë
	`_PIN_ADDRESS
’, 1)

	)

144 
	#PORTx_ADDRESS
(
p
Ë
	`_PIN_ADDRESS
’, 2)

	)

147 #ñi‡
deföed
(
PROTOCOL_CHIBIOS
)

149 #ifde‡
CONVERT_TO_PROTON_C


151 
	#D3
 
	`PAL_LINE
(
GPIOA
, 9)

	)

152 
	#D2
 
	`PAL_LINE
(
GPIOA
, 10)

	)

155 
	#D1
 
	`PAL_LINE
(
GPIOB
, 7)

	)

156 
	#D0
 
	`PAL_LINE
(
GPIOB
, 6)

	)

157 
	#D4
 
	`PAL_LINE
(
GPIOB
, 5)

	)

158 
	#C6
 
	`PAL_LINE
(
GPIOB
, 4)

	)

159 
	#D7
 
	`PAL_LINE
(
GPIOB
, 3)

	)

160 
	#E6
 
	`PAL_LINE
(
GPIOB
, 2)

	)

161 
	#B4
 
	`PAL_LINE
(
GPIOB
, 1)

	)

162 
	#B5
 
	`PAL_LINE
(
GPIOB
, 0)

	)

169 
	#F4
 
	`PAL_LINE
(
GPIOA
, 2)

	)

170 
	#F5
 
	`PAL_LINE
(
GPIOA
, 1)

	)

171 
	#F6
 
	`PAL_LINE
(
GPIOA
, 0)

	)

172 
	#F7
 
	`PAL_LINE
(
GPIOB
, 8)

	)

173 
	#B1
 
	`PAL_LINE
(
GPIOB
, 13)

	)

174 
	#B3
 
	`PAL_LINE
(
GPIOB
, 14)

	)

175 
	#B2
 
	`PAL_LINE
(
GPIOB
, 15)

	)

176 
	#B6
 
	`PAL_LINE
(
GPIOB
, 9)

	)

179 #ifde‡
CONVERT_TO_PROTON_C_RXLED


180 
	#D5
 
	`PAL_LINE
(
GPIOC
, 14)

	)

181 
	#B0
 
	`PAL_LINE
(
GPIOC
, 13)

	)

183 
	#D5
 
	`PAL_LINE
(
GPIOC
, 13)

	)

184 
	#B0
 
	`PAL_LINE
(
GPIOC
, 14)

	)

187 
	#A0
 
	`PAL_LINE
(
GPIOA
, 0)

	)

188 
	#A1
 
	`PAL_LINE
(
GPIOA
, 1)

	)

189 
	#A2
 
	`PAL_LINE
(
GPIOA
, 2)

	)

190 
	#A3
 
	`PAL_LINE
(
GPIOA
, 3)

	)

191 
	#A4
 
	`PAL_LINE
(
GPIOA
, 4)

	)

192 
	#A5
 
	`PAL_LINE
(
GPIOA
, 5)

	)

193 
	#A6
 
	`PAL_LINE
(
GPIOA
, 6)

	)

194 
	#A7
 
	`PAL_LINE
(
GPIOA
, 7)

	)

195 
	#A8
 
	`PAL_LINE
(
GPIOA
, 8)

	)

196 
	#A9
 
	`PAL_LINE
(
GPIOA
, 9)

	)

197 
	#A10
 
	`PAL_LINE
(
GPIOA
, 10)

	)

198 
	#A11
 
	`PAL_LINE
(
GPIOA
, 11)

	)

199 
	#A12
 
	`PAL_LINE
(
GPIOA
, 12)

	)

200 
	#A13
 
	`PAL_LINE
(
GPIOA
, 13)

	)

201 
	#A14
 
	`PAL_LINE
(
GPIOA
, 14)

	)

202 
	#A15
 
	`PAL_LINE
(
GPIOA
, 15)

	)

203 
	#B0
 
	`PAL_LINE
(
GPIOB
, 0)

	)

204 
	#B1
 
	`PAL_LINE
(
GPIOB
, 1)

	)

205 
	#B2
 
	`PAL_LINE
(
GPIOB
, 2)

	)

206 
	#B3
 
	`PAL_LINE
(
GPIOB
, 3)

	)

207 
	#B4
 
	`PAL_LINE
(
GPIOB
, 4)

	)

208 
	#B5
 
	`PAL_LINE
(
GPIOB
, 5)

	)

209 
	#B6
 
	`PAL_LINE
(
GPIOB
, 6)

	)

210 
	#B7
 
	`PAL_LINE
(
GPIOB
, 7)

	)

211 
	#B8
 
	`PAL_LINE
(
GPIOB
, 8)

	)

212 
	#B9
 
	`PAL_LINE
(
GPIOB
, 9)

	)

213 
	#B10
 
	`PAL_LINE
(
GPIOB
, 10)

	)

214 
	#B11
 
	`PAL_LINE
(
GPIOB
, 11)

	)

215 
	#B12
 
	`PAL_LINE
(
GPIOB
, 12)

	)

216 
	#B13
 
	`PAL_LINE
(
GPIOB
, 13)

	)

217 
	#B14
 
	`PAL_LINE
(
GPIOB
, 14)

	)

218 
	#B15
 
	`PAL_LINE
(
GPIOB
, 15)

	)

219 
	#B16
 
	`PAL_LINE
(
GPIOB
, 16)

	)

220 
	#B17
 
	`PAL_LINE
(
GPIOB
, 17)

	)

221 
	#B18
 
	`PAL_LINE
(
GPIOB
, 18)

	)

222 
	#B19
 
	`PAL_LINE
(
GPIOB
, 19)

	)

223 
	#C0
 
	`PAL_LINE
(
GPIOC
, 0)

	)

224 
	#C1
 
	`PAL_LINE
(
GPIOC
, 1)

	)

225 
	#C2
 
	`PAL_LINE
(
GPIOC
, 2)

	)

226 
	#C3
 
	`PAL_LINE
(
GPIOC
, 3)

	)

227 
	#C4
 
	`PAL_LINE
(
GPIOC
, 4)

	)

228 
	#C5
 
	`PAL_LINE
(
GPIOC
, 5)

	)

229 
	#C6
 
	`PAL_LINE
(
GPIOC
, 6)

	)

230 
	#C7
 
	`PAL_LINE
(
GPIOC
, 7)

	)

231 
	#C8
 
	`PAL_LINE
(
GPIOC
, 8)

	)

232 
	#C9
 
	`PAL_LINE
(
GPIOC
, 9)

	)

233 
	#C10
 
	`PAL_LINE
(
GPIOC
, 10)

	)

234 
	#C11
 
	`PAL_LINE
(
GPIOC
, 11)

	)

235 
	#C12
 
	`PAL_LINE
(
GPIOC
, 12)

	)

236 
	#C13
 
	`PAL_LINE
(
GPIOC
, 13)

	)

237 
	#C14
 
	`PAL_LINE
(
GPIOC
, 14)

	)

238 
	#C15
 
	`PAL_LINE
(
GPIOC
, 15)

	)

239 
	#D0
 
	`PAL_LINE
(
GPIOD
, 0)

	)

240 
	#D1
 
	`PAL_LINE
(
GPIOD
, 1)

	)

241 
	#D2
 
	`PAL_LINE
(
GPIOD
, 2)

	)

242 
	#D3
 
	`PAL_LINE
(
GPIOD
, 3)

	)

243 
	#D4
 
	`PAL_LINE
(
GPIOD
, 4)

	)

244 
	#D5
 
	`PAL_LINE
(
GPIOD
, 5)

	)

245 
	#D6
 
	`PAL_LINE
(
GPIOD
, 6)

	)

246 
	#D7
 
	`PAL_LINE
(
GPIOD
, 7)

	)

247 
	#D8
 
	`PAL_LINE
(
GPIOD
, 8)

	)

248 
	#D9
 
	`PAL_LINE
(
GPIOD
, 9)

	)

249 
	#D10
 
	`PAL_LINE
(
GPIOD
, 10)

	)

250 
	#D11
 
	`PAL_LINE
(
GPIOD
, 11)

	)

251 
	#D12
 
	`PAL_LINE
(
GPIOD
, 12)

	)

252 
	#D13
 
	`PAL_LINE
(
GPIOD
, 13)

	)

253 
	#D14
 
	`PAL_LINE
(
GPIOD
, 14)

	)

254 
	#D15
 
	`PAL_LINE
(
GPIOD
, 15)

	)

255 
	#E0
 
	`PAL_LINE
(
GPIOE
, 0)

	)

256 
	#E1
 
	`PAL_LINE
(
GPIOE
, 1)

	)

257 
	#E2
 
	`PAL_LINE
(
GPIOE
, 2)

	)

258 
	#E3
 
	`PAL_LINE
(
GPIOE
, 3)

	)

259 
	#E4
 
	`PAL_LINE
(
GPIOE
, 4)

	)

260 
	#E5
 
	`PAL_LINE
(
GPIOE
, 5)

	)

261 
	#E6
 
	`PAL_LINE
(
GPIOE
, 6)

	)

262 
	#E7
 
	`PAL_LINE
(
GPIOE
, 7)

	)

263 
	#E8
 
	`PAL_LINE
(
GPIOE
, 8)

	)

264 
	#E9
 
	`PAL_LINE
(
GPIOE
, 9)

	)

265 
	#E10
 
	`PAL_LINE
(
GPIOE
, 10)

	)

266 
	#E11
 
	`PAL_LINE
(
GPIOE
, 11)

	)

267 
	#E12
 
	`PAL_LINE
(
GPIOE
, 12)

	)

268 
	#E13
 
	`PAL_LINE
(
GPIOE
, 13)

	)

269 
	#E14
 
	`PAL_LINE
(
GPIOE
, 14)

	)

270 
	#E15
 
	`PAL_LINE
(
GPIOE
, 15)

	)

271 
	#F0
 
	`PAL_LINE
(
GPIOF
, 0)

	)

272 
	#F1
 
	`PAL_LINE
(
GPIOF
, 1)

	)

273 
	#F2
 
	`PAL_LINE
(
GPIOF
, 2)

	)

274 
	#F3
 
	`PAL_LINE
(
GPIOF
, 3)

	)

275 
	#F4
 
	`PAL_LINE
(
GPIOF
, 4)

	)

276 
	#F5
 
	`PAL_LINE
(
GPIOF
, 5)

	)

277 
	#F6
 
	`PAL_LINE
(
GPIOF
, 6)

	)

278 
	#F7
 
	`PAL_LINE
(
GPIOF
, 7)

	)

279 
	#F8
 
	`PAL_LINE
(
GPIOF
, 8)

	)

280 
	#F9
 
	`PAL_LINE
(
GPIOF
, 9)

	)

281 
	#F10
 
	`PAL_LINE
(
GPIOF
, 10)

	)

282 
	#F11
 
	`PAL_LINE
(
GPIOF
, 11)

	)

283 
	#F12
 
	`PAL_LINE
(
GPIOF
, 12)

	)

284 
	#F13
 
	`PAL_LINE
(
GPIOF
, 13)

	)

285 
	#F14
 
	`PAL_LINE
(
GPIOF
, 14)

	)

286 
	#F15
 
	`PAL_LINE
(
GPIOF
, 15)

	)

291 #ifde‡
BLUETOOTH_ENABLE


292 #ifde‡
__AVR_ATmega32U4__


293 
	#SERIAL_UART_BAUD
 9600

	)

294 
	#SERIAL_UART_DATA
 
UDR1


	)

295 
	#SERIAL_UART_UBRR
 (
F_CPU
 / (16UL * 
SERIAL_UART_BAUD
Ë- 1)

	)

296 
	#SERIAL_UART_RXD_VECT
 
USART1_RX_ve˘


	)

297 
	#SERIAL_UART_TXD_READY
 (
UCSR1A
 & 
	`_BV
(
UDRE1
))

	)

298 
	#SERIAL_UART_INIT
() \

301 
UBRR1L
 = 
SERIAL_UART_UBRR
; \

303 
UBRR1H
 = 
SERIAL_UART_UBRR
 >> 8; \

305 
UCSR1B
 = 
	`_BV
(
TXEN1
); \

307 
UCSR1C
 = 
	`_BV
(
UCSZ11
Ë| _BV(
UCSZ10
); \

308 
	`£i
(); \

309 } 0)

	)

310 #ñi‡
deföed
(
__AVR_AT90USB646__
Ë|| deföed(
__AVR_AT90USB647__
Ë|| deföed(
__AVR_AT90USB1286__
Ë|| deföed(
__AVR_AT90USB1287__
)

311 
	#SERIAL_UART_BAUD
 115200

	)

312 
	#SERIAL_UART_DATA
 
UDR1


	)

314 
	#SERIAL_UART_UBRR
 (
F_CPU
 / (8UL * 
SERIAL_UART_BAUD
Ë- 1)

	)

315 
	#SERIAL_UART_RXD_VECT
 
USART1_RX_ve˘


	)

316 
	#SERIAL_UART_TXD_READY
 (
UCSR1A
 & 
	`_BV
(
UDRE1
))

	)

317 
	#SERIAL_UART_INIT
() \

319 
UCSR1A
 = 
	`_BV
(
U2X1
); \

321 
UBRR1L
 = 
SERIAL_UART_UBRR
; \

323 
UBRR1H
 = 
SERIAL_UART_UBRR
 >> 8; \

325 
UCSR1B
 = 
	`_BV
(
TXEN1
); \

327 
UCSR1C
 = 
	`_BV
(
UCSZ11
Ë| _BV(
UCSZ10
); \

328 
	`£i
(); \

329 } 0)

	)

335 
	#API_SYSEX_MAX_SIZE
 32

	)

337 
	~"s⁄g_li°.h
"

	@debounce.h

1 #¥agm®
⁄˚


7 
deboun˚
(
m©rix_row_t
 
øw
[], m©rix_row_à
cooked
[], 
uöt8_t
 
num_rows
, 
boﬁ
 
ch™ged
);

9 
boﬁ
 
deboun˚_a˘ive
();

11 
deboun˚_öô
(
uöt8_t
 
num_rows
);

	@dip_switch.c

19 
	~"dù_swôch.h
"

22 
	~<°rög.h
>

24 #i‡!
deföed
(
DIP_SWITCH_PINS
Ë&& !deföed(
DIP_SWITCH_MATRIX_GRID
)

28 #i‡
deföed
(
DIP_SWITCH_PINS
Ë&& deföed(
DIP_SWITCH_MATRIX_GRID
)

32 #ifde‡
DIP_SWITCH_PINS


33 
	#NUMBER_OF_DIP_SWITCHES
 ((
dù_swôch_∑d
Ë/ (
pö_t
))

	)

34 
pö_t
 
	gdù_swôch_∑d
[] = 
DIP_SWITCH_PINS
;

37 #ifde‡
DIP_SWITCH_MATRIX_GRID


38 
	sm©rix_ödex_t
 {

39 
uöt8_t
 
	mrow
;

40 
uöt8_t
 
	mcﬁ
;

41 } 
	tm©rix_ödex_t
;

43 
	#NUMBER_OF_DIP_SWITCHES
 ((
dù_swôch_∑d
Ë/ (
m©rix_ödex_t
))

	)

44 
m©rix_ödex_t
 
	gdù_swôch_∑d
[] = 
DIP_SWITCH_MATRIX_GRID
;

45 
boﬁ
 
≥ek_m©rix
(
uöt8_t
 
row_ödex
, uöt8_à
cﬁ_ödex
, boﬁ 
ªad_øw
);

46 
uöt16_t
 
	gsˇn_cou¡
;

49 
boﬁ
 
	gdù_swôch_°©e
[
NUMBER_OF_DIP_SWITCHES
] = {0};

50 
boﬁ
 
	gœ°_dù_swôch_°©e
[
NUMBER_OF_DIP_SWITCHES
] = {0};

52 
__©åibuã__
((
wók
)Ë
	$dù_swôch_upd©e_u£r
(
uöt8_t
 
ödex
, 
boﬁ
 
a˘ive
Ë{
	}
}

54 
__©åibuã__
((
wók
)Ë
	$dù_swôch_upd©e_kb
(
uöt8_t
 
ödex
, 
boﬁ
 
a˘ive
Ë{ 
	`dù_swôch_upd©e_u£r
(ödex,á˘ive); 
	}
}

56 
__©åibuã__
((
wók
)Ë
	$dù_swôch_upd©e_mask_u£r
(
uöt32_t
 
°©e
Ë{
	}
}

58 
__©åibuã__
((
wók
)Ë
	$dù_swôch_upd©e_mask_kb
(
uöt32_t
 
°©e
Ë{ 
	`dù_swôch_upd©e_mask_u£r
(°©e); 
	}
}

60 
	$dù_swôch_öô
() {

61 #ifde‡
DIP_SWITCH_PINS


62 
uöt8_t
 
i
 = 0; i < 
NUMBER_OF_DIP_SWITCHES
; i++) {

63 
	`£tPöI≈utHigh
(
dù_swôch_∑d
[
i
]);

65 
	`dù_swôch_ªad
(
åue
);

67 #ifde‡
DIP_SWITCH_MATRIX_GRID


68 
sˇn_cou¡
 = 0;

70 
	}
}

72 
	$dù_swôch_ªad
(
boﬁ
 
f‹˚d
) {

73 
boﬁ
 
has_dù_°©e_ch™ged
 = 
Ál£
;

74 
uöt32_t
 
dù_swôch_mask
 = 0;

76 #ifde‡
DIP_SWITCH_MATRIX_GRID


77 
boﬁ
 
ªad_øw
 = 
Ál£
;

79 i‡(
sˇn_cou¡
 < 500) {

80 
sˇn_cou¡
++;

81 i‡(
sˇn_cou¡
 == 10) {

82 
ªad_øw
 = 
åue
;

83 
f‹˚d
 = 
åue
;

90 
uöt8_t
 
i
 = 0; i < 
NUMBER_OF_DIP_SWITCHES
; i++) {

91 #ifde‡
DIP_SWITCH_PINS


92 
dù_swôch_°©e
[
i
] = !
	`ªadPö
(
dù_swôch_∑d
[i]);

94 #ifde‡
DIP_SWITCH_MATRIX_GRID


95 
dù_swôch_°©e
[
i
] = 
	`≥ek_m©rix
(
dù_swôch_∑d
[i].
row
, dù_swôch_∑d[i].
cﬁ
, 
ªad_øw
);

97 
dù_swôch_mask
 |
dù_swôch_°©e
[
i
] << i;

98 i‡(
œ°_dù_swôch_°©e
[
i
] !
dù_swôch_°©e
[i] || 
f‹˚d
) {

99 
has_dù_°©e_ch™ged
 = 
åue
;

100 
	`dù_swôch_upd©e_kb
(
i
, 
dù_swôch_°©e
[i]);

103 i‡(
has_dù_°©e_ch™ged
) {

104 
	`dù_swôch_upd©e_mask_kb
(
dù_swôch_mask
);

105 
	`mem˝y
(
œ°_dù_swôch_°©e
, 
dù_swôch_°©e
, (dip_switch_state));

107 
	}
}

	@dip_switch.h

19 #¥agm®
⁄˚


21 
	~"qu™tum.h
"

23 
dù_swôch_upd©e_kb
(
uöt8_t
 
ödex
, 
boﬁ
 
a˘ive
);

24 
dù_swôch_upd©e_u£r
(
uöt8_t
 
ödex
, 
boﬁ
 
a˘ive
);

25 
dù_swôch_upd©e_mask_u£r
(
uöt32_t
 
°©e
);

26 
dù_swôch_upd©e_mask_kb
(
uöt32_t
 
°©e
);

28 
dù_swôch_öô
();

29 
dù_swôch_ªad
(
boﬁ
 
f‹˚d
);

	@dynamic_keymap.c

17 
	~"c⁄fig.h
"

18 
	~"keym≠.h
"

19 
	~"tmk_c‹e/comm⁄/ì¥om.h
"

20 
	~"¥ogmem.h
"

21 
	~"qu™tum.h
"

22 
	~"dy«mic_keym≠.h
"

23 
	~"vü.h
"

25 #i‚de‡
DYNAMIC_KEYMAP_LAYER_COUNT


26 
	#DYNAMIC_KEYMAP_LAYER_COUNT
 4

	)

29 #i‚de‡
DYNAMIC_KEYMAP_MACRO_COUNT


30 
	#DYNAMIC_KEYMAP_MACRO_COUNT
 16

	)

37 #i‚de‡
DYNAMIC_KEYMAP_EEPROM_MAX_ADDR


38 #i‡
deföed
(
__AVR_AT90USB646__
Ë|| deföed(
__AVR_AT90USB647__
Ë|| deföed(
__AVR_AT90USB1286__
Ë|| deföed(
__AVR_AT90USB1287__
)

39 
	#DYNAMIC_KEYMAP_EEPROM_MAX_ADDR
 2047

	)

41 
	#DYNAMIC_KEYMAP_EEPROM_MAX_ADDR
 1023

	)

46 #i‡
DYNAMIC_KEYMAP_EEPROM_MAX_ADDR
 > 65535

47 #îr‹ 
DYNAMIC_KEYMAP_EEPROM_MAX_ADDR
 
mu°
 
be
 
Àss
 
th™
 65536

52 #i‚de‡
DYNAMIC_KEYMAP_EEPROM_ADDR


53 #ifde‡
VIA_EEPROM_CUSTOM_CONFIG_ADDR


54 
	#DYNAMIC_KEYMAP_EEPROM_ADDR
 (
VIA_EEPROM_CUSTOM_CONFIG_ADDR
 + 
VIA_EEPROM_CUSTOM_CONFIG_SIZE
)

	)

56 #îr‹ 
DYNAMIC_KEYMAP_EEPROM_ADDR
 
nŸ
 
deföed


61 #i‚de‡
DYNAMIC_KEYMAP_MACRO_EEPROM_ADDR


62 
	#DYNAMIC_KEYMAP_MACRO_EEPROM_ADDR
 (
DYNAMIC_KEYMAP_EEPROM_ADDR
 + (
DYNAMIC_KEYMAP_LAYER_COUNT
 * 
MATRIX_ROWS
 * 
MATRIX_COLS
 * 2))

	)

70 #i‡
DYNAMIC_KEYMAP_EEPROM_MAX_ADDR
 - 
DYNAMIC_KEYMAP_MACRO_EEPROM_ADDR
 < 100

71 #îr‹ 
Dy«mic
 
keym≠s
 
¨e
 
c⁄figuªd
 
to
 
u£
 
m‹e
 
EEPROM
 
th™
 
is
 
avaûabÀ
.

76 #i‚de‡
DYNAMIC_KEYMAP_MACRO_EEPROM_SIZE


77 
	#DYNAMIC_KEYMAP_MACRO_EEPROM_SIZE
 (
DYNAMIC_KEYMAP_EEPROM_MAX_ADDR
 - 
DYNAMIC_KEYMAP_MACRO_EEPROM_ADDR
 + 1)

	)

80 
uöt8_t
 
	$dy«mic_keym≠_gë_œyî_cou¡
(Ë{  
DYNAMIC_KEYMAP_LAYER_COUNT
; 
	}
}

82 *
	$dy«mic_keym≠_key_to_ì¥om_addªss
(
uöt8_t
 
œyî
, uöt8_à
row
, uöt8_à
cﬁumn
) {

84  ((*)
DYNAMIC_KEYMAP_EEPROM_ADDR
Ë+ (
œyî
 * 
MATRIX_ROWS
 * 
MATRIX_COLS
 * 2Ë+ (
row
 * MATRIX_COLS * 2Ë+ (
cﬁumn
 * 2);

85 
	}
}

87 
uöt16_t
 
	$dy«mic_keym≠_gë_keycode
(
uöt8_t
 
œyî
, uöt8_à
row
, uöt8_à
cﬁumn
) {

88 *
addªss
 = 
	`dy«mic_keym≠_key_to_ì¥om_addªss
(
œyî
, 
row
, 
cﬁumn
);

90 
uöt16_t
 
keycode
 = 
	`ì¥om_ªad_byã
(
addªss
) << 8;

91 
keycode
 |
	`ì¥om_ªad_byã
(
addªss
 + 1);

92  
keycode
;

93 
	}
}

95 
	$dy«mic_keym≠_£t_keycode
(
uöt8_t
 
œyî
, uöt8_à
row
, uöt8_à
cﬁumn
, 
uöt16_t
 
keycode
) {

96 *
addªss
 = 
	`dy«mic_keym≠_key_to_ì¥om_addªss
(
œyî
, 
row
, 
cﬁumn
);

98 
	`ì¥om_upd©e_byã
(
addªss
, (
uöt8_t
)(
keycode
 >> 8));

99 
	`ì¥om_upd©e_byã
(
addªss
 + 1, (
uöt8_t
)(
keycode
 & 0xFF));

100 
	}
}

102 
	$dy«mic_keym≠_ª£t
() {

106 
œyî
 = 0;Üayî < 
DYNAMIC_KEYMAP_LAYER_COUNT
;Üayer++) {

107 
row
 = 0;Ñow < 
MATRIX_ROWS
;Ñow++) {

108 
cﬁumn
 = 0; cﬁum¿< 
MATRIX_COLS
; column++) {

109 
	`dy«mic_keym≠_£t_keycode
(
œyî
, 
row
, 
cﬁumn
, 
	`pgm_ªad_w‹d
(&
keym≠s
[layer][row][column]));

113 
	}
}

115 
	$dy«mic_keym≠_gë_buf„r
(
uöt16_t
 
off£t
, uöt16_à
size
, 
uöt8_t
 *
d©a
) {

116 
uöt16_t
 
dy«mic_keym≠_ì¥om_size
 = 
DYNAMIC_KEYMAP_LAYER_COUNT
 * 
MATRIX_ROWS
 * 
MATRIX_COLS
 * 2;

117 * 
sour˚
 = (*)(
DYNAMIC_KEYMAP_EEPROM_ADDR
 + 
off£t
);

118 
uöt8_t
 *
èrgë
 = 
d©a
;

119 
uöt16_t
 
i
 = 0; i < 
size
; i++) {

120 i‡(
off£t
 + 
i
 < 
dy«mic_keym≠_ì¥om_size
) {

121 *
èrgë
 = 
	`ì¥om_ªad_byã
(
sour˚
);

123 *
èrgë
 = 0x00;

125 
sour˚
++;

126 
èrgë
++;

128 
	}
}

130 
	$dy«mic_keym≠_£t_buf„r
(
uöt16_t
 
off£t
, uöt16_à
size
, 
uöt8_t
 *
d©a
) {

131 
uöt16_t
 
dy«mic_keym≠_ì¥om_size
 = 
DYNAMIC_KEYMAP_LAYER_COUNT
 * 
MATRIX_ROWS
 * 
MATRIX_COLS
 * 2;

132 * 
èrgë
 = (*)(
DYNAMIC_KEYMAP_EEPROM_ADDR
 + 
off£t
);

133 
uöt8_t
 *
sour˚
 = 
d©a
;

134 
uöt16_t
 
i
 = 0; i < 
size
; i++) {

135 i‡(
off£t
 + 
i
 < 
dy«mic_keym≠_ì¥om_size
) {

136 
	`ì¥om_upd©e_byã
(
èrgë
, *
sour˚
);

138 
sour˚
++;

139 
èrgë
++;

141 
	}
}

144 
uöt16_t
 
	$keym≠_key_to_keycode
(
uöt8_t
 
œyî
, 
keypos_t
 
key
) {

145 i‡(
œyî
 < 
DYNAMIC_KEYMAP_LAYER_COUNT
 && 
key
.
row
 < 
MATRIX_ROWS
 && key.
cﬁ
 < 
MATRIX_COLS
) {

146  
	`dy«mic_keym≠_gë_keycode
(
œyî
, 
key
.
row
, key.
cﬁ
);

148  
KC_NO
;

150 
	}
}

152 
uöt8_t
 
	$dy«mic_keym≠_ma¸o_gë_cou¡
(Ë{  
DYNAMIC_KEYMAP_MACRO_COUNT
; 
	}
}

154 
uöt16_t
 
	$dy«mic_keym≠_ma¸o_gë_buf„r_size
(Ë{  
DYNAMIC_KEYMAP_MACRO_EEPROM_SIZE
; 
	}
}

156 
	$dy«mic_keym≠_ma¸o_gë_buf„r
(
uöt16_t
 
off£t
, uöt16_à
size
, 
uöt8_t
 *
d©a
) {

157 * 
sour˚
 = (*)(
DYNAMIC_KEYMAP_MACRO_EEPROM_ADDR
 + 
off£t
);

158 
uöt8_t
 *
èrgë
 = 
d©a
;

159 
uöt16_t
 
i
 = 0; i < 
size
; i++) {

160 i‡(
off£t
 + 
i
 < 
DYNAMIC_KEYMAP_MACRO_EEPROM_SIZE
) {

161 *
èrgë
 = 
	`ì¥om_ªad_byã
(
sour˚
);

163 *
èrgë
 = 0x00;

165 
sour˚
++;

166 
èrgë
++;

168 
	}
}

170 
	$dy«mic_keym≠_ma¸o_£t_buf„r
(
uöt16_t
 
off£t
, uöt16_à
size
, 
uöt8_t
 *
d©a
) {

171 * 
èrgë
 = (*)(
DYNAMIC_KEYMAP_MACRO_EEPROM_ADDR
 + 
off£t
);

172 
uöt8_t
 *
sour˚
 = 
d©a
;

173 
uöt16_t
 
i
 = 0; i < 
size
; i++) {

174 i‡(
off£t
 + 
i
 < 
DYNAMIC_KEYMAP_MACRO_EEPROM_SIZE
) {

175 
	`ì¥om_upd©e_byã
(
èrgë
, *
sour˚
);

177 
sour˚
++;

178 
èrgë
++;

180 
	}
}

182 
	$dy«mic_keym≠_ma¸o_ª£t
() {

183 *
p
 = (*)(
DYNAMIC_KEYMAP_MACRO_EEPROM_ADDR
);

184 *
íd
 = (*)(
DYNAMIC_KEYMAP_MACRO_EEPROM_ADDR
 + 
DYNAMIC_KEYMAP_MACRO_EEPROM_SIZE
);

185 
p
 !
íd
) {

186 
	`ì¥om_upd©e_byã
(
p
, 0);

187 ++
p
;

189 
	}
}

191 
	$dy«mic_keym≠_ma¸o_£nd
(
uöt8_t
 
id
) {

192 i‡(
id
 >
DYNAMIC_KEYMAP_MACRO_COUNT
) {

200 *
p
 = (*)(
DYNAMIC_KEYMAP_MACRO_EEPROM_ADDR
 + 
DYNAMIC_KEYMAP_MACRO_EEPROM_SIZE
 - 1);

201 i‡(
	`ì¥om_ªad_byã
(
p
) != 0) {

207 
p
 = (*)(
DYNAMIC_KEYMAP_MACRO_EEPROM_ADDR
);

208 *
íd
 = (*)(
DYNAMIC_KEYMAP_MACRO_EEPROM_ADDR
 + 
DYNAMIC_KEYMAP_MACRO_EEPROM_SIZE
);

209 
id
 > 0) {

213 i‡(
p
 =
íd
) {

216 i‡(
	`ì¥om_ªad_byã
(
p
) == 0) {

217 --
id
;

219 ++
p
;

224 
d©a
[4] = {0, 0, 0, 0};

228 
d©a
[0] = 
	`ì¥om_ªad_byã
(
p
++);

229 
d©a
[1] = 0;

231 i‡(
d©a
[0] == 0) {

236 i‡(
d©a
[0] =
SS_TAP_CODE
 || d©a[0] =
SS_DOWN_CODE
 || d©a[0] =
SS_UP_CODE
) {

237 
d©a
[1] = data[0];

238 
d©a
[0] = 
SS_QMK_PREFIX
;

239 
d©a
[2] = 
	`ì¥om_ªad_byã
(
p
++);

240 i‡(
d©a
[2] == 0) {

244 
	`£nd_°rög
(
d©a
);

246 
	}
}

	@dynamic_keymap.h

16 #¥agm®
⁄˚


18 
	~<°döt.h
>

19 
	~<°dboﬁ.h
>

21 
uöt8_t
 
dy«mic_keym≠_gë_œyî_cou¡
();

22 * 
dy«mic_keym≠_key_to_ì¥om_addªss
(
uöt8_t
 
œyî
, uöt8_à
row
, uöt8_à
cﬁumn
);

23 
uöt16_t
 
dy«mic_keym≠_gë_keycode
(
uöt8_t
 
œyî
, uöt8_à
row
, uöt8_à
cﬁumn
);

24 
dy«mic_keym≠_£t_keycode
(
uöt8_t
 
œyî
, uöt8_à
row
, uöt8_à
cﬁumn
, 
uöt16_t
 
keycode
);

25 
dy«mic_keym≠_ª£t
();

34 
dy«mic_keym≠_gë_buf„r
(
uöt16_t
 
off£t
, uöt16_à
size
, 
uöt8_t
 *
d©a
);

35 
dy«mic_keym≠_£t_buf„r
(
uöt16_t
 
off£t
, uöt16_à
size
, 
uöt8_t
 *
d©a
);

54 
uöt8_t
 
dy«mic_keym≠_ma¸o_gë_cou¡
();

55 
uöt16_t
 
dy«mic_keym≠_ma¸o_gë_buf„r_size
();

56 
dy«mic_keym≠_ma¸o_gë_buf„r
(
uöt16_t
 
off£t
, uöt16_à
size
, 
uöt8_t
 *
d©a
);

57 
dy«mic_keym≠_ma¸o_£t_buf„r
(
uöt16_t
 
off£t
, uöt16_à
size
, 
uöt8_t
 *
d©a
);

58 
dy«mic_keym≠_ma¸o_ª£t
();

60 
dy«mic_keym≠_ma¸o_£nd
(
uöt8_t
 
id
);

	@dynamic_macro.h

18 #¥agm®
⁄˚


21 #¥agm®
mesßge
 "Dynamic Macros isÇowá core feature. See updated documentationÅo see howÅo configure it: https://docs.qmk.fm/#/feature_dynamic_macros"

23 
	~"a˘i⁄_œyî.h
"

25 #i‚de‡
DYNAMIC_MACRO_SIZE


35 
	#DYNAMIC_MACRO_SIZE
 128

	)

39 
	$dy«mic_ma¸o_Àd_blök
() {

40 #ifde‡
BACKLIGHT_ENABLE


41 
	`backlight_toggÀ
();

42 
	`waô_ms
(100);

43 
	`backlight_toggÀ
();

45 
	}
}

50 
	#DYNAMIC_MACRO_CURRENT_SLOT
(Ë(
dúe˘i⁄
 > 0 ? 1 : 2)

	)

51 
	#DYNAMIC_MACRO_CURRENT_LENGTH
(
BEGIN
, 
POINTER
Ë(()(
dúe˘i⁄
 * ((POINTERË- (BEGIN))))

	)

52 
	#DYNAMIC_MACRO_CURRENT_CAPACITY
(
BEGIN
, 
END2
Ë(()(
dúe˘i⁄
 * ((END2Ë- (BEGIN)Ë+ 1))

	)

60 
	$dy«mic_ma¸o_ªc‹d_°¨t
(
keyªc‹d_t
 **
ma¸o_poöãr
, keyªc‹d_à*
ma¸o_buf„r
) {

61 
	`d¥öén
("dynamic macroÑecording: started");

63 
	`dy«mic_ma¸o_Àd_blök
();

65 
	`˛ór_keybﬂrd
();

66 
	`œyî_˛ór
();

67 *
ma¸o_poöãr
 = 
ma¸o_buf„r
;

68 
	}
}

77 
	$dy«mic_ma¸o_∂ay
(
keyªc‹d_t
 *
ma¸o_buf„r
, keyªc‹d_à*
ma¸o_íd
, 
öt8_t
 
dúe˘i⁄
) {

78 
	`d¥ötf
("dy«mi¯ma¸o: slŸ %dÖœyback\n", 
	`DYNAMIC_MACRO_CURRENT_SLOT
());

80 
uöt32_t
 
ßved_œyî_°©e
 = 
œyî_°©e
;

82 
	`˛ór_keybﬂrd
();

83 
	`œyî_˛ór
();

85 
ma¸o_buf„r
 !
ma¸o_íd
) {

86 
	`¥o˚ss_ªc‹d
(
ma¸o_buf„r
);

87 
ma¸o_buf„r
 +
dúe˘i⁄
;

90 
	`˛ór_keybﬂrd
();

92 
œyî_°©e
 = 
ßved_œyî_°©e
;

93 
	}
}

104 
	$dy«mic_ma¸o_ªc‹d_key
(
keyªc‹d_t
 *
ma¸o_buf„r
, keyªc‹d_à**
ma¸o_poöãr
, keyªc‹d_à*
ma¸o2_íd
, 
öt8_t
 
dúe˘i⁄
, keyªc‹d_à*
ªc‹d
) {

106 i‡(!
ªc‹d
->
evít
.
¥es£d
 && *
ma¸o_poöãr
 =
ma¸o_buf„r
) {

107 
	`d¥öén
("dynamic macro: ignoringáÜeading key-upÉvent");

114 i‡(*
ma¸o_poöãr
 - 
dúe˘i⁄
 !
ma¸o2_íd
) {

115 **
ma¸o_poöãr
 = *
ªc‹d
;

116 *
ma¸o_poöãr
 +
dúe˘i⁄
;

118 
	`dy«mic_ma¸o_Àd_blök
();

121 
	`d¥ötf
("dy«mi¯ma¸o: slŸ %dÜígth: %d/%d\n", 
	`DYNAMIC_MACRO_CURRENT_SLOT
(), 
	`DYNAMIC_MACRO_CURRENT_LENGTH
(
ma¸o_buf„r
, *
ma¸o_poöãr
), 
	`DYNAMIC_MACRO_CURRENT_CAPACITY
(ma¸o_buf„r, 
ma¸o2_íd
));

122 
	}
}

128 
	$dy«mic_ma¸o_ªc‹d_íd
(
keyªc‹d_t
 *
ma¸o_buf„r
, keyªc‹d_à*
ma¸o_poöãr
, 
öt8_t
 
dúe˘i⁄
, keyªc‹d_à**
ma¸o_íd
) {

129 
	`dy«mic_ma¸o_Àd_blök
();

134 
ma¸o_poöãr
 !
ma¸o_buf„r
 && (ma¸o_poöã∏- 
dúe˘i⁄
)->
evít
.
¥es£d
) {

135 
	`d¥öén
("dynamic macro:ÅrimmingáÅrailing key-downÉvent");

136 
ma¸o_poöãr
 -
dúe˘i⁄
;

139 
	`d¥ötf
("dy«mi¯ma¸o: slŸ %d saved,Üígth: %d\n", 
	`DYNAMIC_MACRO_CURRENT_SLOT
(), 
	`DYNAMIC_MACRO_CURRENT_LENGTH
(
ma¸o_buf„r
, 
ma¸o_poöãr
));

141 *
ma¸o_íd
 = 
ma¸o_poöãr
;

142 
	}
}

154 
boﬁ
 
	$¥o˚ss_ªc‹d_dy«mic_ma¸o
(
uöt16_t
 
keycode
, 
keyªc‹d_t
 *
ªc‹d
) {

179 
keyªc‹d_t
 
ma¸o_buf„r
[
DYNAMIC_MACRO_SIZE
];

184 
keyªc‹d_t
 *
ma¸o_íd
 = 
ma¸o_buf„r
;

188 
keyªc‹d_t
 *c⁄° 
r_ma¸o_buf„r
 = 
ma¸o_buf„r
 + 
DYNAMIC_MACRO_SIZE
 - 1;

191 
keyªc‹d_t
 *
r_ma¸o_íd
 = 
r_ma¸o_buf„r
;

195 
keyªc‹d_t
 *
ma¸o_poöãr
 = 
NULL
;

199 
uöt8_t
 
ma¸o_id
 = 0;

201 i‡(
ma¸o_id
 == 0) {

203 i‡(!
ªc‹d
->
evít
.
¥es£d
) {

204 
keycode
) {

205 
DYN_REC_START1
:

206 
	`dy«mic_ma¸o_ªc‹d_°¨t
(&
ma¸o_poöãr
, 
ma¸o_buf„r
);

207 
ma¸o_id
 = 1;

208  
Ál£
;

209 
DYN_REC_START2
:

210 
	`dy«mic_ma¸o_ªc‹d_°¨t
(&
ma¸o_poöãr
, 
r_ma¸o_buf„r
);

211 
ma¸o_id
 = 2;

212  
Ál£
;

213 
DYN_MACRO_PLAY1
:

214 
	`dy«mic_ma¸o_∂ay
(
ma¸o_buf„r
, 
ma¸o_íd
, +1);

215  
Ál£
;

216 
DYN_MACRO_PLAY2
:

217 
	`dy«mic_ma¸o_∂ay
(
r_ma¸o_buf„r
, 
r_ma¸o_íd
, -1);

218  
Ál£
;

223 
keycode
) {

224 
DYN_REC_STOP
:

226 i‡(
ªc‹d
->
evít
.
¥es£d
) {

229 
ma¸o_id
) {

231 
	`dy«mic_ma¸o_ªc‹d_íd
(
ma¸o_buf„r
, 
ma¸o_poöãr
, +1, &
ma¸o_íd
);

234 
	`dy«mic_ma¸o_ªc‹d_íd
(
r_ma¸o_buf„r
, 
ma¸o_poöãr
, -1, &
r_ma¸o_íd
);

237 
ma¸o_id
 = 0;

239  
Ál£
;

240 
DYN_MACRO_PLAY1
:

241 
DYN_MACRO_PLAY2
:

242 
	`d¥öén
("dynamic macro: ignoring macroÖlay key whileÑecording");

243  
Ál£
;

246 
ma¸o_id
) {

248 
	`dy«mic_ma¸o_ªc‹d_key
(
ma¸o_buf„r
, &
ma¸o_poöãr
, 
r_ma¸o_íd
, +1, 
ªc‹d
);

251 
	`dy«mic_ma¸o_ªc‹d_key
(
r_ma¸o_buf„r
, &
ma¸o_poöãr
, 
ma¸o_íd
, -1, 
ªc‹d
);

254  
åue
;

259  
åue
;

260 
	}
}

262 #unde‡
DYNAMIC_MACRO_CURRENT_SLOT


263 #unde‡
DYNAMIC_MACRO_CURRENT_LENGTH


264 #unde‡
DYNAMIC_MACRO_CURRENT_CAPACITY


	@encoder.c

18 
	~"ícodî.h
"

19 #ifde‡
SPLIT_KEYBOARD


20 
	~"•lô_utû.h
"

24 
	~<°rög.h
>

26 #i‚de‡
ENCODER_RESOLUTION


27 
	#ENCODER_RESOLUTION
 4

	)

30 #i‡!
deföed
(
ENCODERS_PAD_A
Ë|| !deföed(
ENCODERS_PAD_B
)

34 
	#NUMBER_OF_ENCODERS
 ((
ícodîs_∑d_a
Ë/ (
pö_t
))

	)

35 
pö_t
 
	gícodîs_∑d_a
[] = 
ENCODERS_PAD_A
;

36 
pö_t
 
	gícodîs_∑d_b
[] = 
ENCODERS_PAD_B
;

38 #i‚de‡
ENCODER_DIRECTION_FLIP


39 
	#ENCODER_CLOCKWISE
 
åue


	)

40 
	#ENCODER_COUNTER_CLOCKWISE
 
Ál£


	)

42 
	#ENCODER_CLOCKWISE
 
Ál£


	)

43 
	#ENCODER_COUNTER_CLOCKWISE
 
åue


	)

45 
öt8_t
 
	gícodî_LUT
[] = {0, -1, 1, 0, 1, 0, 0, -1, -1, 0, 0, 1, 0, 1, -1, 0};

47 
uöt8_t
 
	gícodî_°©e
[
NUMBER_OF_ENCODERS
] = {0};

48 
öt8_t
 
	gícodî_pul£s
[
NUMBER_OF_ENCODERS
] = {0};

50 #ifde‡
SPLIT_KEYBOARD


52 
uöt8_t
 
	gícodî_vÆue
[
NUMBER_OF_ENCODERS
 * 2] = {0};

54 
uöt8_t
 
	gthisH™d
, 
	gth©H™d
;

56 
uöt8_t
 
	gícodî_vÆue
[
NUMBER_OF_ENCODERS
] = {0};

59 
__©åibuã__
((
wók
)Ë
	$ícodî_upd©e_u£r
(
öt8_t
 
ödex
, 
boﬁ
 
˛ockwi£
Ë{
	}
}

61 
__©åibuã__
((
wók
)Ë
	$ícodî_upd©e_kb
(
öt8_t
 
ödex
, 
boﬁ
 
˛ockwi£
Ë{ 
	`ícodî_upd©e_u£r
(ödex, clockwi£); 
	}
}

63 
	$ícodî_öô
() {

64 #i‡
	`deföed
(
SPLIT_KEYBOARD
Ë&& deföed(
ENCODERS_PAD_A_RIGHT
Ë&& deföed(
ENCODERS_PAD_B_RIGHT
)

65 i‡(!
isLe·H™d
) {

66 c⁄° 
pö_t
 
ícodîs_∑d_a_right
[] = 
ENCODERS_PAD_A_RIGHT
;

67 c⁄° 
pö_t
 
ícodîs_∑d_b_right
[] = 
ENCODERS_PAD_B_RIGHT
;

68 
uöt8_t
 
i
 = 0; i < 
NUMBER_OF_ENCODERS
; i++) {

69 
ícodîs_∑d_a
[
i
] = 
ícodîs_∑d_a_right
[i];

70 
ícodîs_∑d_b
[
i
] = 
ícodîs_∑d_b_right
[i];

75 
i
 = 0; i < 
NUMBER_OF_ENCODERS
; i++) {

76 
	`£tPöI≈utHigh
(
ícodîs_∑d_a
[
i
]);

77 
	`£tPöI≈utHigh
(
ícodîs_∑d_b
[
i
]);

79 
ícodî_°©e
[
i
] = (
	`ªadPö
(
ícodîs_∑d_a
[i]Ë<< 0Ë| (ªadPö(
ícodîs_∑d_b
[i]) << 1);

82 #ifde‡
SPLIT_KEYBOARD


83 
thisH™d
 = 
isLe·H™d
 ? 0 : 
NUMBER_OF_ENCODERS
;

84 
th©H™d
 = 
NUMBER_OF_ENCODERS
 - 
thisH™d
;

86 
	}
}

88 
	$ícodî_upd©e
(
öt8_t
 
ödex
, 
uöt8_t
 
°©e
) {

89 
uöt8_t
 
i
 = 
ödex
;

90 #ifde‡
SPLIT_KEYBOARD


91 
ödex
 +
thisH™d
;

93 
ícodî_pul£s
[
i
] +
ícodî_LUT
[
°©e
 & 0xF];

94 i‡(
ícodî_pul£s
[
i
] >
ENCODER_RESOLUTION
) {

95 
ícodî_vÆue
[
ödex
]++;

96 
	`ícodî_upd©e_kb
(
ödex
, 
ENCODER_COUNTER_CLOCKWISE
);

98 i‡(
ícodî_pul£s
[
i
] <-
ENCODER_RESOLUTION
) {

99 
ícodî_vÆue
[
ödex
]--;

100 
	`ícodî_upd©e_kb
(
ödex
, 
ENCODER_CLOCKWISE
);

102 
ícodî_pul£s
[
i
] %
ENCODER_RESOLUTION
;

103 
	}
}

105 
	$ícodî_ªad
() {

106 
uöt8_t
 
i
 = 0; i < 
NUMBER_OF_ENCODERS
; i++) {

107 
ícodî_°©e
[
i
] <<= 2;

108 
ícodî_°©e
[
i
] |(
	`ªadPö
(
ícodîs_∑d_a
[i]Ë<< 0Ë| (ªadPö(
ícodîs_∑d_b
[i]) << 1);

109 
	`ícodî_upd©e
(
i
, 
ícodî_°©e
[i]);

111 
	}
}

113 #ifde‡
SPLIT_KEYBOARD


114 
	$ícodî_°©e_øw
(
uöt8_t
* 
¶ave_°©e
Ë{ 
	`mem˝y
(¶ave_°©e, &
ícodî_vÆue
[
thisH™d
], (uöt8_tË* 
NUMBER_OF_ENCODERS
); 
	}
}

116 
	$ícodî_upd©e_øw
(
uöt8_t
* 
¶ave_°©e
) {

117 
uöt8_t
 
i
 = 0; i < 
NUMBER_OF_ENCODERS
; i++) {

118 
uöt8_t
 
ödex
 = 
i
 + 
th©H™d
;

119 
öt8_t
 
dñè
 = 
¶ave_°©e
[
i
] - 
ícodî_vÆue
[
ödex
];

120 
dñè
 > 0) {

121 
dñè
--;

122 
ícodî_vÆue
[
ödex
]++;

123 
	`ícodî_upd©e_kb
(
ödex
, 
ENCODER_COUNTER_CLOCKWISE
);

125 
dñè
 < 0) {

126 
dñè
++;

127 
ícodî_vÆue
[
ödex
]--;

128 
	`ícodî_upd©e_kb
(
ödex
, 
ENCODER_CLOCKWISE
);

131 
	}
}

	@encoder.h

18 #¥agm®
⁄˚


20 
	~"qu™tum.h
"

22 
ícodî_öô
();

23 
ícodî_ªad
();

25 
ícodî_upd©e_kb
(
öt8_t
 
ödex
, 
boﬁ
 
˛ockwi£
);

26 
ícodî_upd©e_u£r
(
öt8_t
 
ödex
, 
boﬁ
 
˛ockwi£
);

28 #ifde‡
SPLIT_KEYBOARD


29 
ícodî_°©e_øw
(
uöt8_t
* 
¶ave_°©e
);

30 
ícodî_upd©e_øw
(
uöt8_t
* 
¶ave_°©e
);

	@fauxclicky.c

16 
	~<avr/öãºu±.h
>

17 
	~<avr/io.h
>

18 
	~<timî.h
>

19 
	~<Áux˛icky.h
>

20 
	~<°dboﬁ.h
>

21 
	~<musiˇl_nŸes.h
>

23 
boﬁ
 
	gÁux˛icky_íabÀd
 = 
åue
;

24 
uöt16_t
 
	gnŸe_°¨t
 = 0;

25 
boﬁ
 
	gnŸe_∂ayög
 = 
Ál£
;

26 
uöt16_t
 
	gnŸe_≥riod
 = 0;

28 
	$Áux˛icky_öô
() {

30 
DDRC
 |
	`_BV
(
PORTC6
);

33 
TCCR3A
 = (0 << 
COM3A1
Ë| (0 << 
COM3A0
Ë| (1 << 
WGM31
Ë| (0 << 
WGM30
);

34 
TCCR3B
 = (1 << 
WGM33
Ë| (1 << 
WGM32
Ë| (0 << 
CS32
Ë| (1 << 
CS31
Ë| (0 << 
CS30
);

35 
	}
}

37 
	$Áux˛icky_°›
() {

38 
FAUXCLICKY_DISABLE_OUTPUT
;

39 
nŸe_∂ayög
 = 
Ál£
;

40 
	}
}

42 
	$Áux˛icky_∂ay
(
nŸe
[]) {

43 i‡(!
Áux˛icky_íabÀd
) ;

44 i‡(
nŸe_∂ayög
Ë
	`Áux˛icky_°›
();

45 
FAUXCLICKY_TIMER_PERIOD
 = (
uöt16_t
)((()
F_CPU
Ë/ (
nŸe
[0] * ()
FAUXCLICKY_CPU_PRESCALER
));

46 
FAUXCLICKY_DUTY_CYCLE
 = (
uöt16_t
)(((()
F_CPU
Ë/ (
nŸe
[0] * ()
FAUXCLICKY_CPU_PRESCALER
)) / ()2);

47 
nŸe_∂ayög
 = 
åue
;

48 
nŸe_≥riod
 = (
nŸe
[1] / ()16Ë* (()60 / ()
FAUXCLICKY_TEMPO
) * 1000;

49 
nŸe_°¨t
 = 
	`timî_ªad
();

50 
FAUXCLICKY_ENABLE_OUTPUT
;

51 
	}
}

53 
	$Áux˛icky_check
() {

54 i‡(!
nŸe_∂ayög
) ;

56 i‡(
	`timî_ñ≠£d
(
nŸe_°¨t
Ë> 
nŸe_≥riod
) {

57 
	`Áux˛icky_°›
();

59 
	}
}

	@fauxclicky.h

16 #ifde‡
AUDIO_ENABLE


20 
	~"musiˇl_nŸes.h
"

21 
	~"°dboﬁ.h
"

23 
__©åibuã__
((
wók
)Ë
	gÁux˛icky_¥es£d_nŸe
[2] = 
MUSICAL_NOTE
(
_D4
, 0.25);

24 
__©åibuã__
((
wók
)Ë
	gÁux˛icky_ªÀa£d_nŸe
[2] = 
MUSICAL_NOTE
(
_C4
, 0.125);

25 
__©åibuã__
((
wók
)Ë
	gÁux˛icky_bìp_nŸe
[2] = 
MUSICAL_NOTE
(
_C4
, 0.25);

27 
boﬁ
 
	gÁux˛icky_íabÀd
;

33 #i‚de‡
FAUXCLICKY_TEMPO


34 
	#FAUXCLICKY_TEMPO
 
TEMPO_DEFAULT


	)

38 
	#FAUXCLICKY_ACTION_PRESS
 
	`Áux˛icky_∂ay
(
Áux˛icky_¥es£d_nŸe
)

	)

41 
	#FAUXCLICKY_ACTION_RELEASE
 
	`Áux˛icky_∂ay
(
Áux˛icky_ªÀa£d_nŸe
)

	)

44 
	#FAUXCLICKY_BEEP
 
	`Áux˛icky_∂ay
(
Áux˛icky_bìp_nŸe
)

	)

47 
	#FAUXCLICKY_ON
 
Áux˛icky_íabÀd
 = 
åue


	)

50 
	#FAUXCLICKY_OFF
 \

52 
Áux˛icky_íabÀd
 = 
Ál£
; \

53 
	`Áux˛icky_°›
(); \

54 } 0)

	)

57 
	#FAUXCLICKY_TOGGLE
 \

59 i‡(
Áux˛icky_íabÀd
) { \

60 
FAUXCLICKY_OFF
; \

62 
FAUXCLICKY_ON
; \

64 } 0)

	)

70 #i‚de‡
FAUXCLICKY_CPU_PRESCALER


71 
	#FAUXCLICKY_CPU_PRESCALER
 8

	)

74 #i‚de‡
FAUXCLICKY_ENABLE_OUTPUT


75 
	#FAUXCLICKY_ENABLE_OUTPUT
 
TCCR3A
 |
	`_BV
(
COM3A1
)

	)

78 #i‚de‡
FAUXCLICKY_DISABLE_OUTPUT


79 
	#FAUXCLICKY_DISABLE_OUTPUT
 
TCCR3A
 &~(
	`_BV
(
COM3A1
Ë| _BV(
COM3A0
))

	)

82 #i‚de‡
FAUXCLICKY_TIMER_PERIOD


83 
	#FAUXCLICKY_TIMER_PERIOD
 
ICR3


	)

86 #i‚de‡
FAUXCLICKY_DUTY_CYCLE


87 
	#FAUXCLICKY_DUTY_CYCLE
 
OCR3A


	)

94 
Áux˛icky_öô
();

95 
Áux˛icky_°›
();

96 
Áux˛icky_∂ay
(
nŸe
[2]);

97 
Áux˛icky_check
();

	@joystick.c

1 
	~"joy°ick.h
"

3 
joy°ick_t
 
	gjoy°ick_°©us
 = {.
buâ⁄s
 = {0},

4 .
	gaxes
 =

6 #i‡
JOYSTICK_AXES_COUNT
 > 0

10 .
	g°©us
 = 0};

13 
__©åibuã__
((
wók
)Ë
joy°ick_c⁄fig_t
 
	gjoy°ick_axes
[
JOYSTICK_AXES_COUNT
] = {};

	@joystick.h

1 #¥agm®
⁄˚


3 #i‚de‡
JOYSTICK_BUTTON_COUNT


4 
	#JOYSTICK_BUTTON_COUNT
 8

	)

7 #i‚de‡
JOYSTICK_AXES_COUNT


8 
	#JOYSTICK_AXES_COUNT
 4

	)

11 
	~"qu™tum.h
"

13 
	~<°döt.h
>

18 
	#JS_VIRTUAL_AXIS
 0xFF

	)

20 
	#JOYSTICK_AXIS_VIRTUAL
 \

21 { 
JS_VIRTUAL_AXIS
, JS_VIRTUAL_AXIS, JS_VIRTUAL_AXIS, 0, 1023 }

	)

22 
	#JOYSTICK_AXIS_IN
(
INPUT_PIN
, 
LOW
, 
REST
, 
HIGH
) \

23 { 
JS_VIRTUAL_AXIS
, 
INPUT_PIN
, JS_VIRTUAL_AXIS, 
LOW
, 
REST
, 
HIGH
 }

	)

24 
	#JOYSTICK_AXIS_IN_OUT
(
INPUT_PIN
, 
OUTPUT_PIN
, 
LOW
, 
REST
, 
HIGH
) \

25 { 
OUTPUT_PIN
, 
INPUT_PIN
, 
JS_VIRTUAL_AXIS
, 
LOW
, 
REST
, 
HIGH
 }

	)

26 
	#JOYSTICK_AXIS_IN_OUT_GROUND
(
INPUT_PIN
, 
OUTPUT_PIN
, 
GROUND_PIN
, 
LOW
, 
REST
, 
HIGH
) \

27 { 
OUTPUT_PIN
, 
INPUT_PIN
, 
GROUND_PIN
, 
LOW
, 
REST
, 
HIGH
 }

	)

30 
pö_t
 
	mouçut_pö
;

31 
pö_t
 
	möput_pö
;

32 
pö_t
 
	mground_pö
;

35 
uöt16_t
 
	mmö_digô
;

36 
uöt16_t
 
	mmid_digô
;

37 
uöt16_t
 
	mmax_digô
;

38 } 
	tjoy°ick_c⁄fig_t
;

40 
joy°ick_c⁄fig_t
 
joy°ick_axes
[
JOYSTICK_AXES_COUNT
];

42 
	ejoy°ick_°©us
 { 
	mJS_INITIALIZED
 = 1, 
	mJS_UPDATED
 = 2 };

45 
uöt8_t
 
	mbuâ⁄s
[
JOYSTICK_BUTTON_COUNT
 / 8 + 1];

47 
öt16_t
 
	maxes
[
JOYSTICK_AXES_COUNT
];

48 
uöt8_t
 
	m°©us
 : 2;

49 } 
	tjoy°ick_t
;

51 
joy°ick_t
 
joy°ick_°©us
;

54 
£nd_joy°ick_∑ckë
(
joy°ick_t
 *
joy°ick
);

	@keycode_config.c

17 
	~"keycode_c⁄fig.h
"

19 
keym≠_c⁄fig_t
 
keym≠_c⁄fig
;

26 
uöt16_t
 
	$keycode_c⁄fig
(
uöt16_t
 
keycode
) {

27 
keycode
) {

28 
KC_CAPSLOCK
:

29 
KC_LOCKING_CAPS
:

30 i‡(
keym≠_c⁄fig
.
sw≠_c⁄åﬁ_ˇp¶ock
 || keym≠_c⁄fig.
ˇp¶ock_to_c⁄åﬁ
) {

31  
KC_LCTL
;

33  
keycode
;

34 
KC_LCTL
:

35 i‡(
keym≠_c⁄fig
.
sw≠_c⁄åﬁ_ˇp¶ock
) {

36  
KC_CAPSLOCK
;

38 i‡(
keym≠_c⁄fig
.
sw≠_l˘l_lgui
) {

39 i‡(
keym≠_c⁄fig
.
no_gui
) {

40  
KC_NO
;

42  
KC_LGUI
;

44  
KC_LCTL
;

45 
KC_LALT
:

46 i‡(
keym≠_c⁄fig
.
sw≠_œ…_lgui
) {

47 i‡(
keym≠_c⁄fig
.
no_gui
) {

48  
KC_NO
;

50  
KC_LGUI
;

52  
KC_LALT
;

53 
KC_LGUI
:

54 i‡(
keym≠_c⁄fig
.
sw≠_œ…_lgui
) {

55  
KC_LALT
;

57 i‡(
keym≠_c⁄fig
.
sw≠_l˘l_lgui
) {

58  
KC_LCTRL
;

60 i‡(
keym≠_c⁄fig
.
no_gui
) {

61  
KC_NO
;

63  
KC_LGUI
;

64 
KC_RCTL
:

65 i‡(
keym≠_c⁄fig
.
sw≠_r˘l_rgui
) {

66 i‡(
keym≠_c⁄fig
.
no_gui
) {

67  
KC_NO
;

69  
KC_RGUI
;

71  
KC_RCTL
;

72 
KC_RALT
:

73 i‡(
keym≠_c⁄fig
.
sw≠_ø…_rgui
) {

74 i‡(
keym≠_c⁄fig
.
no_gui
) {

75  
KC_NO
;

77  
KC_RGUI
;

79  
KC_RALT
;

80 
KC_RGUI
:

81 i‡(
keym≠_c⁄fig
.
sw≠_ø…_rgui
) {

82  
KC_RALT
;

84 i‡(
keym≠_c⁄fig
.
sw≠_r˘l_rgui
) {

85  
KC_RCTL
;

87 i‡(
keym≠_c⁄fig
.
no_gui
) {

88  
KC_NO
;

90  
KC_RGUI
;

91 
KC_GRAVE
:

92 i‡(
keym≠_c⁄fig
.
sw≠_gøve_esc
) {

93  
KC_ESC
;

95  
KC_GRAVE
;

96 
KC_ESC
:

97 i‡(
keym≠_c⁄fig
.
sw≠_gøve_esc
) {

98  
KC_GRAVE
;

100  
KC_ESC
;

101 
KC_BSLASH
:

102 i‡(
keym≠_c⁄fig
.
sw≠_back¶ash_back•a˚
) {

103  
KC_BSPACE
;

105  
KC_BSLASH
;

106 
KC_BSPACE
:

107 i‡(
keym≠_c⁄fig
.
sw≠_back¶ash_back•a˚
) {

108  
KC_BSLASH
;

110  
KC_BSPACE
;

112  
keycode
;

114 
	}
}

122 
uöt8_t
 
	$mod_c⁄fig
(
uöt8_t
 
mod
) {

123 i‡(
keym≠_c⁄fig
.
sw≠_œ…_lgui
) {

124 i‡((
mod
 & 
MOD_RGUI
Ë=
MOD_LGUI
) {

125 
mod
 &~
MOD_LGUI
;

126 
mod
 |
MOD_LALT
;

127 } i‡((
mod
 & 
MOD_RALT
Ë=
MOD_LALT
) {

128 
mod
 &~
MOD_LALT
;

129 
mod
 |
MOD_LGUI
;

132 i‡(
keym≠_c⁄fig
.
sw≠_ø…_rgui
) {

133 i‡((
mod
 & 
MOD_RGUI
) == MOD_RGUI) {

134 
mod
 &~
MOD_RGUI
;

135 
mod
 |
MOD_RALT
;

136 } i‡((
mod
 & 
MOD_RALT
) == MOD_RALT) {

137 
mod
 &~
MOD_RALT
;

138 
mod
 |
MOD_RGUI
;

141 i‡(
keym≠_c⁄fig
.
sw≠_l˘l_lgui
) {

142 i‡((
mod
 & 
MOD_RGUI
Ë=
MOD_LGUI
) {

143 
mod
 &~
MOD_LGUI
;

144 
mod
 |
MOD_LCTL
;

145 } i‡((
mod
 & 
MOD_RCTL
Ë=
MOD_LCTL
) {

146 
mod
 &~
MOD_LCTL
;

147 
mod
 |
MOD_LGUI
;

150 i‡(
keym≠_c⁄fig
.
sw≠_r˘l_rgui
) {

151 i‡((
mod
 & 
MOD_RGUI
) == MOD_RGUI) {

152 
mod
 &~
MOD_RGUI
;

153 
mod
 |
MOD_RCTL
;

154 } i‡((
mod
 & 
MOD_RCTL
) == MOD_RCTL) {

155 
mod
 &~
MOD_RCTL
;

156 
mod
 |
MOD_RGUI
;

159 i‡(
keym≠_c⁄fig
.
no_gui
) {

160 
mod
 &~
MOD_LGUI
;

161 
mod
 &~
MOD_RGUI
;

164  
mod
;

165 
	}
}

	@keycode_config.h

17 
	~"ìc⁄fig.h
"

18 
	~"keycode.h
"

19 
	~"a˘i⁄_code.h
"

21 #i‚de‡
KEYCODE_CONFIG_H


22 
	#KEYCODE_CONFIG_H


	)

24 
uöt16_t
 
keycode_c⁄fig
(uöt16_à
keycode
);

25 
uöt8_t
 
mod_c⁄fig
(uöt8_à
mod
);

29 
uöt16_t
 
	møw
;

31 
boﬁ
 
	msw≠_c⁄åﬁ_ˇp¶ock
 : 1;

32 
boﬁ
 
	mˇp¶ock_to_c⁄åﬁ
 : 1;

33 
boﬁ
 
	msw≠_œ…_lgui
 : 1;

34 
boﬁ
 
	msw≠_ø…_rgui
 : 1;

35 
boﬁ
 
	mno_gui
 : 1;

36 
boﬁ
 
	msw≠_gøve_esc
 : 1;

37 
boﬁ
 
	msw≠_back¶ash_back•a˚
 : 1;

38 
boﬁ
 
	mnkro
 : 1;

39 
boﬁ
 
	msw≠_l˘l_lgui
 : 1;

40 
boﬁ
 
	msw≠_r˘l_rgui
 : 1;

42 } 
	tkeym≠_c⁄fig_t
;

44 
keym≠_c⁄fig_t
 
keym≠_c⁄fig
;

	@keymap.h

18 #i‚de‡
KEYMAP_H


19 
	#KEYMAP_H


	)

21 
	~<°döt.h
>

22 
	~<°dboﬁ.h
>

23 
	~"a˘i⁄.h
"

24 #i‡
deföed
(
__AVR__
)

25 
	~<avr/pgm•a˚.h
>

26 #ñi‡
deföed
 
PROTOCOL_CHIBIOS


28 
	~"ch.h
"

30 
	~"keycode.h
"

31 
	~"a˘i⁄_ma¸o.h
"

32 
	~"ªp‹t.h
"

33 
	~"ho°.h
"

35 
	~"debug.h
"

36 
	~"keycode_c⁄fig.h
"

40 #i‡
deföed
(
PROTOCOL_CHIBIOS
)

41 
	#RESET
 
QK_RESET


	)

44 #i‡
deföed
(
__AVR_AT90USB647__
Ë|| deföed(
__AVR_AT90USB1287__
)

45 #unde‡
RESET


48 
	~"qu™tum_keycodes.h
"

51 
uöt16_t
 
keym≠_key_to_keycode
(
uöt8_t
 
œyî
, 
keypos_t
 
key
);

54 
uöt16_t
 
keym≠_fun˘i⁄_id_to_a˘i⁄
(uöt16_à
fun˘i⁄_id
);

56 c⁄° 
uöt16_t
 
keym≠s
[][
MATRIX_ROWS
][
MATRIX_COLS
];

57 c⁄° 
uöt16_t
 
‚_a˘i⁄s
[];

	@keymap_common.c

18 
	~"keym≠.h
"

19 
	~"ªp‹t.h
"

20 
	~"keycode.h
"

21 
	~"a˘i⁄_œyî.h
"

22 #i‡
deföed
(
__AVR__
)

23 
	~<utû/dñay.h
>

24 
	~<°dio.h
>

26 
	~"a˘i⁄.h
"

27 
	~"a˘i⁄_ma¸o.h
"

28 
	~"debug.h
"

29 
	~"qu™tum.h
"

31 #ifde‡
BACKLIGHT_ENABLE


32 
	~"backlight.h
"

35 #ifde‡
MIDI_ENABLE


36 
	~"¥o˚ss_midi.h
"

39 
keym≠_c⁄fig_t
 
keym≠_c⁄fig
;

41 
	~<öây≥s.h
>

44 
a˘i⁄_t
 
	$a˘i⁄_f‹_key
(
uöt8_t
 
œyî
, 
keypos_t
 
key
) {

46 
uöt16_t
 
keycode
 = 
	`keym≠_key_to_keycode
(
œyî
, 
key
);

49 
keycode
 = 
	`keycode_c⁄fig
(keycode);

51 
a˘i⁄_t
 
a˘i⁄
 = {};

52 
uöt8_t
 
a˘i⁄_œyî
, 
whí
, 
mod
;

54 ()
a˘i⁄_œyî
;

55 ()
whí
;

56 ()
mod
;

58 
keycode
) {

59 
KC_A
 ... 
KC_EXSEL
:

60 
KC_LCTRL
 ... 
KC_RGUI
:

61 
a˘i⁄
.
code
 = 
	`ACTION_KEY
(
keycode
);

63 #ifde‡
EXTRAKEY_ENABLE


64 
KC_SYSTEM_POWER
 ... 
KC_SYSTEM_WAKE
:

65 
a˘i⁄
.
code
 = 
	`ACTION_USAGE_SYSTEM
(
	`KEYCODE2SYSTEM
(
keycode
));

67 
KC_AUDIO_MUTE
 ... 
KC_BRIGHTNESS_DOWN
:

68 
a˘i⁄
.
code
 = 
	`ACTION_USAGE_CONSUMER
(
	`KEYCODE2CONSUMER
(
keycode
));

71 #ifde‡
MOUSEKEY_ENABLE


72 
KC_MS_UP
 ... 
KC_MS_ACCEL2
:

73 
a˘i⁄
.
code
 = 
	`ACTION_MOUSEKEY
(
keycode
);

76 
KC_TRNS
:

77 
a˘i⁄
.
code
 = 
ACTION_TRANSPARENT
;

79 
QK_MODS
 ... 
QK_MODS_MAX
:;

82 
a˘i⁄
.
code
 = 
	`ACTION_MODS_KEY
(
keycode
 >> 8, keycode & 0xFF);

84 #i‚de‡
NO_ACTION_FUNCTION


85 
KC_FN0
 ... 
KC_FN31
:

86 
a˘i⁄
.
code
 = 
	`keym≠_fun˘i⁄_id_to_a˘i⁄
(
	`FN_INDEX
(
keycode
));

88 
QK_FUNCTION
 ... 
QK_FUNCTION_MAX
:;

91 
a˘i⁄
.
code
 = 
	`keym≠_fun˘i⁄_id_to_a˘i⁄
(()
keycode
 & 0xFFF);

94 #i‚de‡
NO_ACTION_MACRO


95 
QK_MACRO
 ... 
QK_MACRO_MAX
:

96 i‡(
keycode
 & 0x800)

97 
a˘i⁄
.
code
 = 
	`ACTION_MACRO_TAP
(
keycode
 & 0xFF);

99 
a˘i⁄
.
code
 = 
	`ACTION_MACRO
(
keycode
 & 0xFF);

102 #i‚de‡
NO_ACTION_LAYER


103 
QK_LAYER_TAP
 ... 
QK_LAYER_TAP_MAX
:

104 
a˘i⁄
.
code
 = 
	`ACTION_LAYER_TAP_KEY
((
keycode
 >> 0x8) & 0xF, keycode & 0xFF);

106 
QK_TO
 ... 
QK_TO_MAX
:;

108 
whí
 = (
keycode
 >> 0x4) & 0x3;

109 
a˘i⁄_œyî
 = 
keycode
 & 0xF;

110 
a˘i⁄
.
code
 = 
	`ACTION_LAYER_SET
(
a˘i⁄_œyî
, 
whí
);

112 
QK_MOMENTARY
 ... 
QK_MOMENTARY_MAX
:;

114 
a˘i⁄_œyî
 = 
keycode
 & 0xFF;

115 
a˘i⁄
.
code
 = 
	`ACTION_LAYER_MOMENTARY
(
a˘i⁄_œyî
);

117 
QK_DEF_LAYER
 ... 
QK_DEF_LAYER_MAX
:;

119 
a˘i⁄_œyî
 = 
keycode
 & 0xFF;

120 
a˘i⁄
.
code
 = 
	`ACTION_DEFAULT_LAYER_SET
(
a˘i⁄_œyî
);

122 
QK_TOGGLE_LAYER
 ... 
QK_TOGGLE_LAYER_MAX
:;

124 
a˘i⁄_œyî
 = 
keycode
 & 0xFF;

125 
a˘i⁄
.
code
 = 
	`ACTION_LAYER_TOGGLE
(
a˘i⁄_œyî
);

128 #i‚de‡
NO_ACTION_ONESHOT


129 
QK_ONE_SHOT_LAYER
 ... 
QK_ONE_SHOT_LAYER_MAX
:;

131 
a˘i⁄_œyî
 = 
keycode
 & 0xFF;

132 
a˘i⁄
.
code
 = 
	`ACTION_LAYER_ONESHOT
(
a˘i⁄_œyî
);

134 
QK_ONE_SHOT_MOD
 ... 
QK_ONE_SHOT_MOD_MAX
:;

136 
mod
 = 
	`mod_c⁄fig
(
keycode
 & 0xFF);

137 
a˘i⁄
.
code
 = 
	`ACTION_MODS_ONESHOT
(
mod
);

140 #i‚de‡
NO_ACTION_LAYER


141 
QK_LAYER_TAP_TOGGLE
 ... 
QK_LAYER_TAP_TOGGLE_MAX
:

142 
a˘i⁄
.
code
 = 
	`ACTION_LAYER_TAP_TOGGLE
(
keycode
 & 0xFF);

144 
QK_LAYER_MOD
 ... 
QK_LAYER_MOD_MAX
:

145 
mod
 = 
	`mod_c⁄fig
(
keycode
 & 0xF);

146 
a˘i⁄_œyî
 = (
keycode
 >> 4) & 0xF;

147 
a˘i⁄
.
code
 = 
	`ACTION_LAYER_MODS
(
a˘i⁄_œyî
, 
mod
);

150 #i‚de‡
NO_ACTION_TAPPING


151 
QK_MOD_TAP
 ... 
QK_MOD_TAP_MAX
:

152 
mod
 = 
	`mod_c⁄fig
((
keycode
 >> 0x8) & 0x1F);

153 
a˘i⁄
.
code
 = 
	`ACTION_MODS_TAP_KEY
(
mod
, 
keycode
 & 0xFF);

156 #ifde‡
SWAP_HANDS_ENABLE


157 
QK_SWAP_HANDS
 ... 
QK_SWAP_HANDS_MAX
:

158 
a˘i⁄
.
code
 = 
	`ACTION
(
ACT_SWAP_HANDS
, 
keycode
 & 0xff);

163 
a˘i⁄
.
code
 = 
ACTION_NO
;

166  
a˘i⁄
;

167 
	}
}

169 
__©åibuã__
((
wók
)Ëc⁄° 
uöt16_t
 
PROGMEM
 
	g‚_a˘i⁄s
[] = {

174 
__©åibuã__
((
wók
)Ëc⁄° 
ma¸o_t
 *
	$a˘i⁄_gë_ma¸o
(
keyªc‹d_t
 *
ªc‹d
, 
uöt8_t
 
id
, uöt8_à
›t
Ë{  
MACRO_NONE
; 
	}
}

177 
__©åibuã__
((
wók
)Ë
	$a˘i⁄_fun˘i⁄
(
keyªc‹d_t
 *
ªc‹d
, 
uöt8_t
 
id
, uöt8_à
›t
Ë{
	}
}

180 
__©åibuã__
((
wók
)Ë
uöt16_t
 
	$keym≠_key_to_keycode
(
uöt8_t
 
œyî
, 
keypos_t
 
key
) {

182  
	`pgm_ªad_w‹d
(&
keym≠s
[(
œyî
)][(
key
.
row
)][(key.
cﬁ
)]);

183 
	}
}

186 
__©åibuã__
((
wók
)Ë
uöt16_t
 
	$keym≠_fun˘i⁄_id_to_a˘i⁄
(
uöt16_t
 
fun˘i⁄_id
) {

191 #¥agm®
GCC
 
dügno°ic
 
push


192 #¥agm®
GCC
 
dügno°ic
 
ign‹ed
 "-Warray-bounds"

193  
	`pgm_ªad_w‹d
(&
‚_a˘i⁄s
[
fun˘i⁄_id
]);

194 #¥agm®
GCC
 
dügno°ic
 
p›


195 
	}
}

	@led_matrix.c

20 
	~<°döt.h
>

21 
	~<°dboﬁ.h
>

22 
	~"qu™tum.h
"

23 
	~"Àdm©rix.h
"

24 
	~"¥ogmem.h
"

25 
	~"c⁄fig.h
"

26 
	~"ì¥om.h
"

27 
	~<°rög.h
>

28 
	~<m©h.h
>

30 
Àd_c⁄fig_t
 
	gÀd_m©rix_c⁄fig
;

32 #i‚de‡
MAX


33 
	#MAX
(
X
, 
Y
Ë((XË> (YË? (XË: (Y))

	)

36 #i‚de‡
MIN


37 
	#MIN
(
a
, 
b
Ë(◊Ë< (bË? (aË: (b))

	)

40 #i‚de‡
LED_DISABLE_AFTER_TIMEOUT


41 
	#LED_DISABLE_AFTER_TIMEOUT
 0

	)

44 #i‚de‡
LED_DISABLE_WHEN_USB_SUSPENDED


45 
	#LED_DISABLE_WHEN_USB_SUSPENDED
 
Ál£


	)

48 #i‚de‡
EECONFIG_LED_MATRIX


49 
	#EECONFIG_LED_MATRIX
 
EECONFIG_RGBLIGHT


	)

52 #i‡!
deföed
(
LED_MATRIX_MAXIMUM_BRIGHTNESS
) || LED_MATRIX_MAXIMUM_BRIGHTNESS > 255

53 
	#LED_MATRIX_MAXIMUM_BRIGHTNESS
 255

	)

56 
boﬁ
 
	gg_su•íd_°©e
 = 
Ál£
;

59 
uöt32_t
 
	gg_tick
 = 0;

62 
uöt8_t
 
	gg_key_hô
[
LED_DRIVER_LED_COUNT
];

65 
uöt32_t
 
	gg_™y_key_hô
 = 0;

67 
uöt32_t
 
	$ìc⁄fig_ªad_Àd_m©rix
(Ë{  
	`ì¥om_ªad_dw‹d
(
EECONFIG_LED_MATRIX
); 
	}
}

69 
	$ìc⁄fig_upd©e_Àd_m©rix
(
uöt32_t
 
c⁄fig_vÆue
Ë{ 
	`ì¥om_upd©e_dw‹d
(
EECONFIG_LED_MATRIX
, c⁄fig_vÆue); 
	}
}

71 
	$ìc⁄fig_upd©e_Àd_m©rix_deÁu…
() {

72 
	`d¥ötf
("eeconfig_update_led_matrix_default\n");

73 
Àd_m©rix_c⁄fig
.
íabÀ
 = 1;

74 
Àd_m©rix_c⁄fig
.
mode
 = 
LED_MATRIX_UNIFORM_BRIGHTNESS
;

75 
Àd_m©rix_c⁄fig
.
vÆ
 = 128;

76 
Àd_m©rix_c⁄fig
.
•ìd
 = 0;

77 
	`ìc⁄fig_upd©e_Àd_m©rix
(
Àd_m©rix_c⁄fig
.
øw
);

78 
	}
}

80 
	$ìc⁄fig_debug_Àd_m©rix
() {

81 
	`d¥ötf
("led_matrix_configÉeprom\n");

82 
	`d¥ötf
("Àd_m©rix_c⁄fig.íabÀ = %d\n", 
Àd_m©rix_c⁄fig
.
íabÀ
);

83 
	`d¥ötf
("Àd_m©rix_c⁄fig.modê%d\n", 
Àd_m©rix_c⁄fig
.
mode
);

84 
	`d¥ötf
("Àd_m©rix_c⁄fig.vÆ = %d\n", 
Àd_m©rix_c⁄fig
.
vÆ
);

85 
	`d¥ötf
("Àd_m©rix_c⁄fig.•ìd = %d\n", 
Àd_m©rix_c⁄fig
.
•ìd
);

86 
	}
}

89 #i‚de‡
LED_HITS_TO_REMEMBER


90 
	#LED_HITS_TO_REMEMBER
 8

	)

92 
uöt8_t
 
	gg_œ°_Àd_hô
[
LED_HITS_TO_REMEMBER
] = {255};

93 
uöt8_t
 
	gg_œ°_Àd_cou¡
 = 0;

95 
	$m≠_row_cﬁumn_to_Àd
(
uöt8_t
 
row
, uöt8_à
cﬁumn
, uöt8_à*
Àd_i
, uöt8_à*
Àd_cou¡
) {

96 
Àd_m©rix
 
Àd
;

97 *
Àd_cou¡
 = 0;

99 
uöt8_t
 
i
 = 0; i < 
LED_DRIVER_LED_COUNT
; i++) {

101 
Àd
 = 
g_Àds
[
i
];

102 i‡(
row
 =
Àd
.
m©rix_co
.row && 
cﬁumn
 =Àd.m©rix_co.
cﬁ
) {

103 
Àd_i
[*
Àd_cou¡
] = 
i
;

104 (*
Àd_cou¡
)++;

107 
	}
}

109 
	$Àd_m©rix_upd©e_pwm_buf„rs
(Ë{ 
Àd_m©rix_drivî
.
	`Êush
(); 
	}
}

111 
	$Àd_m©rix_£t_ödex_vÆue
(
ödex
, 
uöt8_t
 
vÆue
Ë{ 
Àd_m©rix_drivî
.
	`£t_vÆue
(ödex, vÆue); 
	}
}

113 
	$Àd_m©rix_£t_ödex_vÆue_Æl
(
uöt8_t
 
vÆue
Ë{ 
Àd_m©rix_drivî
.
	`£t_vÆue_Æl
(vÆue); 
	}
}

115 
boﬁ
 
	$¥o˚ss_Àd_m©rix
(
uöt16_t
 
keycode
, 
keyªc‹d_t
 *
ªc‹d
) {

116 i‡(
ªc‹d
->
evít
.
¥es£d
) {

117 
uöt8_t
 
Àd
[8], 
Àd_cou¡
;

118 
	`m≠_row_cﬁumn_to_Àd
(
ªc‹d
->
evít
.
key
.
row
,Ñec‹d->evít.key.
cﬁ
, 
Àd
, &
Àd_cou¡
);

119 i‡(
Àd_cou¡
 > 0) {

120 
uöt8_t
 
i
 = 
LED_HITS_TO_REMEMBER
; i > 1; i--) {

121 
g_œ°_Àd_hô
[
i
 - 1] = g_last_led_hit[i - 2];

123 
g_œ°_Àd_hô
[0] = 
Àd
[0];

124 
g_œ°_Àd_cou¡
 = 
	`MIN
(
LED_HITS_TO_REMEMBER
, g_last_led_count + 1);

126 
uöt8_t
 
i
 = 0; i < 
Àd_cou¡
; i++Ë
g_key_hô
[
Àd
[i]] = 0;

127 
g_™y_key_hô
 = 0;

129 #ifde‡
LED_MATRIX_KEYRELEASES


130 
uöt8_t
 
Àd
[8], 
Àd_cou¡
;

131 
	`m≠_row_cﬁumn_to_Àd
(
ªc‹d
->
evít
.
key
.
row
,Ñec‹d->evít.key.
cﬁ
, 
Àd
, &
Àd_cou¡
);

132 
uöt8_t
 
i
 = 0; i < 
Àd_cou¡
; i++Ë
g_key_hô
[
Àd
[i]] = 255;

134 
g_™y_key_hô
 = 255;

137  
åue
;

138 
	}
}

140 
	$Àd_m©rix_£t_su•íd_°©e
(
boﬁ
 
°©e
Ë{ 
g_su•íd_°©e
 = sèã; 
	}
}

143 
	$Àd_m©rix_Æl_off
(Ë{ 
	`Àd_m©rix_£t_ödex_vÆue_Æl
(0); 
	}
}

146 
	$Àd_m©rix_unif‹m_brighäess
(Ë{ 
	`Àd_m©rix_£t_ödex_vÆue_Æl
(
LED_MATRIX_MAXIMUM_BRIGHTNESS
 / 
BACKLIGHT_LEVELS
 * 
Àd_m©rix_c⁄fig
.
vÆ
); 
	}
}

148 
	$Àd_m©rix_cu°om
(Ë{
	}
}

150 
	$Àd_m©rix_èsk
() {

151 i‡(!
Àd_m©rix_c⁄fig
.
íabÀ
) {

152 
	`Àd_m©rix_Æl_off
();

153 
	`Àd_m©rix_ödiˇt‹s
();

157 
g_tick
++;

159 i‡(
g_™y_key_hô
 < 0xFFFFFFFF) {

160 
g_™y_key_hô
++;

163 
Àd
 = 0;Üed < 
LED_DRIVER_LED_COUNT
;Üed++) {

164 i‡(
g_key_hô
[
Àd
] < 255) {

165 i‡(
g_key_hô
[
Àd
] =254Ë
g_œ°_Àd_cou¡
 = 
	`MAX
(g_last_led_count - 1, 0);

166 
g_key_hô
[
Àd
]++;

172 
boﬁ
 
su•íd_backlight
 = ((
g_su•íd_°©e
 && 
LED_DISABLE_WHEN_USB_SUSPENDED
Ë|| (
LED_DISABLE_AFTER_TIMEOUT
 > 0 && 
g_™y_key_hô
 > LED_DISABLE_AFTER_TIMEOUT * 60 * 20));

173 
uöt8_t
 
ef„˘
 = 
su•íd_backlight
 ? 0 : 
Àd_m©rix_c⁄fig
.
mode
;

178 
ef„˘
) {

179 
LED_MATRIX_UNIFORM_BRIGHTNESS
:

180 
	`Àd_m©rix_unif‹m_brighäess
();

183 
	`Àd_m©rix_cu°om
();

187 i‡(!
su•íd_backlight
) {

188 
	`Àd_m©rix_ödiˇt‹s
();

192 
Àd_m©rix_drivî
.
	`Êush
();

193 
	}
}

195 
	$Àd_m©rix_ödiˇt‹s
() {

196 
	`Àd_m©rix_ödiˇt‹s_kb
();

197 
	`Àd_m©rix_ödiˇt‹s_u£r
();

198 
	}
}

200 
__©åibuã__
((
wók
)Ë
	$Àd_m©rix_ödiˇt‹s_kb
(Ë{
	}
}

202 
__©åibuã__
((
wók
)Ë
	$Àd_m©rix_ödiˇt‹s_u£r
(Ë{
	}
}

221 
	$Àd_m©rix_öô
() {

222 
Àd_m©rix_drivî
.
	`öô
();

225 
	`waô_ms
(500);

228 
Àd
 = 0;Üed < 
LED_DRIVER_LED_COUNT
;Üed++) {

229 
g_key_hô
[
Àd
] = 255;

232 i‡(!
	`ìc⁄fig_is_íabÀd
()) {

233 
	`d¥ötf
("led_matrix_init_driversÉeconfig isÇotÉnabled.\n");

234 
	`ìc⁄fig_öô
();

235 
	`ìc⁄fig_upd©e_Àd_m©rix_deÁu…
();

238 
Àd_m©rix_c⁄fig
.
øw
 = 
	`ìc⁄fig_ªad_Àd_m©rix
();

240 i‡(!
Àd_m©rix_c⁄fig
.
mode
) {

241 
	`d¥ötf
("led_matrix_init_driversÜed_matrix_config.mode = 0. Write default valuesÅo EEPROM.\n");

242 
	`ìc⁄fig_upd©e_Àd_m©rix_deÁu…
();

243 
Àd_m©rix_c⁄fig
.
øw
 = 
	`ìc⁄fig_ªad_Àd_m©rix
();

246 
	`ìc⁄fig_debug_Àd_m©rix
();

247 
	}
}

250 
uöt8_t
 
	$ö¸emít
(
uöt8_t
 
vÆue
, uöt8_à
°ï
, uöt8_à
mö
, uöt8_à
max
) {

251 
öt16_t
 
√w_vÆue
 = 
vÆue
;

252 
√w_vÆue
 +
°ï
;

253  
	`MIN
(
	`MAX
(
√w_vÆue
, 
mö
), 
max
);

254 
	}
}

256 
uöt8_t
 
	$de¸emít
(
uöt8_t
 
vÆue
, uöt8_à
°ï
, uöt8_à
mö
, uöt8_à
max
) {

257 
öt16_t
 
√w_vÆue
 = 
vÆue
;

258 
√w_vÆue
 -
°ï
;

259  
	`MIN
(
	`MAX
(
√w_vÆue
, 
mö
), 
max
);

260 
	}
}

283 
uöt32_t
 
	$Àd_m©rix_gë_tick
(Ë{  
g_tick
; 
	}
}

285 
	$Àd_m©rix_toggÀ
() {

286 
Àd_m©rix_c⁄fig
.
íabÀ
 ^= 1;

287 
	`ìc⁄fig_upd©e_Àd_m©rix
(
Àd_m©rix_c⁄fig
.
øw
);

288 
	}
}

290 
	$Àd_m©rix_íabÀ
() {

291 
Àd_m©rix_c⁄fig
.
íabÀ
 = 1;

292 
	`ìc⁄fig_upd©e_Àd_m©rix
(
Àd_m©rix_c⁄fig
.
øw
);

293 
	}
}

295 
	$Àd_m©rix_íabÀ_n€ïrom
(Ë{ 
Àd_m©rix_c⁄fig
.
íabÀ
 = 1; 
	}
}

297 
	$Àd_m©rix_dißbÀ
() {

298 
Àd_m©rix_c⁄fig
.
íabÀ
 = 0;

299 
	`ìc⁄fig_upd©e_Àd_m©rix
(
Àd_m©rix_c⁄fig
.
øw
);

300 
	}
}

302 
	$Àd_m©rix_dißbÀ_n€ïrom
(Ë{ 
Àd_m©rix_c⁄fig
.
íabÀ
 = 0; 
	}
}

304 
	$Àd_m©rix_°ï
() {

305 
Àd_m©rix_c⁄fig
.
mode
++;

306 i‡(
Àd_m©rix_c⁄fig
.
mode
 >
LED_MATRIX_EFFECT_MAX
) {

307 
Àd_m©rix_c⁄fig
.
mode
 = 1;

309 
	`ìc⁄fig_upd©e_Àd_m©rix
(
Àd_m©rix_c⁄fig
.
øw
);

310 
	}
}

312 
	$Àd_m©rix_°ï_ªvî£
() {

313 
Àd_m©rix_c⁄fig
.
mode
--;

314 i‡(
Àd_m©rix_c⁄fig
.
mode
 < 1) {

315 
Àd_m©rix_c⁄fig
.
mode
 = 
LED_MATRIX_EFFECT_MAX
 - 1;

317 
	`ìc⁄fig_upd©e_Àd_m©rix
(
Àd_m©rix_c⁄fig
.
øw
);

318 
	}
}

320 
	$Àd_m©rix_ö¸ó£_vÆ
() {

321 
Àd_m©rix_c⁄fig
.
vÆ
 = 
	`ö¸emít
÷ed_m©rix_c⁄fig.vÆ, 8, 0, 
LED_MATRIX_MAXIMUM_BRIGHTNESS
);

322 
	`ìc⁄fig_upd©e_Àd_m©rix
(
Àd_m©rix_c⁄fig
.
øw
);

323 
	}
}

325 
	$Àd_m©rix_de¸ó£_vÆ
() {

326 
Àd_m©rix_c⁄fig
.
vÆ
 = 
	`de¸emít
÷ed_m©rix_c⁄fig.vÆ, 8, 0, 
LED_MATRIX_MAXIMUM_BRIGHTNESS
);

327 
	`ìc⁄fig_upd©e_Àd_m©rix
(
Àd_m©rix_c⁄fig
.
øw
);

328 
	}
}

330 
	$Àd_m©rix_ö¸ó£_•ìd
() {

331 
Àd_m©rix_c⁄fig
.
•ìd
 = 
	`ö¸emít
(led_matrix_config.speed, 1, 0, 3);

332 
	`ìc⁄fig_upd©e_Àd_m©rix
(
Àd_m©rix_c⁄fig
.
øw
);

333 
	}
}

335 
	$Àd_m©rix_de¸ó£_•ìd
() {

336 
Àd_m©rix_c⁄fig
.
•ìd
 = 
	`de¸emít
(led_matrix_config.speed, 1, 0, 3);

337 
	`ìc⁄fig_upd©e_Àd_m©rix
(
Àd_m©rix_c⁄fig
.
øw
);

338 
	}
}

340 
	$Àd_m©rix_mode
(
uöt8_t
 
mode
, 
boﬁ
 
ì¥om_wrôe
) {

341 
Àd_m©rix_c⁄fig
.
mode
 = mode;

342 i‡(
ì¥om_wrôe
) {

343 
	`ìc⁄fig_upd©e_Àd_m©rix
(
Àd_m©rix_c⁄fig
.
øw
);

345 
	}
}

347 
uöt8_t
 
	$Àd_m©rix_gë_mode
(Ë{  
Àd_m©rix_c⁄fig
.
mode
; 
	}
}

349 
	$Àd_m©rix_£t_vÆue_n€ïrom
(
uöt8_t
 
vÆ
Ë{ 
Àd_m©rix_c⁄fig
.vÆ = vÆ; 
	}
}

351 
	$Àd_m©rix_£t_vÆue
(
uöt8_t
 
vÆ
) {

352 
	`Àd_m©rix_£t_vÆue_n€ïrom
(
vÆ
);

353 
	`ìc⁄fig_upd©e_Àd_m©rix
(
Àd_m©rix_c⁄fig
.
øw
);

354 
	}
}

356 
	$backlight_£t
(
uöt8_t
 
vÆ
Ë{ 
	`Àd_m©rix_£t_vÆue
(vÆ); 
	}
}

	@led_matrix_drivers.c

18 
	~<°döt.h
>

19 
	~<°dboﬁ.h
>

20 
	~"qu™tum.h
"

21 
	~"Àdm©rix.h
"

31 #i‡
deföed
(
IS31FL3731
Ë|| deföed(
IS31FL3733
)

33 #i‡
deföed
(
IS31FL3731
)

34 
	~"is31Ê3731-sim∂e.h
"

37 
	~"i2c_ma°î.h
"

39 
	$öô
() {

40 
	`i2c_öô
();

41 #ifde‡
IS31FL3731


42 #ifde‡
LED_DRIVER_ADDR_1


43 
	`IS31FL3731_öô
(
LED_DRIVER_ADDR_1
);

45 #ifde‡
LED_DRIVER_ADDR_2


46 
	`IS31FL3731_öô
(
LED_DRIVER_ADDR_2
);

48 #ifde‡
LED_DRIVER_ADDR_3


49 
	`IS31FL3731_öô
(
LED_DRIVER_ADDR_3
);

51 #ifde‡
LED_DRIVER_ADDR_4


52 
	`IS31FL3731_öô
(
LED_DRIVER_ADDR_4
);

55 #ifde‡
LED_DRIVER_ADDR_1


56 
	`IS31FL3733_öô
(
LED_DRIVER_ADDR_1
, 0);

58 #ifde‡
LED_DRIVER_ADDR_2


59 
	`IS31FL3733_öô
(
LED_DRIVER_ADDR_2
, 0);

61 #ifde‡
LED_DRIVER_ADDR_3


62 
	`IS31FL3733_öô
(
LED_DRIVER_ADDR_3
, 0);

64 #ifde‡
LED_DRIVER_ADDR_4


65 
	`IS31FL3733_öô
(
LED_DRIVER_ADDR_4
, 0);

69 
ödex
 = 0; index < 
LED_DRIVER_LED_COUNT
; index++) {

70 #ifde‡
IS31FL3731


71 
	`IS31FL3731_£t_Àd_c⁄åﬁ_ªgi°î
(
ödex
, 
åue
);

73 
	`IS31FL3733_£t_Àd_c⁄åﬁ_ªgi°î
(
ödex
, 
åue
);

77 #ifde‡
IS31FL3731


78 #ifde‡
LED_DRIVER_ADDR_1


79 
	`IS31FL3731_upd©e_Àd_c⁄åﬁ_ªgi°îs
(
LED_DRIVER_ADDR_1
, 0);

81 #ifde‡
LED_DRIVER_ADDR_2


82 
	`IS31FL3731_upd©e_Àd_c⁄åﬁ_ªgi°îs
(
LED_DRIVER_ADDR_2
, 1);

84 #ifde‡
LED_DRIVER_ADDR_3


85 
	`IS31FL3731_upd©e_Àd_c⁄åﬁ_ªgi°îs
(
LED_DRIVER_ADDR_3
, 2);

87 #ifde‡
LED_DRIVER_ADDR_4


88 
	`IS31FL3731_upd©e_Àd_c⁄åﬁ_ªgi°îs
(
LED_DRIVER_ADDR_4
, 3);

91 #ifde‡
LED_DRIVER_ADDR_1


92 
	`IS31FL3733_upd©e_Àd_c⁄åﬁ_ªgi°îs
(
LED_DRIVER_ADDR_1
, 0);

94 #ifde‡
LED_DRIVER_ADDR_2


95 
	`IS31FL3733_upd©e_Àd_c⁄åﬁ_ªgi°îs
(
LED_DRIVER_ADDR_2
, 1);

97 #ifde‡
LED_DRIVER_ADDR_3


98 
	`IS31FL3733_upd©e_Àd_c⁄åﬁ_ªgi°îs
(
LED_DRIVER_ADDR_3
, 2);

100 #ifde‡
LED_DRIVER_ADDR_4


101 
	`IS31FL3733_upd©e_Àd_c⁄åﬁ_ªgi°îs
(
LED_DRIVER_ADDR_4
, 3);

104 
	}
}

106 
	$Êush
() {

107 #ifde‡
IS31FL3731


108 #ifde‡
LED_DRIVER_ADDR_1


109 
	`IS31FL3731_upd©e_pwm_buf„rs
(
LED_DRIVER_ADDR_1
, 0);

111 #ifde‡
LED_DRIVER_ADDR_2


112 
	`IS31FL3731_upd©e_pwm_buf„rs
(
LED_DRIVER_ADDR_2
, 1);

114 #ifde‡
LED_DRIVER_ADDR_3


115 
	`IS31FL3731_upd©e_pwm_buf„rs
(
LED_DRIVER_ADDR_3
, 2);

117 #ifde‡
LED_DRIVER_ADDR_4


118 
	`IS31FL3731_upd©e_pwm_buf„rs
(
LED_DRIVER_ADDR_4
, 3);

121 #ifde‡
LED_DRIVER_ADDR_1


122 
	`IS31FL3733_upd©e_pwm_buf„rs
(
LED_DRIVER_ADDR_1
, 0);

124 #ifde‡
LED_DRIVER_ADDR_2


125 
	`IS31FL3733_upd©e_pwm_buf„rs
(
LED_DRIVER_ADDR_2
, 1);

127 #ifde‡
LED_DRIVER_ADDR_3


128 
	`IS31FL3733_upd©e_pwm_buf„rs
(
LED_DRIVER_ADDR_3
, 2);

130 #ifde‡
LED_DRIVER_ADDR_4


131 
	`IS31FL3733_upd©e_pwm_buf„rs
(
LED_DRIVER_ADDR_4
, 3);

134 
	}
}

136 c⁄° 
Àd_m©rix_drivî_t
 
	gÀd_m©rix_drivî
 = {

137 .
öô
 = init,

138 .
	gÊush
 = 
Êush
,

139 #ifde‡
IS31FL3731


140 .
	g£t_vÆue
 = 
IS31FL3731_£t_vÆue
,

141 .
	g£t_vÆue_Æl
 = 
IS31FL3731_£t_vÆue_Æl
,

143 .
	g£t_vÆue
 = 
IS31FL3733_£t_vÆue
,

144 .
	g£t_vÆue_Æl
 = 
IS31FL3733_£t_vÆue_Æl
,

	@led_tables.c

16 
	~"Àd_èbÀs.h
"

20 #ifde‡
USE_CIE1931_CURVE


23 c⁄° 
uöt8_t
 
	gCIE1931_CURVE
[256] 
	gPROGMEM
 = {

	@led_tables.h

16 #i‚de‡
LED_TABLES_H


17 
	#LED_TABLES_H


	)

19 
	~"¥ogmem.h
"

20 
	~<°döt.h
>

22 #ifde‡
USE_CIE1931_CURVE


23 c⁄° 
uöt8_t
 
CIE1931_CURVE
[] 
PROGMEM
;

	@ledmatrix.h

20 #i‚de‡
LED_MATRIX_H


21 
	#LED_MATRIX_H


	)

23 #i‚de‡
BACKLIGHT_ENABLE


24 #îr‹ 
You
 
mu°
 
deföe
 
BACKLIGHT_ENABLE
 
wôh
 
LED_MATRIX_ENABLE


27 
	sPoöt
 {

28 
uöt8_t
 
	mx
;

29 
uöt8_t
 
	my
;

30 } 
	t__©åibuã__
((
	t∑cked
)Ë
	tPoöt
;

32 
	sÀd_m©rix
 {

34 
uöt8_t
 
	møw
;

36 
uöt8_t
 
	mrow
 : 4;

37 
uöt8_t
 
	mcﬁ
 : 4;

39 } 
	mm©rix_co
;

40 
Poöt
 
	mpoöt
;

41 
uöt8_t
 
	mmodifõr
 : 1;

42 } 
	t__©åibuã__
((
	t∑cked
)Ë
	tÀd_m©rix
;

44 c⁄° 
Àd_m©rix
 
g_Àds
[
LED_DRIVER_LED_COUNT
];

47 
uöt8_t
 
	mödex
;

48 
uöt8_t
 
	mvÆue
;

49 } 
	tÀd_ödiˇt‹
;

52 
uöt32_t
 
	møw
;

54 
boﬁ
 
	míabÀ
 : 1;

55 
uöt8_t
 
	mmode
 : 6;

56 
uöt8_t
 
	mhue
 : 8;

57 
uöt8_t
 
	mßt
 : 8;

58 
uöt8_t
 
	mvÆ
 : 8;

59 
uöt8_t
 
	m•ìd
 : 8;

61 } 
	tÀd_c⁄fig_t
;

63 
	eÀd_m©rix_ef„˘s
 {

64 
	mLED_MATRIX_UNIFORM_BRIGHTNESS
 = 1,

66 
	mLED_MATRIX_EFFECT_MAX


69 
Àd_m©rix_£t_ödex_vÆue
(
ödex
, 
uöt8_t
 
vÆue
);

70 
Àd_m©rix_£t_ödex_vÆue_Æl
(
uöt8_t
 
vÆue
);

74 
Àd_m©rix_ödiˇt‹s
();

75 
Àd_m©rix_ödiˇt‹s_kb
();

76 
Àd_m©rix_ödiˇt‹s_u£r
();

78 
Àd_m©rix_öô
();

79 
Àd_m©rix_£tup_drivîs
();

81 
Àd_m©rix_£t_su•íd_°©e
(
boﬁ
 
°©e
);

82 
Àd_m©rix_£t_ödiˇt‹_°©e
(
uöt8_t
 
°©e
);

84 
Àd_m©rix_èsk
();

90 
Àd_m©rix_upd©e_pwm_buf„rs
();

92 
boﬁ
 
¥o˚ss_Àd_m©rix
(
uöt16_t
 
keycode
, 
keyªc‹d_t
 *
ªc‹d
);

94 
uöt32_t
 
Àd_m©rix_gë_tick
();

96 
Àd_m©rix_toggÀ
();

97 
Àd_m©rix_íabÀ
();

98 
Àd_m©rix_íabÀ_n€ïrom
();

99 
Àd_m©rix_dißbÀ
();

100 
Àd_m©rix_dißbÀ_n€ïrom
();

101 
Àd_m©rix_°ï
();

102 
Àd_m©rix_°ï_ªvî£
();

103 
Àd_m©rix_ö¸ó£_vÆ
();

104 
Àd_m©rix_de¸ó£_vÆ
();

105 
Àd_m©rix_ö¸ó£_•ìd
();

106 
Àd_m©rix_de¸ó£_•ìd
();

107 
Àd_m©rix_mode
(
uöt8_t
 
mode
, 
boﬁ
 
ì¥om_wrôe
);

108 
Àd_m©rix_mode_n€ïrom
(
uöt8_t
 
mode
);

109 
uöt8_t
 
Àd_m©rix_gë_mode
();

110 
Àd_m©rix_£t_vÆue
(
uöt8_t
 
mode
);

111 
Àd_m©rix_£t_vÆue_n€ïrom
(
uöt8_t
 
mode
);

115 (*
	möô
)();

118 (*
	m£t_vÆue
)(
	mödex
, 
uöt8_t
 
	mvÆue
);

120 (*
	m£t_vÆue_Æl
)(
uöt8_t
 
	mvÆue
);

122 (*
	mÊush
)();

123 } 
	tÀd_m©rix_drivî_t
;

125 c⁄° 
Àd_m©rix_drivî_t
 
Àd_m©rix_drivî
;

	@matrix.c

17 
	~<°döt.h
>

18 
	~<°dboﬁ.h
>

19 
	~"utû.h
"

20 
	~"m©rix.h
"

21 
	~"deboun˚.h
"

22 
	~"qu™tum.h
"

24 #ifde‡
DIRECT_PINS


25 
pö_t
 
	gdúe˘_pös
[
MATRIX_ROWS
][
MATRIX_COLS
] = 
DIRECT_PINS
;

26 #ñi‡(
DIODE_DIRECTION
 =
ROW2COL
Ë|| (DIODE_DIRECTION =
COL2ROW
)

27 c⁄° 
pö_t
 
	grow_pös
[
MATRIX_ROWS
] = 
MATRIX_ROW_PINS
;

28 c⁄° 
pö_t
 
	gcﬁ_pös
[
MATRIX_COLS
] = 
MATRIX_COL_PINS
;

32 
m©rix_row_t
 
øw_m©rix
[
MATRIX_ROWS
];

33 
m©rix_row_t
 
m©rix
[
MATRIX_ROWS
];

37 #ifde‡
DIRECT_PINS


39 
	$öô_pös
() {

40 
row
 = 0;Ñow < 
MATRIX_ROWS
;Ñow++) {

41 
cﬁ
 = 0; cﬁ < 
MATRIX_COLS
; col++) {

42 
pö_t
 
pö
 = 
dúe˘_pös
[
row
][
cﬁ
];

43 i‡(
pö
 !
NO_PIN
) {

44 
	`£tPöI≈utHigh
(
pö
);

48 
	}
}

50 
boﬁ
 
	$ªad_cﬁs_⁄_row
(
m©rix_row_t
 
cuºít_m©rix
[], 
uöt8_t
 
cuºít_row
) {

52 
m©rix_row_t
 
cuºít_row_vÆue
 = 0;

54 
uöt8_t
 
cﬁ_ödex
 = 0; cﬁ_ödex < 
MATRIX_COLS
; col_index++) {

55 
pö_t
 
pö
 = 
dúe˘_pös
[
cuºít_row
][
cﬁ_ödex
];

56 i‡(
pö
 !
NO_PIN
) {

57 
cuºít_row_vÆue
 |
	`ªadPö
(
pö
Ë? 0 : (
MATRIX_ROW_SHIFTER
 << 
cﬁ_ödex
);

62 i‡(
cuºít_m©rix
[
cuºít_row
] !
cuºít_row_vÆue
) {

63 
cuºít_m©rix
[
cuºít_row
] = 
cuºít_row_vÆue
;

64  
åue
;

66  
Ál£
;

67 
	}
}

69 #ñi‡
deföed
(
DIODE_DIRECTION
)

70 #i‡(
DIODE_DIRECTION
 =
COL2ROW
)

72 
	$£À˘_row
(
uöt8_t
 
row
) {

73 
	`£tPöOuçut
(
row_pös
[
row
]);

74 
	`wrôePöLow
(
row_pös
[
row
]);

75 
	}
}

77 
	$un£À˘_row
(
uöt8_t
 
row
Ë{ 
	`£tPöI≈utHigh
(
row_pös
[row]); 
	}
}

79 
	$un£À˘_rows
() {

80 
uöt8_t
 
x
 = 0; x < 
MATRIX_ROWS
; x++) {

81 
	`£tPöI≈utHigh
(
row_pös
[
x
]);

83 
	}
}

85 
	$öô_pös
() {

86 
	`un£À˘_rows
();

87 
uöt8_t
 
x
 = 0; x < 
MATRIX_COLS
; x++) {

88 
	`£tPöI≈utHigh
(
cﬁ_pös
[
x
]);

90 
	}
}

92 
boﬁ
 
	$ªad_cﬁs_⁄_row
(
m©rix_row_t
 
cuºít_m©rix
[], 
uöt8_t
 
cuºít_row
) {

94 
m©rix_row_t
 
cuºít_row_vÆue
 = 0;

97 
	`£À˘_row
(
cuºít_row
);

98 
	`m©rix_io_dñay
();

101 
uöt8_t
 
cﬁ_ödex
 = 0; cﬁ_ödex < 
MATRIX_COLS
; col_index++) {

103 
uöt8_t
 
pö_°©e
 = 
	`ªadPö
(
cﬁ_pös
[
cﬁ_ödex
]);

106 
cuºít_row_vÆue
 |
pö_°©e
 ? 0 : (
MATRIX_ROW_SHIFTER
 << 
cﬁ_ödex
);

110 
	`un£À˘_row
(
cuºít_row
);

113 i‡(
cuºít_m©rix
[
cuºít_row
] !
cuºít_row_vÆue
) {

114 
cuºít_m©rix
[
cuºít_row
] = 
cuºít_row_vÆue
;

115  
åue
;

117  
Ál£
;

118 
	}
}

120 #ñi‡(
DIODE_DIRECTION
 =
ROW2COL
)

122 
	$£À˘_cﬁ
(
uöt8_t
 
cﬁ
) {

123 
	`£tPöOuçut
(
cﬁ_pös
[
cﬁ
]);

124 
	`wrôePöLow
(
cﬁ_pös
[
cﬁ
]);

125 
	}
}

127 
	$un£À˘_cﬁ
(
uöt8_t
 
cﬁ
Ë{ 
	`£tPöI≈utHigh
(
cﬁ_pös
[cﬁ]); 
	}
}

129 
	$un£À˘_cﬁs
() {

130 
uöt8_t
 
x
 = 0; x < 
MATRIX_COLS
; x++) {

131 
	`£tPöI≈utHigh
(
cﬁ_pös
[
x
]);

133 
	}
}

135 
	$öô_pös
() {

136 
	`un£À˘_cﬁs
();

137 
uöt8_t
 
x
 = 0; x < 
MATRIX_ROWS
; x++) {

138 
	`£tPöI≈utHigh
(
row_pös
[
x
]);

140 
	}
}

142 
boﬁ
 
	$ªad_rows_⁄_cﬁ
(
m©rix_row_t
 
cuºít_m©rix
[], 
uöt8_t
 
cuºít_cﬁ
) {

143 
boﬁ
 
m©rix_ch™ged
 = 
Ál£
;

146 
	`£À˘_cﬁ
(
cuºít_cﬁ
);

147 
	`m©rix_io_dñay
();

150 
uöt8_t
 
row_ödex
 = 0;Ñow_ödex < 
MATRIX_ROWS
;Ñow_index++) {

152 
m©rix_row_t
 
œ°_row_vÆue
 = 
cuºít_m©rix
[
row_ödex
];

153 
m©rix_row_t
 
cuºít_row_vÆue
 = 
œ°_row_vÆue
;

156 i‡(
	`ªadPö
(
row_pös
[
row_ödex
]) == 0) {

158 
cuºít_row_vÆue
 |(
MATRIX_ROW_SHIFTER
 << 
cuºít_cﬁ
);

161 
cuºít_row_vÆue
 &~(
MATRIX_ROW_SHIFTER
 << 
cuºít_cﬁ
);

165 i‡((
œ°_row_vÆue
 !
cuºít_row_vÆue
)) {

166 
m©rix_ch™ged
 |
åue
;

167 
cuºít_m©rix
[
row_ödex
] = 
cuºít_row_vÆue
;

172 
	`un£À˘_cﬁ
(
cuºít_cﬁ
);

174  
m©rix_ch™ged
;

175 
	}
}

178 #îr‹ 
DIODE_DIRECTION
 
mu°
 
be
 
⁄e
 
of
 
COL2ROW
 
‹
 
ROW2COL
!

181 #îr‹ 
DIODE_DIRECTION
 
is
 
nŸ
 
deföed
!

184 
	$m©rix_öô
() {

186 
	`öô_pös
();

189 
uöt8_t
 
i
 = 0; i < 
MATRIX_ROWS
; i++) {

190 
øw_m©rix
[
i
] = 0;

191 
m©rix
[
i
] = 0;

194 
	`deboun˚_öô
(
MATRIX_ROWS
);

196 
	`m©rix_öô_qu™tum
();

197 
	}
}

199 
uöt8_t
 
	$m©rix_sˇn
() {

200 
boﬁ
 
ch™ged
 = 
Ál£
;

202 #i‡
	`deföed
(
DIRECT_PINS
Ë|| (
DIODE_DIRECTION
 =
COL2ROW
)

204 
uöt8_t
 
cuºít_row
 = 0; cuºít_row < 
MATRIX_ROWS
; current_row++) {

205 
ch™ged
 |
	`ªad_cﬁs_⁄_row
(
øw_m©rix
, 
cuºít_row
);

207 #ñi‡(
DIODE_DIRECTION
 =
ROW2COL
)

209 
uöt8_t
 
cuºít_cﬁ
 = 0; cuºít_cﬁ < 
MATRIX_COLS
; current_col++) {

210 
ch™ged
 |
	`ªad_rows_⁄_cﬁ
(
øw_m©rix
, 
cuºít_cﬁ
);

214 
	`deboun˚
(
øw_m©rix
, 
m©rix
, 
MATRIX_ROWS
, 
ch™ged
);

216 
	`m©rix_sˇn_qu™tum
();

217  (
uöt8_t
)
ch™ged
;

218 
	}
}

	@matrix_common.c

1 
	~"m©rix.h
"

2 
	~"deboun˚.h
"

3 
	~"waô.h
"

4 
	~"¥öt.h
"

5 
	~"debug.h
"

7 #i‚de‡
MATRIX_IO_DELAY


8 
	#MATRIX_IO_DELAY
 30

	)

12 
m©rix_row_t
 
	gøw_m©rix
[
MATRIX_ROWS
];

13 
m©rix_row_t
 
	gm©rix
[
MATRIX_ROWS
];

15 #ifde‡
MATRIX_MASKED


16 c⁄° 
m©rix_row_t
 
m©rix_mask
[];

21 
__©åibuã__
((
wók
)Ë
	$m©rix_öô_kb
(Ë{ 
	`m©rix_öô_u£r
(); 
	}
}

23 
__©åibuã__
((
wók
)Ë
	$m©rix_sˇn_kb
(Ë{ 
	`m©rix_sˇn_u£r
(); 
	}
}

25 
__©åibuã__
((
wók
)Ë
	$m©rix_öô_u£r
(Ë{
	}
}

27 
__©åibuã__
((
wók
)Ë
	$m©rix_sˇn_u£r
(Ë{
	}
}

31 
ölöe
 
uöt8_t
 
	$m©rix_rows
(Ë{  
MATRIX_ROWS
; 
	}
}

33 
ölöe
 
uöt8_t
 
	$m©rix_cﬁs
(Ë{  
MATRIX_COLS
; 
	}
}

35 
ölöe
 
boﬁ
 
	$m©rix_is_⁄
(
uöt8_t
 
row
, uöt8_à
cﬁ
Ë{  (
m©rix
[row] & ((
m©rix_row_t
)1 << cﬁ)); 
	}
}

37 
ölöe
 
m©rix_row_t
 
	$m©rix_gë_row
(
uöt8_t
 
row
) {

40 #ifde‡
MATRIX_MASKED


41  
m©rix
[
row
] & 
m©rix_mask
[row];

43  
m©rix
[
row
];

45 
	}
}

48 
boﬁ
 
	$m©rix_is_modifõd
() {

49 i‡(
	`deboun˚_a˘ive
()Ë 
Ál£
;

50  
åue
;

51 
	}
}

53 #i‡(
MATRIX_COLS
 <= 8)

54 
	#¥öt_m©rix_hódî
(Ë
	`¥öt
("\ƒ/¯01234567\n")

	)

55 
	#¥öt_m©rix_row
(
row
Ë
	`¥öt_bö_ªvî£8
(
	`m©rix_gë_row
‘ow))

	)

56 
	#m©rix_bôp›
(
row
Ë
	`bôp›
(
	`m©rix_gë_row
‘ow))

	)

57 #ñi‡(
MATRIX_COLS
 <= 16)

58 
	#¥öt_m©rix_hódî
(Ë
	`¥öt
("\ƒ/¯0123456789ABCDEF\n")

	)

59 
	#¥öt_m©rix_row
(
row
Ë
	`¥öt_bö_ªvî£16
(
	`m©rix_gë_row
‘ow))

	)

60 
	#m©rix_bôp›
(
row
Ë
	`bôp›16
(
	`m©rix_gë_row
‘ow))

	)

61 #ñi‡(
MATRIX_COLS
 <= 32)

62 
	#¥öt_m©rix_hódî
(Ë
	`¥öt
("\ƒ/¯0123456789ABCDEF0123456789ABCDEF\n")

	)

63 
	#¥öt_m©rix_row
(
row
Ë
	`¥öt_bö_ªvî£32
(
	`m©rix_gë_row
‘ow))

	)

64 
	#m©rix_bôp›
(
row
Ë
	`bôp›32
(
	`m©rix_gë_row
‘ow))

	)

67 
	$m©rix_¥öt
() {

68 
	`¥öt_m©rix_hódî
();

70 
uöt8_t
 
row
 = 0;Ñow < 
MATRIX_ROWS
;Ñow++) {

71 
	`phex
(
row
);

72 
	`¥öt
(": ");

73 
	`¥öt_m©rix_row
(
row
);

74 
	`¥öt
("\n");

76 
	}
}

78 
uöt8_t
 
	$m©rix_key_cou¡
() {

79 
uöt8_t
 
cou¡
 = 0;

80 
uöt8_t
 
i
 = 0; i < 
MATRIX_ROWS
; i++) {

81 
cou¡
 +
	`m©rix_bôp›
(
i
);

83  
cou¡
;

84 
	}
}

86 
__©åibuã__
((
wók
)Ë
	$m©rix_io_dñay
(Ë{ 
	`waô_us
(
MATRIX_IO_DELAY
); 
	}
}

89 
__©åibuã__
((
wók
)Ë
	$m©rix_öô_cu°om
(Ë{
	}
}

91 
__©åibuã__
((
wók
)Ë
boﬁ
 
	$m©rix_sˇn_cu°om
(
m©rix_row_t
 
cuºít_m©rix
[]Ë{  
åue
; 
	}
}

93 
__©åibuã__
((
wók
)Ë
	$m©rix_öô
() {

94 
	`m©rix_öô_cu°om
();

97 
uöt8_t
 
i
 = 0; i < 
MATRIX_ROWS
; i++) {

98 
øw_m©rix
[
i
] = 0;

99 
m©rix
[
i
] = 0;

102 
	`deboun˚_öô
(
MATRIX_ROWS
);

104 
	`m©rix_öô_qu™tum
();

105 
	}
}

107 
__©åibuã__
((
wók
)Ë
uöt8_t
 
	$m©rix_sˇn
() {

108 
boﬁ
 
ch™ged
 = 
	`m©rix_sˇn_cu°om
(
øw_m©rix
);

110 
	`deboun˚
(
øw_m©rix
, 
m©rix
, 
MATRIX_ROWS
, 
ch™ged
);

112 
	`m©rix_sˇn_qu™tum
();

113  
ch™ged
;

114 
	}
}

116 
__©åibuã__
((
wók
)Ë
boﬁ
 
	$≥ek_m©rix
(
uöt8_t
 
row_ödex
, uöt8_à
cﬁ_ödex
, 
boﬁ
 
øw
Ë{  0 !(‘aw ? 
øw_m©rix
[row_ödex] : 
m©rix
[row_ödex]Ë& (
MATRIX_ROW_SHIFTER
 << cﬁ_ödex)); 
	}
}

	@pointing_device.c

18 
	~<°döt.h
>

19 
	~"ªp‹t.h
"

20 
	~"ho°.h
"

21 
	~"timî.h
"

22 
	~"¥öt.h
"

23 
	~"debug.h
"

24 
	~"poötög_devi˚.h
"

26 
ªp‹t_mou£_t
 
	gmou£Rï‹t
 = {};

28 
__©åibuã__
((
wók
)Ë
	$poötög_devi˚_öô
() {

30 
	}
}

32 
__©åibuã__
((
wók
)Ë
	$poötög_devi˚_£nd
() {

34 
	`ho°_mou£_£nd
(&
mou£Rï‹t
);

36 
mou£Rï‹t
.
x
 = 0;

37 
mou£Rï‹t
.
y
 = 0;

38 
mou£Rï‹t
.
v
 = 0;

39 
mou£Rï‹t
.
h
 = 0;

40 
	}
}

42 
__©åibuã__
((
wók
)Ë
	$poötög_devi˚_èsk
() {

50 
	`poötög_devi˚_£nd
();

51 
	}
}

53 
ªp‹t_mou£_t
 
	$poötög_devi˚_gë_ªp‹t
(Ë{  
mou£Rï‹t
; 
	}
}

55 
	$poötög_devi˚_£t_ªp‹t
(
ªp‹t_mou£_t
 
√wMou£Rï‹t
Ë{ 
mou£Rï‹t
 =ÇewMou£Rï‹t; 
	}
}

	@pointing_device.h

18 #i‚de‡
POINTING_DEVICE_H


19 
	#POINTING_DEVICE_H


	)

21 
	~<°döt.h
>

22 
	~"ho°.h
"

23 
	~"ªp‹t.h
"

25 
poötög_devi˚_öô
();

26 
poötög_devi˚_èsk
();

27 
poötög_devi˚_£nd
();

28 
ªp‹t_mou£_t
 
poötög_devi˚_gë_ªp‹t
();

29 
poötög_devi˚_£t_ªp‹t
(
ªp‹t_mou£_t
 
√wMou£Rï‹t
);

	@quantum.c

17 
	~<˘y≥.h
>

18 
	~"qu™tum.h
"

20 #ifde‡
BLUETOOTH_ENABLE


21 
	~"ouçut£À˘.h
"

24 #ifde‡
BACKLIGHT_ENABLE


25 
	~"backlight.h
"

26 
backlight_c⁄fig_t
 
backlight_c⁄fig
;

29 #ifde‡
FAUXCLICKY_ENABLE


30 
	~"Áux˛icky.h
"

33 #ifde‡
API_ENABLE


34 
	~"≠i.h
"

37 #ifde‡
MIDI_ENABLE


38 
	~"¥o˚ss_midi.h
"

41 #ifde‡
VELOCIKEY_ENABLE


42 
	~"vñocikey.h
"

45 #ifde‡
HAPTIC_ENABLE


46 
	~"h≠tic.h
"

49 #ifde‡
AUDIO_ENABLE


50 #i‚de‡
GOODBYE_SONG


51 
	#GOODBYE_SONG
 
	`SONG
(
GOODBYE_SOUND
)

	)

53 
	ggoodbye_s⁄g
[][2] = 
GOODBYE_SONG
;

54 #ifde‡
DEFAULT_LAYER_SONGS


55 
	gdeÁu…_œyî_s⁄gs
[][16][2] = 
DEFAULT_LAYER_SONGS
;

57 #ifde‡
SENDSTRING_BELL


58 
	gbñl_s⁄g
[][2] = 
SONG
(
TERMINAL_SOUND
);

62 
do_code16
(
uöt16_t
 
code
, (*
f
)(
uöt8_t
)) {

63 
code
) {

64 
QK_MODS
 ... 
QK_MODS_MAX
:

70 
uöt8_t
 
mods_to_£nd
 = 0;

72 i‡(
code
 & 
QK_RMODS_MIN
) {

73 i‡(
code
 & 
QK_LCTL
Ë
mods_to_£nd
 |
	`MOD_BIT
(
KC_RCTL
);

74 i‡(
code
 & 
QK_LSFT
Ë
mods_to_£nd
 |
	`MOD_BIT
(
KC_RSFT
);

75 i‡(
code
 & 
QK_LALT
Ë
mods_to_£nd
 |
	`MOD_BIT
(
KC_RALT
);

76 i‡(
code
 & 
QK_LGUI
Ë
mods_to_£nd
 |
	`MOD_BIT
(
KC_RGUI
);

78 i‡(
code
 & 
QK_LCTL
Ë
mods_to_£nd
 |
	`MOD_BIT
(
KC_LCTL
);

79 i‡(
code
 & 
QK_LSFT
Ë
mods_to_£nd
 |
	`MOD_BIT
(
KC_LSFT
);

80 i‡(
code
 & 
QK_LALT
Ë
mods_to_£nd
 |
	`MOD_BIT
(
KC_LALT
);

81 i‡(
code
 & 
QK_LGUI
Ë
mods_to_£nd
 |
	`MOD_BIT
(
KC_LGUI
);

84 
	`f
(
mods_to_£nd
);

85 
	}
}

87 
	$ªgi°î_code16
(
uöt16_t
 
code
) {

88 i‡(
	`IS_MOD
(
code
Ë|| codê=
KC_NO
) {

89 
	`do_code16
(
code
, 
ªgi°î_mods
);

91 
	`do_code16
(
code
, 
ªgi°î_wók_mods
);

93 
	`ªgi°î_code
(
code
);

94 
	}
}

96 
	$uƒegi°î_code16
(
uöt16_t
 
code
) {

97 
	`uƒegi°î_code
(
code
);

98 i‡(
	`IS_MOD
(
code
Ë|| codê=
KC_NO
) {

99 
	`do_code16
(
code
, 
uƒegi°î_mods
);

101 
	`do_code16
(
code
, 
uƒegi°î_wók_mods
);

103 
	}
}

105 
	$èp_code16
(
uöt16_t
 
code
) {

106 
	`ªgi°î_code16
(
code
);

107 #i‡
TAP_CODE_DELAY
 > 0

108 
	`waô_ms
(
TAP_CODE_DELAY
);

110 
	`uƒegi°î_code16
(
code
);

111 
	}
}

113 
__©åibuã__
((
wók
)Ë
boﬁ
 
	$¥o˚ss_a˘i⁄_kb
(
keyªc‹d_t
 *
ªc‹d
Ë{  
åue
; 
	}
}

115 
__©åibuã__
((
wók
)Ë
boﬁ
 
	$¥o˚ss_ªc‹d_kb
(
uöt16_t
 
keycode
, 
keyªc‹d_t
 *
ªc‹d
Ë{  
	`¥o˚ss_ªc‹d_u£r
(keycode,Ñec‹d); 
	}
}

117 
__©åibuã__
((
wók
)Ë
boﬁ
 
	$¥o˚ss_ªc‹d_u£r
(
uöt16_t
 
keycode
, 
keyªc‹d_t
 *
ªc‹d
Ë{  
åue
; 
	}
}

119 
__©åibuã__
((
wók
)Ë
	$po°_¥o˚ss_ªc‹d_kb
(
uöt16_t
 
keycode
, 
keyªc‹d_t
 *
ªc‹d
Ë{ 
	`po°_¥o˚ss_ªc‹d_u£r
(keycode,Ñec‹d); 
	}
}

121 
__©åibuã__
((
wók
)Ë
	$po°_¥o˚ss_ªc‹d_u£r
(
uöt16_t
 
keycode
, 
keyªc‹d_t
 *
ªc‹d
Ë{
	}
}

123 
	$ª£t_keybﬂrd
() {

124 
	`˛ór_keybﬂrd
();

125 #i‡
	`deföed
(
MIDI_ENABLE
Ë&& deföed(
MIDI_BASIC
)

126 
	`¥o˚ss_midi_Æl_nŸes_off
();

128 #ifde‡
AUDIO_ENABLE


129 #i‚de‡
NO_MUSIC_MODE


130 
	`music_Æl_nŸes_off
();

132 
uöt16_t
 
timî_°¨t
 = 
	`timî_ªad
();

133 
	`PLAY_SONG
(
goodbye_s⁄g
);

134 
	`shutdown_u£r
();

135 
	`timî_ñ≠£d
(
timî_°¨t
Ë< 250Ë
	`waô_ms
(1);

136 
	`°›_Æl_nŸes
();

138 
	`shutdown_u£r
();

139 
	`waô_ms
(250);

141 #ifde‡
HAPTIC_ENABLE


142 
	`h≠tic_shutdown
();

144 
	`boŸlﬂdî_jump
();

145 
	}
}

148 
uöt16_t
 
	$gë_ªc‹d_keycode
(
keyªc‹d_t
 *
ªc‹d
, 
boﬁ
 
upd©e_œyî_ˇche
Ë{  
	`gë_evít_keycode
‘ec‹d->
evít
, upd©e_œyî_ˇche); 
	}
}

156 
uöt16_t
 
	$gë_evít_keycode
(
keyevít_t
 
evít
, 
boﬁ
 
upd©e_œyî_ˇche
) {

157 #i‡!
	`deföed
(
NO_ACTION_LAYER
Ë&& !deföed(
STRICT_LAYER_RELEASE
)

159 i‡(!
dißbÀ_a˘i⁄_ˇche
) {

160 
uöt8_t
 
œyî
;

162 i‡(
evít
.
¥es£d
 && 
upd©e_œyî_ˇche
) {

163 
œyî
 = 
	`œyî_swôch_gë_œyî
(
evít
.
key
);

164 
	`upd©e_sour˚_œyîs_ˇche
(
evít
.
key
, 
œyî
);

166 
œyî
 = 
	`ªad_sour˚_œyîs_ˇche
(
evít
.
key
);

168  
	`keym≠_key_to_keycode
(
œyî
, 
evít
.
key
);

171  
	`keym≠_key_to_keycode
(
	`œyî_swôch_gë_œyî
(
evít
.
key
),Évent.key);

172 
	}
}

175 
	$po°_¥o˚ss_ªc‹d_qu™tum
(
keyªc‹d_t
 *
ªc‹d
) {

176 
uöt16_t
 
keycode
 = 
	`gë_ªc‹d_keycode
(
ªc‹d
, 
Ál£
);

177 
	`po°_¥o˚ss_ªc‹d_kb
(
keycode
, 
ªc‹d
);

178 
	}
}

183 
boﬁ
 
	$¥o˚ss_ªc‹d_qu™tum
(
keyªc‹d_t
 *
ªc‹d
) {

184 
uöt16_t
 
keycode
 = 
	`gë_ªc‹d_keycode
(
ªc‹d
, 
åue
);

194 #ifde‡
VELOCIKEY_ENABLE


195 i‡(
	`vñocikey_íabÀd
(Ë&& 
ªc‹d
->
evít
.
¥es£d
) {

196 
	`vñocikey_ac˚Àøã
();

200 #ifde‡
WPM_ENABLE


201 i‡(
ªc‹d
->
evít
.
¥es£d
) {

202 
	`upd©e_wpm
(
keycode
);

206 #ifde‡
TAP_DANCE_ENABLE


207 
	`¥ïro˚ss_èp_d™˚
(
keycode
, 
ªc‹d
);

211 #i‡
	`deföed
(
KEY_LOCK_ENABLE
)

213 
	`¥o˚ss_key_lock
(&
keycode
, 
ªc‹d
) &&

215 #i‡
	`deföed
(
DYNAMIC_MACRO_ENABLE
Ë&& !deföed(
DYNAMIC_MACRO_USER_CALL
)

217 
	`¥o˚ss_dy«mic_ma¸o
(
keycode
, 
ªc‹d
) &&

219 #i‡
	`deföed
(
AUDIO_ENABLE
Ë&& deföed(
AUDIO_CLICKY
)

220 
	`¥o˚ss_˛icky
(
keycode
, 
ªc‹d
) &&

222 #ifde‡
HAPTIC_ENABLE


223 
	`¥o˚ss_h≠tic
(
keycode
, 
ªc‹d
) &&

225 #i‡
	`deföed
(
RGB_MATRIX_ENABLE
)

226 
	`¥o˚ss_rgb_m©rix
(
keycode
, 
ªc‹d
) &&

228 #i‡
	`deföed
(
VIA_ENABLE
)

229 
	`¥o˚ss_ªc‹d_vü
(
keycode
, 
ªc‹d
) &&

231 
	`¥o˚ss_ªc‹d_kb
(
keycode
, 
ªc‹d
) &&

232 #i‡
	`deföed
(
MIDI_ENABLE
Ë&& deföed(
MIDI_ADVANCED
)

233 
	`¥o˚ss_midi
(
keycode
, 
ªc‹d
) &&

235 #ifde‡
AUDIO_ENABLE


236 
	`¥o˚ss_audio
(
keycode
, 
ªc‹d
) &&

238 #ifde‡
BACKLIGHT_ENABLE


239 
	`¥o˚ss_backlight
(
keycode
, 
ªc‹d
) &&

241 #ifde‡
STENO_ENABLE


242 
	`¥o˚ss_°ío
(
keycode
, 
ªc‹d
) &&

244 #i‡(
	`deföed
(
AUDIO_ENABLE
Ë|| (deföed(
MIDI_ENABLE
Ë&& deföed(
MIDI_BASIC
))Ë&& !deföed(
NO_MUSIC_MODE
)

245 
	`¥o˚ss_music
(
keycode
, 
ªc‹d
) &&

247 #ifde‡
TAP_DANCE_ENABLE


248 
	`¥o˚ss_èp_d™˚
(
keycode
, 
ªc‹d
) &&

250 #i‡
	`deföed
(
UNICODE_ENABLE
Ë|| deföed(
UNICODEMAP_ENABLE
Ë|| deföed(
UCIS_ENABLE
)

251 
	`¥o˚ss_unicode_comm⁄
(
keycode
, 
ªc‹d
) &&

253 #ifde‡
LEADER_ENABLE


254 
	`¥o˚ss_Àadî
(
keycode
, 
ªc‹d
) &&

256 #ifde‡
COMBO_ENABLE


257 
	`¥o˚ss_combo
(
keycode
, 
ªc‹d
) &&

259 #ifde‡
PRINTING_ENABLE


260 
	`¥o˚ss_¥öãr
(
keycode
, 
ªc‹d
) &&

262 #ifde‡
AUTO_SHIFT_ENABLE


263 
	`¥o˚ss_auto_shi·
(
keycode
, 
ªc‹d
) &&

265 #ifde‡
TERMINAL_ENABLE


266 
	`¥o˚ss_ãrmöÆ
(
keycode
, 
ªc‹d
) &&

268 #ifde‡
SPACE_CADET_ENABLE


269 
	`¥o˚ss_•a˚_ˇdë
(
keycode
, 
ªc‹d
) &&

271 #ifde‡
MAGIC_KEYCODE_ENABLE


272 
	`¥o˚ss_magic
(
keycode
, 
ªc‹d
) &&

274 #ifde‡
GRAVE_ESC_ENABLE


275 
	`¥o˚ss_gøve_esc
(
keycode
, 
ªc‹d
) &&

277 #i‡
	`deföed
(
RGBLIGHT_ENABLE
Ë|| deföed(
RGB_MATRIX_ENABLE
)

278 
	`¥o˚ss_rgb
(
keycode
, 
ªc‹d
) &&

280 #ifde‡
JOYSTICK_ENABLE


281 
	`¥o˚ss_joy°ick
(
keycode
, 
ªc‹d
) &&

283 
åue
)) {

284  
Ál£
;

287 i‡(
ªc‹d
->
evít
.
¥es£d
) {

288 
keycode
) {

289 #i‚de‡
NO_RESET


290 
RESET
:

291 
	`ª£t_keybﬂrd
();

292  
Ál£
;

294 #i‚de‡
NO_DEBUG


295 
DEBUG
:

296 
debug_íabÀ
 ^= 1;

297 i‡(
debug_íabÀ
) {

298 
	`¥öt
("DEBUG:Énabled.\n");

300 
	`¥öt
("DEBUG: disabled.\n");

303  
Ál£
;

304 
EEPROM_RESET
:

305 
	`ìc⁄fig_öô
();

306  
Ál£
;

307 #ifde‡
FAUXCLICKY_ENABLE


308 
FC_TOG
:

309 
FAUXCLICKY_TOGGLE
;

310  
Ál£
;

311 
FC_ON
:

312 
FAUXCLICKY_ON
;

313  
Ál£
;

314 
FC_OFF
:

315 
FAUXCLICKY_OFF
;

316  
Ál£
;

318 #ifde‡
VELOCIKEY_ENABLE


319 
VLK_TOG
:

320 
	`vñocikey_toggÀ
();

321  
Ál£
;

323 #ifde‡
BLUETOOTH_ENABLE


324 
OUT_AUTO
:

325 
	`£t_ouçut
(
OUTPUT_AUTO
);

326  
Ál£
;

327 
OUT_USB
:

328 
	`£t_ouçut
(
OUTPUT_USB
);

329  
Ál£
;

330 
OUT_BT
:

331 
	`£t_ouçut
(
OUTPUT_BLUETOOTH
);

332  
Ál£
;

337  
	`¥o˚ss_a˘i⁄_kb
(
ªc‹d
);

338 
	}
}

345 
__©åibuã__
((
wók
)Ëc⁄° 
uöt8_t
 
	gascii_to_shi·_lut
[16] 
	gPROGMEM
 = {

346 
KCLUT_ENTRY
(0, 0, 0, 0, 0, 0, 0, 0),

347 
KCLUT_ENTRY
(0, 0, 0, 0, 0, 0, 0, 0),

348 
KCLUT_ENTRY
(0, 0, 0, 0, 0, 0, 0, 0),

349 
KCLUT_ENTRY
(0, 0, 0, 0, 0, 0, 0, 0),

351 
KCLUT_ENTRY
(0, 1, 1, 1, 1, 1, 1, 0),

352 
KCLUT_ENTRY
(1, 1, 1, 1, 0, 0, 0, 0),

353 
KCLUT_ENTRY
(0, 0, 0, 0, 0, 0, 0, 0),

354 
KCLUT_ENTRY
(0, 0, 1, 0, 1, 0, 1, 1),

355 
KCLUT_ENTRY
(1, 1, 1, 1, 1, 1, 1, 1),

356 
KCLUT_ENTRY
(1, 1, 1, 1, 1, 1, 1, 1),

357 
KCLUT_ENTRY
(1, 1, 1, 1, 1, 1, 1, 1),

358 
KCLUT_ENTRY
(1, 1, 1, 0, 0, 0, 1, 1),

359 
KCLUT_ENTRY
(0, 0, 0, 0, 0, 0, 0, 0),

360 
KCLUT_ENTRY
(0, 0, 0, 0, 0, 0, 0, 0),

361 
KCLUT_ENTRY
(0, 0, 0, 0, 0, 0, 0, 0),

362 
KCLUT_ENTRY
(0, 0, 0, 1, 1, 1, 1, 0),

368 
__©åibuã__
((
wók
)Ëc⁄° 
uöt8_t
 
	gascii_to_Ætgr_lut
[16] 
	gPROGMEM
 = {

369 
KCLUT_ENTRY
(0, 0, 0, 0, 0, 0, 0, 0),

370 
KCLUT_ENTRY
(0, 0, 0, 0, 0, 0, 0, 0),

371 
KCLUT_ENTRY
(0, 0, 0, 0, 0, 0, 0, 0),

372 
KCLUT_ENTRY
(0, 0, 0, 0, 0, 0, 0, 0),

374 
KCLUT_ENTRY
(0, 0, 0, 0, 0, 0, 0, 0),

375 
KCLUT_ENTRY
(0, 0, 0, 0, 0, 0, 0, 0),

376 
KCLUT_ENTRY
(0, 0, 0, 0, 0, 0, 0, 0),

377 
KCLUT_ENTRY
(0, 0, 0, 0, 0, 0, 0, 0),

378 
KCLUT_ENTRY
(0, 0, 0, 0, 0, 0, 0, 0),

379 
KCLUT_ENTRY
(0, 0, 0, 0, 0, 0, 0, 0),

380 
KCLUT_ENTRY
(0, 0, 0, 0, 0, 0, 0, 0),

381 
KCLUT_ENTRY
(0, 0, 0, 0, 0, 0, 0, 0),

382 
KCLUT_ENTRY
(0, 0, 0, 0, 0, 0, 0, 0),

383 
KCLUT_ENTRY
(0, 0, 0, 0, 0, 0, 0, 0),

384 
KCLUT_ENTRY
(0, 0, 0, 0, 0, 0, 0, 0),

385 
KCLUT_ENTRY
(0, 0, 0, 0, 0, 0, 0, 0),

390 
__©åibuã__
((
wók
)Ëc⁄° 
uöt8_t
 
	gascii_to_keycode_lut
[128] 
	gPROGMEM
 = {

392 
XXXXXXX
, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX,

394 
KC_BSPC
, 
KC_TAB
, 
KC_ENT
, 
XXXXXXX
, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX,

396 
XXXXXXX
, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX,

398 
XXXXXXX
, XXXXXXX, XXXXXXX, 
KC_ESC
, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX,

401 
KC_SPC
, 
KC_1
, 
KC_QUOT
, 
KC_3
, 
KC_4
, 
KC_5
, 
KC_7
, KC_QUOT,

403 
KC_9
, 
KC_0
, 
KC_8
, 
KC_EQL
, 
KC_COMM
, 
KC_MINS
, 
KC_DOT
, 
KC_SLSH
,

405 
KC_0
, 
KC_1
, 
KC_2
, 
KC_3
, 
KC_4
, 
KC_5
, 
KC_6
, 
KC_7
,

407 
KC_8
, 
KC_9
, 
KC_SCLN
, KC_SCLN, 
KC_COMM
, 
KC_EQL
, 
KC_DOT
, 
KC_SLSH
,

409 
KC_2
, 
KC_A
, 
KC_B
, 
KC_C
, 
KC_D
, 
KC_E
, 
KC_F
, 
KC_G
,

411 
KC_H
, 
KC_I
, 
KC_J
, 
KC_K
, 
KC_L
, 
KC_M
, 
KC_N
, 
KC_O
,

413 
KC_P
, 
KC_Q
, 
KC_R
, 
KC_S
, 
KC_T
, 
KC_U
, 
KC_V
, 
KC_W
,

415 
KC_X
, 
KC_Y
, 
KC_Z
, 
KC_LBRC
, 
KC_BSLS
, 
KC_RBRC
, 
KC_6
, 
KC_MINS
,

417 
KC_GRV
, 
KC_A
, 
KC_B
, 
KC_C
, 
KC_D
, 
KC_E
, 
KC_F
, 
KC_G
,

419 
KC_H
, 
KC_I
, 
KC_J
, 
KC_K
, 
KC_L
, 
KC_M
, 
KC_N
, 
KC_O
,

421 
KC_P
, 
KC_Q
, 
KC_R
, 
KC_S
, 
KC_T
, 
KC_U
, 
KC_V
, 
KC_W
,

423 
KC_X
, 
KC_Y
, 
KC_Z
, 
KC_LBRC
, 
KC_BSLS
, 
KC_RBRC
, 
KC_GRV
, 
KC_DEL


429 
	#PGM_LOADBIT
(
mem
, 
pos
Ë((
	`pgm_ªad_byã
(&((mem)[’osË/ 8])Ë>> (’osË% 8)Ë& 0x01)

	)

431 
	$£nd_°rög
(c⁄° *
°r
Ë{ 
	`£nd_°rög_wôh_dñay
(°r, 0); 
	}
}

433 
	$£nd_°rög_P
(c⁄° *
°r
Ë{ 
	`£nd_°rög_wôh_dñay_P
(°r, 0); 
	}
}

435 
	$£nd_°rög_wôh_dñay
(c⁄° *
°r
, 
uöt8_t
 
öãrvÆ
) {

437 
ascii_code
 = *
°r
;

438 i‡(!
ascii_code
) ;

439 i‡(
ascii_code
 =
SS_QMK_PREFIX
) {

440 
ascii_code
 = *(++
°r
);

441 i‡(
ascii_code
 =
SS_TAP_CODE
) {

443 
uöt8_t
 
keycode
 = *(++
°r
);

444 
	`èp_code
(
keycode
);

445 } i‡(
ascii_code
 =
SS_DOWN_CODE
) {

447 
uöt8_t
 
keycode
 = *(++
°r
);

448 
	`ªgi°î_code
(
keycode
);

449 } i‡(
ascii_code
 =
SS_UP_CODE
) {

451 
uöt8_t
 
keycode
 = *(++
°r
);

452 
	`uƒegi°î_code
(
keycode
);

453 } i‡(
ascii_code
 =
SS_DELAY_CODE
) {

455 
ms
 = 0;

456 
uöt8_t
 
keycode
 = *(++
°r
);

457 
	`isdigô
(
keycode
)) {

458 
ms
 *= 10;

459 
ms
 +
keycode
 - '0';

460 
keycode
 = *(++
°r
);

462 
ms
--Ë
	`waô_ms
(1);

465 
	`£nd_ch¨
(
ascii_code
);

467 ++
°r
;

470 
uöt8_t
 
ms
 = 
öãrvÆ
;

471 
ms
--Ë
	`waô_ms
(1);

474 
	}
}

476 
	$£nd_°rög_wôh_dñay_P
(c⁄° *
°r
, 
uöt8_t
 
öãrvÆ
) {

478 
ascii_code
 = 
	`pgm_ªad_byã
(
°r
);

479 i‡(!
ascii_code
) ;

480 i‡(
ascii_code
 =
SS_QMK_PREFIX
) {

481 
ascii_code
 = 
	`pgm_ªad_byã
(++
°r
);

482 i‡(
ascii_code
 =
SS_TAP_CODE
) {

484 
uöt8_t
 
keycode
 = 
	`pgm_ªad_byã
(++
°r
);

485 
	`èp_code
(
keycode
);

486 } i‡(
ascii_code
 =
SS_DOWN_CODE
) {

488 
uöt8_t
 
keycode
 = 
	`pgm_ªad_byã
(++
°r
);

489 
	`ªgi°î_code
(
keycode
);

490 } i‡(
ascii_code
 =
SS_UP_CODE
) {

492 
uöt8_t
 
keycode
 = 
	`pgm_ªad_byã
(++
°r
);

493 
	`uƒegi°î_code
(
keycode
);

494 } i‡(
ascii_code
 =
SS_DELAY_CODE
) {

496 
ms
 = 0;

497 
uöt8_t
 
keycode
 = 
	`pgm_ªad_byã
(++
°r
);

498 
	`isdigô
(
keycode
)) {

499 
ms
 *= 10;

500 
ms
 +
keycode
 - '0';

501 
keycode
 = 
	`pgm_ªad_byã
(++
°r
);

503 
ms
--Ë
	`waô_ms
(1);

506 
	`£nd_ch¨
(
ascii_code
);

508 ++
°r
;

511 
uöt8_t
 
ms
 = 
öãrvÆ
;

512 
ms
--Ë
	`waô_ms
(1);

515 
	}
}

517 
	$£nd_ch¨
(
ascii_code
) {

518 #i‡
	`deföed
(
AUDIO_ENABLE
Ë&& deföed(
SENDSTRING_BELL
)

519 i‡(
ascii_code
 == '\a') {

520 
	`PLAY_SONG
(
bñl_s⁄g
);

525 
uöt8_t
 
keycode
 = 
	`pgm_ªad_byã
(&
ascii_to_keycode_lut
[(uöt8_t)
ascii_code
]);

526 
boﬁ
 
is_shi·ed
 = 
	`PGM_LOADBIT
(
ascii_to_shi·_lut
, (
uöt8_t
)
ascii_code
);

527 
boﬁ
 
is_Ætgªd
 = 
	`PGM_LOADBIT
(
ascii_to_Ætgr_lut
, (
uöt8_t
)
ascii_code
);

529 i‡(
is_shi·ed
) {

530 
	`ªgi°î_code
(
KC_LSFT
);

532 i‡(
is_Ætgªd
) {

533 
	`ªgi°î_code
(
KC_RALT
);

535 
	`èp_code
(
keycode
);

536 i‡(
is_Ætgªd
) {

537 
	`uƒegi°î_code
(
KC_RALT
);

539 i‡(
is_shi·ed
) {

540 
	`uƒegi°î_code
(
KC_LSFT
);

542 
	}
}

544 
	$£t_sögÀ_≥rsi°ít_deÁu…_œyî
(
uöt8_t
 
deÁu…_œyî
) {

545 #i‡
	`deföed
(
AUDIO_ENABLE
Ë&& deföed(
DEFAULT_LAYER_SONGS
)

546 
	`PLAY_SONG
(
deÁu…_œyî_s⁄gs
[
deÁu…_œyî
]);

548 
	`ìc⁄fig_upd©e_deÁu…_œyî
(1U << 
deÁu…_œyî
);

549 
	`deÁu…_œyî_£t
(1U << 
deÁu…_œyî
);

550 
	}
}

552 
œyî_°©e_t
 
	$upd©e_åi_œyî_°©e
(
œyî_°©e_t
 
°©e
, 
uöt8_t
 
œyî1
, uöt8_à
œyî2
, uöt8_à
œyî3
) {

553 
œyî_°©e_t
 
mask12
 = (1UL << 
œyî1
Ë| (1UL << 
œyî2
);

554 
œyî_°©e_t
 
mask3
 = 1UL << 
œyî3
;

555  (
°©e
 & 
mask12
Ë=mask12 ? (°©ê| 
mask3
) : (state & ~mask3);

556 
	}
}

558 
	$upd©e_åi_œyî
(
uöt8_t
 
œyî1
, uöt8_à
œyî2
, uöt8_à
œyî3
Ë{ 
	`œyî_°©e_£t
(
	`upd©e_åi_œyî_°©e
(
œyî_°©e
,Üayî1,Üayî2,Üayî3)); 
	}
}

560 
	$èp_øndom_ba£64
() {

561 #i‡
	`deföed
(
__AVR_ATmega32U4__
)

562 
uöt8_t
 
key
 = (
TCNT0
 + 
TCNT1
 + 
TCNT3
 + 
TCNT4
) % 64;

564 
uöt8_t
 
key
 = 
	`ønd
() % 64;

566 
key
) {

568 
	`ªgi°î_code
(
KC_LSFT
);

569 
	`ªgi°î_code
(
key
 + 
KC_A
);

570 
	`uƒegi°î_code
(
key
 + 
KC_A
);

571 
	`uƒegi°î_code
(
KC_LSFT
);

574 
	`ªgi°î_code
(
key
 - 26 + 
KC_A
);

575 
	`uƒegi°î_code
(
key
 - 26 + 
KC_A
);

578 
	`ªgi°î_code
(
KC_0
);

579 
	`uƒegi°î_code
(
KC_0
);

582 
	`ªgi°î_code
(
key
 - 53 + 
KC_1
);

583 
	`uƒegi°î_code
(
key
 - 53 + 
KC_1
);

586 
	`ªgi°î_code
(
KC_LSFT
);

587 
	`ªgi°î_code
(
KC_EQL
);

588 
	`uƒegi°î_code
(
KC_EQL
);

589 
	`uƒegi°î_code
(
KC_LSFT
);

592 
	`ªgi°î_code
(
KC_SLSH
);

593 
	`uƒegi°î_code
(
KC_SLSH
);

596 
	}
}

598 
	$m©rix_öô_qu™tum
() {

599 #ifde‡
BOOTMAGIC_LITE


600 
	`boŸmagic_lôe
();

602 i‡(!
	`ìc⁄fig_is_íabÀd
()) {

603 
	`ìc⁄fig_öô
();

605 #ifde‡
BACKLIGHT_ENABLE


606 #ifde‡
LED_MATRIX_ENABLE


607 
	`Àd_m©rix_öô
();

609 
	`backlight_öô_p‹ts
();

612 #ifde‡
AUDIO_ENABLE


613 
	`audio_öô
();

615 #ifde‡
RGB_MATRIX_ENABLE


616 
	`rgb_m©rix_öô
();

618 #i‡
	`deföed
(
UNICODE_ENABLE
Ë|| deföed(
UNICODEMAP_ENABLE
Ë|| deföed(
UCIS_ENABLE
)

619 
	`unicode_öput_mode_öô
();

621 #ifde‡
HAPTIC_ENABLE


622 
	`h≠tic_öô
();

624 #i‡
	`deföed
(
BLUETOOTH_ENABLE
Ë&& deföed(
OUTPUT_AUTO_ENABLE
)

625 
	`£t_ouçut
(
OUTPUT_AUTO
);

628 
	`m©rix_öô_kb
();

629 
	}
}

631 
	$m©rix_sˇn_qu™tum
() {

632 #i‡
	`deföed
(
AUDIO_ENABLE
Ë&& !deföed(
NO_MUSIC_MODE
)

633 
	`m©rix_sˇn_music
();

636 #ifde‡
TAP_DANCE_ENABLE


637 
	`m©rix_sˇn_èp_d™˚
();

640 #ifde‡
COMBO_ENABLE


641 
	`m©rix_sˇn_combo
();

644 #ifde‡
LED_MATRIX_ENABLE


645 
	`Àd_m©rix_èsk
();

648 #ifde‡
RGB_MATRIX_ENABLE


649 
	`rgb_m©rix_èsk
();

652 #ifde‡
WPM_ENABLE


653 
	`deˇy_wpm
();

656 #ifde‡
HAPTIC_ENABLE


657 
	`h≠tic_èsk
();

660 #ifde‡
DIP_SWITCH_ENABLE


661 
	`dù_swôch_ªad
(
Ál£
);

664 
	`m©rix_sˇn_kb
();

665 
	}
}

667 #ifde‡
HD44780_ENABLED


668 
	~"hd44780.h
"

674 
	$£nd_dw‹d
(
uöt32_t
 
numbî
) {

675 
uöt16_t
 
w‹d
 = (
numbî
 >> 16);

676 
	`£nd_w‹d
(
w‹d
);

677 
	`£nd_w‹d
(
numbî
 & 0xFFFFUL);

678 
	}
}

680 
	$£nd_w‹d
(
uöt16_t
 
numbî
) {

681 
uöt8_t
 
byã
 = 
numbî
 >> 8;

682 
	`£nd_byã
(
byã
);

683 
	`£nd_byã
(
numbî
 & 0xFF);

684 
	}
}

686 
	$£nd_byã
(
uöt8_t
 
numbî
) {

687 
uöt8_t
 
nibbÀ
 = 
numbî
 >> 4;

688 
	`£nd_nibbÀ
(
nibbÀ
);

689 
	`£nd_nibbÀ
(
numbî
 & 0xF);

690 
	}
}

692 
	$£nd_nibbÀ
(
uöt8_t
 
numbî
) {

693 
numbî
) {

695 
	`ªgi°î_code
(
KC_0
);

696 
	`uƒegi°î_code
(
KC_0
);

699 
	`ªgi°î_code
(
KC_1
 + (
numbî
 - 1));

700 
	`uƒegi°î_code
(
KC_1
 + (
numbî
 - 1));

703 
	`ªgi°î_code
(
KC_A
 + (
numbî
 - 0xA));

704 
	`uƒegi°î_code
(
KC_A
 + (
numbî
 - 0xA));

707 
	}
}

709 
__©åibuã__
((
wók
)Ë
uöt16_t
 
	$hex_to_keycode
(
uöt8_t
 
hex
) {

710 
hex
 = hex & 0xF;

711 i‡(
hex
 == 0x0) {

712  
KC_0
;

713 } i‡(
hex
 < 0xA) {

714  
KC_1
 + (
hex
 - 0x1);

716  
KC_A
 + (
hex
 - 0xA);

718 
	}
}

720 
	$≠i_£nd_unicode
(
uöt32_t
 
unicode
) {

721 #ifde‡
API_ENABLE


722 
uöt8_t
 
chunk
[4];

723 
	`dw‹d_to_byãs
(
unicode
, 
chunk
);

724 
	`MT_SEND_DATA
(
DT_UNICODE
, 
chunk
, 5);

726 
	}
}

732 
__©åibuã__
((
wók
)Ë
	$Àd_£t_u£r
(
uöt8_t
 
usb_Àd
Ë{
	}
}

738 
__©åibuã__
((
wók
)Ë
	$Àd_£t_kb
(
uöt8_t
 
usb_Àd
Ë{ 
	`Àd_£t_u£r
(usb_Àd); 
	}
}

744 
__©åibuã__
((
wók
)Ë
boﬁ
 
	$Àd_upd©e_u£r
(
Àd_t
 
Àd_°©e
Ë{  
åue
; 
	}
}

750 
__©åibuã__
((
wók
)Ë
boﬁ
 
	$Àd_upd©e_kb
(
Àd_t
 
Àd_°©e
Ë{  
	`Àd_upd©e_u£r
÷ed_°©e); 
	}
}

752 
__©åibuã__
((
wók
)Ë
	$Àd_öô_p‹ts
(Ë{
	}
}

754 
__©åibuã__
((
wók
)Ë
	$Àd_£t
(
uöt8_t
 
usb_Àd
) {

755 #i‡
	`deföed
(
BACKLIGHT_CAPS_LOCK
Ë&& deföed(
BACKLIGHT_ENABLE
)

757 
uöt8_t
 
bl_toggÀ_lvl
 = 0;

759 i‡(
	`IS_LED_ON
(
usb_Àd
, 
USB_LED_CAPS_LOCK
Ë&& !
backlight_c⁄fig
.
íabÀ
) {

762 
bl_toggÀ_lvl
 = 
BACKLIGHT_LEVELS
;

763 } i‡(
	`IS_LED_OFF
(
usb_Àd
, 
USB_LED_CAPS_LOCK
Ë&& 
backlight_c⁄fig
.
íabÀ
) {

766 
bl_toggÀ_lvl
 = 
backlight_c⁄fig
.
Àvñ
;

770 
	`backlight_£t
(
bl_toggÀ_lvl
);

773 
	`Àd_£t_kb
(
usb_Àd
);

774 
	`Àd_upd©e_kb
((
Àd_t
)
usb_Àd
);

775 
	}
}

781 
__©åibuã__
((
wók
)Ë
	$°¨tup_u£r
(Ë{
	}
}

783 
__©åibuã__
((
wók
)Ë
	$shutdown_u£r
(Ë{
	}
}

	@quantum.h

16 #¥agm®
⁄˚


18 #i‡
deföed
(
__AVR__
)

19 
	~<avr/pgm•a˚.h
>

20 
	~<avr/io.h
>

21 
	~<avr/öãºu±.h
>

23 #i‡
deföed
(
PROTOCOL_CHIBIOS
)

24 
	~"hÆ.h
"

25 
	~"chibios_c⁄fig.h
"

28 
	~"waô.h
"

29 
	~"m©rix.h
"

30 
	~"keym≠.h
"

32 #ifde‡
BACKLIGHT_ENABLE


33 #ifde‡
LED_MATRIX_ENABLE


34 
	~"Àdm©rix.h
"

36 
	~"backlight.h
"

40 #i‡
deföed
(
RGBLIGHT_ENABLE
)

41 
	~"rgblight.h
"

42 #ñi‡
deföed
(
RGB_MATRIX_ENABLE
)

44 
	#RGBLIGHT_H_DUMMY_DEFINE


	)

45 
	~"rgblight.h
"

48 #ifde‡
RGB_MATRIX_ENABLE


49 
	~"rgb_m©rix.h
"

52 
	~"a˘i⁄_œyî.h
"

53 
	~"ìc⁄fig.h
"

54 
	~"boŸlﬂdî.h
"

55 
	~"timî.h
"

56 
	~"c⁄fig_comm⁄.h
"

57 
	~"Àd.h
"

58 
	~"a˘i⁄_utû.h
"

59 
	~"¥öt.h
"

60 
	~"£nd_°rög_keycodes.h
"

61 
	~"su•íd.h
"

62 
	~<°ddef.h
>

63 
	~<°dlib.h
>

65 
œyî_°©e_t
 
deÁu…_œyî_°©e
;

67 #i‚de‡
NO_ACTION_LAYER


68 
œyî_°©e_t
 
œyî_°©e
;

71 #i‡
deföed
(
MIDI_ENABLE
Ë&& deföed(
MIDI_ADVANCED
)

72 
	~"¥o˚ss_midi.h
"

75 #ifde‡
AUDIO_ENABLE


76 
	~"audio.h
"

77 
	~"¥o˚ss_audio.h
"

78 #ifde‡
AUDIO_CLICKY


79 
	~"¥o˚ss_˛icky.h
"

83 #ifde‡
STENO_ENABLE


84 
	~"¥o˚ss_°ío.h
"

87 #i‡
deföed
(
AUDIO_ENABLE
Ë|| (deföed(
MIDI_ENABLE
Ë&& deföed(
MIDI_BASIC
))

88 
	~"¥o˚ss_music.h
"

91 #ifde‡
BACKLIGHT_ENABLE


92 
	~"¥o˚ss_backlight.h
"

95 #ifde‡
LEADER_ENABLE


96 
	~"¥o˚ss_Àadî.h
"

99 #ifde‡
UNICODE_ENABLE


100 
	~"¥o˚ss_unicode.h
"

103 #ifde‡
UCIS_ENABLE


104 
	~"¥o˚ss_ucis.h
"

107 #ifde‡
UNICODEMAP_ENABLE


108 
	~"¥o˚ss_unicodem≠.h
"

111 #ifde‡
TAP_DANCE_ENABLE


112 
	~"¥o˚ss_èp_d™˚.h
"

115 #ifde‡
PRINTING_ENABLE


116 
	~"¥o˚ss_¥öãr.h
"

119 #ifde‡
AUTO_SHIFT_ENABLE


120 
	~"¥o˚ss_auto_shi·.h
"

123 #ifde‡
COMBO_ENABLE


124 
	~"¥o˚ss_combo.h
"

127 #ifde‡
KEY_LOCK_ENABLE


128 
	~"¥o˚ss_key_lock.h
"

131 #ifde‡
TERMINAL_ENABLE


132 
	~"¥o˚ss_ãrmöÆ.h
"

134 
	~"¥o˚ss_ãrmöÆ_n›.h
"

137 #ifde‡
SPACE_CADET_ENABLE


138 
	~"¥o˚ss_•a˚_ˇdë.h
"

141 #ifde‡
MAGIC_KEYCODE_ENABLE


142 
	~"¥o˚ss_magic.h
"

145 #ifde‡
JOYSTICK_ENABLE


146 
	~"¥o˚ss_joy°ick.h
"

149 #ifde‡
GRAVE_ESC_ENABLE


150 
	~"¥o˚ss_gøve_esc.h
"

153 #i‡
deföed
(
RGBLIGHT_ENABLE
Ë|| deföed(
RGB_MATRIX_ENABLE
)

154 
	~"¥o˚ss_rgb.h
"

157 #ifde‡
HD44780_ENABLE


158 
	~"hd44780.h
"

161 #ifde‡
HAPTIC_ENABLE


162 
	~"h≠tic.h
"

165 #ifde‡
OLED_DRIVER_ENABLE


166 
	~"ﬁed_drivî.h
"

169 #ifde‡
DIP_SWITCH_ENABLE


170 
	~"dù_swôch.h
"

173 #ifde‡
DYNAMIC_MACRO_ENABLE


174 
	~"¥o˚ss_dy«mic_ma¸o.h
"

177 #ifde‡
DYNAMIC_KEYMAP_ENABLE


178 
	~"dy«mic_keym≠.h
"

181 #ifde‡
VIA_ENABLE


182 
	~"vü.h
"

185 #ifde‡
WPM_ENABLE


186 
	~"wpm.h
"

190 #i‡
deföed
(
__AVR__
)

191 
uöt8_t
 
	tpö_t
;

193 
	#£tPöI≈ut
(
pö
Ë(
	`DDRx_ADDRESS
’öË&~
	`_BV
(’ö)&0xF), 
	`PORTx_ADDRESS
’öË&~_BV(’ö)&0xF))

	)

194 
	#£tPöI≈utHigh
(
pö
Ë(
	`DDRx_ADDRESS
’öË&~
	`_BV
(’ö)&0xF), 
	`PORTx_ADDRESS
’öË|_BV(’ö)&0xF))

	)

195 
	#£tPöI≈utLow
(
pö
Ë
	`_Sètic_as£π
(0, "AVRÖro˚ss‹†ˇ¬Ÿ im∂emíà™ i≈uàa†puŒÜow")

	)

196 
	#£tPöOuçut
(
pö
Ë(
	`DDRx_ADDRESS
’öË|
	`_BV
(’ö)&0xF))

	)

198 
	#wrôePöHigh
(
pö
Ë(
	`PORTx_ADDRESS
’öË|
	`_BV
(’ö)&0xF))

	)

199 
	#wrôePöLow
(
pö
Ë(
	`PORTx_ADDRESS
’öË&~
	`_BV
(’ö)&0xF))

	)

200 
	#wrôePö
(
pö
, 
Àvñ
Ë(÷evñË? 
	`wrôePöHigh
’öË: 
	`wrôePöLow
’ö))

	)

202 
	#ªadPö
(
pö
Ë((
boﬁ
)(
	`PINx_ADDRESS
’öË& 
	`_BV
(’ö)&0xF)))

	)

204 
	#toggÀPö
(
pö
Ë(
	`PORTx_ADDRESS
’öË^
	`_BV
(’ö)&0xF))

	)

206 #ñi‡
deföed
(
PROTOCOL_CHIBIOS
)

207 
iﬁöe_t
 
	tpö_t
;

209 
	#£tPöI≈ut
(
pö
Ë
	`∑lSëLöeMode
’ö, 
PAL_MODE_INPUT
)

	)

210 
	#£tPöI≈utHigh
(
pö
Ë
	`∑lSëLöeMode
’ö, 
PAL_MODE_INPUT_PULLUP
)

	)

211 
	#£tPöI≈utLow
(
pö
Ë
	`∑lSëLöeMode
’ö, 
PAL_MODE_INPUT_PULLDOWN
)

	)

212 
	#£tPöOuçut
(
pö
Ë
	`∑lSëLöeMode
’ö, 
PAL_MODE_OUTPUT_PUSHPULL
)

	)

214 
	#wrôePöHigh
(
pö
Ë
	`∑lSëLöe
’ö)

	)

215 
	#wrôePöLow
(
pö
Ë
	`∑lCÀ¨Löe
’ö)

	)

216 
	#wrôePö
(
pö
, 
Àvñ
Ë(÷evñË? 
	`wrôePöHigh
’öË: 
	`wrôePöLow
’ö))

	)

218 
	#ªadPö
(
pö
Ë
	`∑lRódLöe
’ö)

	)

220 
	#toggÀPö
(
pö
Ë
	`∑lToggÀLöe
’ö)

	)

223 
	#SEND_STRING
(
°rög
Ë
	`£nd_°rög_P
(
	`PSTR
(°rög))

	)

224 
	#SEND_STRING_DELAY
(
°rög
, 
öãrvÆ
Ë
	`£nd_°rög_wôh_dñay_P
(
	`PSTR
(°rög), i¡îvÆ)

	)

227 c⁄° 
uöt8_t
 
ascii_to_keycode_lut
[128];

228 c⁄° 
uöt8_t
 
ascii_to_shi·_lut
[16];

229 c⁄° 
uöt8_t
 
ascii_to_Ætgr_lut
[16];

231 
	#KCLUT_ENTRY
(
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
) \

232 –((
a
) ? 1 : 0) << 0 \

233 | ((
b
) ? 1 : 0) << 1 \

234 | ((
c
) ? 1 : 0) << 2 \

235 | ((
d
) ? 1 : 0) << 3 \

236 | ((
e
) ? 1 : 0) << 4 \

237 | ((
f
) ? 1 : 0) << 5 \

238 | ((
g
) ? 1 : 0) << 6 \

239 | ((
h
Ë? 1 : 0Ë<< 7 )

	)

242 
£nd_°rög
(c⁄° *
°r
);

243 
£nd_°rög_wôh_dñay
(c⁄° *
°r
, 
uöt8_t
 
öãrvÆ
);

244 
£nd_°rög_P
(c⁄° *
°r
);

245 
£nd_°rög_wôh_dñay_P
(c⁄° *
°r
, 
uöt8_t
 
öãrvÆ
);

246 
£nd_ch¨
(
ascii_code
);

249 
upd©e_åi_œyî
(
uöt8_t
 
œyî1
, uöt8_à
œyî2
, uöt8_à
œyî3
);

250 
œyî_°©e_t
 
upd©e_åi_œyî_°©e
÷ayî_°©e_à
°©e
, 
uöt8_t
 
œyî1
, uöt8_à
œyî2
, uöt8_à
œyî3
);

252 
£t_sögÀ_≥rsi°ít_deÁu…_œyî
(
uöt8_t
 
deÁu…_œyî
);

254 
èp_øndom_ba£64
();

256 
	#IS_LAYER_ON
(
œyî
Ë
	`œyî_°©e_is
÷ayî)

	)

257 
	#IS_LAYER_OFF
(
œyî
Ë!
	`œyî_°©e_is
÷ayî)

	)

259 
	#IS_LAYER_ON_STATE
(
°©e
, 
œyî
Ë
	`œyî_°©e_cmp
(°©e,Üayî)

	)

260 
	#IS_LAYER_OFF_STATE
(
°©e
, 
œyî
Ë!
	`œyî_°©e_cmp
(°©e,Üayî)

	)

262 
m©rix_öô_kb
();

263 
m©rix_sˇn_kb
();

264 
m©rix_öô_u£r
();

265 
m©rix_sˇn_u£r
();

266 
uöt16_t
 
gë_ªc‹d_keycode
(
keyªc‹d_t
 *
ªc‹d
, 
boﬁ
 
upd©e_œyî_ˇche
);

267 
uöt16_t
 
gë_evít_keycode
(
keyevít_t
 
evít
, 
boﬁ
 
upd©e_œyî_ˇche
);

268 
boﬁ
 
¥o˚ss_a˘i⁄_kb
(
keyªc‹d_t
 *
ªc‹d
);

269 
boﬁ
 
¥o˚ss_ªc‹d_kb
(
uöt16_t
 
keycode
, 
keyªc‹d_t
 *
ªc‹d
);

270 
boﬁ
 
¥o˚ss_ªc‹d_u£r
(
uöt16_t
 
keycode
, 
keyªc‹d_t
 *
ªc‹d
);

271 
po°_¥o˚ss_ªc‹d_kb
(
uöt16_t
 
keycode
, 
keyªc‹d_t
 *
ªc‹d
);

272 
po°_¥o˚ss_ªc‹d_u£r
(
uöt16_t
 
keycode
, 
keyªc‹d_t
 *
ªc‹d
);

274 #i‚de‡
BOOTMAGIC_LITE_COLUMN


275 
	#BOOTMAGIC_LITE_COLUMN
 0

	)

277 #i‚de‡
BOOTMAGIC_LITE_ROW


278 
	#BOOTMAGIC_LITE_ROW
 0

	)

281 
boŸmagic_lôe
();

283 
ª£t_keybﬂrd
();

285 
°¨tup_u£r
();

286 
shutdown_u£r
();

288 
ªgi°î_code16
(
uöt16_t
 
code
);

289 
uƒegi°î_code16
(
uöt16_t
 
code
);

290 
èp_code16
(
uöt16_t
 
code
);

292 
£nd_dw‹d
(
uöt32_t
 
numbî
);

293 
£nd_w‹d
(
uöt16_t
 
numbî
);

294 
£nd_byã
(
uöt8_t
 
numbî
);

295 
£nd_nibbÀ
(
uöt8_t
 
numbî
);

296 
uöt16_t
 
hex_to_keycode
(
uöt8_t
 
hex
);

298 
Àd_£t_u£r
(
uöt8_t
 
usb_Àd
);

299 
Àd_£t_kb
(
uöt8_t
 
usb_Àd
);

300 
boﬁ
 
Àd_upd©e_u£r
(
Àd_t
 
Àd_°©e
);

301 
boﬁ
 
Àd_upd©e_kb
(
Àd_t
 
Àd_°©e
);

303 
≠i_£nd_unicode
(
uöt32_t
 
unicode
);

	@quantum_keycodes.h

16 #i‚de‡
QUANTUM_KEYCODES_H


17 
	#QUANTUM_KEYCODES_H


	)

19 #i‚de‡
MIDI_ENABLE_STRICT


20 
	#MIDI_ENABLE_STRICT
 0

	)

23 #i‡!
MIDI_ENABLE_STRICT
 || (
deföed
(
MIDI_ENABLE
Ë&& deföed(
MIDI_ADVANCED
))

24 #i‚de‡
MIDI_TONE_KEYCODE_OCTAVES


25 
	#MIDI_TONE_KEYCODE_OCTAVES
 3

	)

30 
	#_______
 
KC_TRNS


	)

31 
	#XXXXXXX
 
KC_NO


	)

33 
	equ™tum_keycodes
 {

35 
	mQK_BASIC
 = 0x0000,

36 
	mQK_BASIC_MAX
 = 0x00FF,

37 
	mQK_MODS
 = 0x0100,

38 
	mQK_LCTL
 = 0x0100,

39 
	mQK_LSFT
 = 0x0200,

40 
	mQK_LALT
 = 0x0400,

41 
	mQK_LGUI
 = 0x0800,

42 
	mQK_RMODS_MIN
 = 0x1000,

43 
	mQK_RCTL
 = 0x1100,

44 
	mQK_RSFT
 = 0x1200,

45 
	mQK_RALT
 = 0x1400,

46 
	mQK_RGUI
 = 0x1800,

47 
	mQK_MODS_MAX
 = 0x1FFF,

48 
	mQK_FUNCTION
 = 0x2000,

49 
	mQK_FUNCTION_MAX
 = 0x2FFF,

50 
	mQK_MACRO
 = 0x3000,

51 
	mQK_MACRO_MAX
 = 0x3FFF,

52 
	mQK_LAYER_TAP
 = 0x4000,

53 
	mQK_LAYER_TAP_MAX
 = 0x4FFF,

54 
	mQK_TO
 = 0x5000,

55 
	mQK_TO_MAX
 = 0x50FF,

56 
	mQK_MOMENTARY
 = 0x5100,

57 
	mQK_MOMENTARY_MAX
 = 0x51FF,

58 
	mQK_DEF_LAYER
 = 0x5200,

59 
	mQK_DEF_LAYER_MAX
 = 0x52FF,

60 
	mQK_TOGGLE_LAYER
 = 0x5300,

61 
	mQK_TOGGLE_LAYER_MAX
 = 0x53FF,

62 
	mQK_ONE_SHOT_LAYER
 = 0x5400,

63 
	mQK_ONE_SHOT_LAYER_MAX
 = 0x54FF,

64 
	mQK_ONE_SHOT_MOD
 = 0x5500,

65 
	mQK_ONE_SHOT_MOD_MAX
 = 0x55FF,

66 
	mQK_TAP_DANCE
 = 0x5700,

67 
	mQK_TAP_DANCE_MAX
 = 0x57FF,

68 
	mQK_LAYER_TAP_TOGGLE
 = 0x5800,

69 
	mQK_LAYER_TAP_TOGGLE_MAX
 = 0x58FF,

70 
	mQK_LAYER_MOD
 = 0x5900,

71 
	mQK_LAYER_MOD_MAX
 = 0x59FF,

72 #ifde‡
STENO_ENABLE


73 
	mQK_STENO
 = 0x5A00,

74 
	mQK_STENO_BOLT
 = 0x5A30,

75 
	mQK_STENO_GEMINI
 = 0x5A31,

76 
	mQK_STENO_MAX
 = 0x5A3F,

78 #ifde‡
SWAP_HANDS_ENABLE


79 
	mQK_SWAP_HANDS
 = 0x5B00,

80 
	mQK_SWAP_HANDS_MAX
 = 0x5BFF,

82 
	mQK_MOD_TAP
 = 0x6000,

83 
	mQK_MOD_TAP_MAX
 = 0x7FFF,

84 #ifde‡
UNICODE_ENABLE


85 
	mQK_UNICODE
 = 0x8000,

86 
	mQK_UNICODE_MAX
 = 0xFFFF,

88 #ifde‡
UNICODEMAP_ENABLE


89 
	mQK_UNICODEMAP
 = 0x8000,

90 
	mQK_UNICODEMAP_MAX
 = 0xBFFF,

91 
	mQK_UNICODEMAP_PAIR
 = 0xC000,

92 
	mQK_UNICODEMAP_PAIR_MAX
 = 0xFFFF,

97 
	mRESET
 = 0x5C00,

98 
	mDEBUG
,

99 
	mMAGIC_SWAP_CONTROL_CAPSLOCK
,

100 
	mMAGIC_CAPSLOCK_TO_CONTROL
,

101 
	mMAGIC_SWAP_LALT_LGUI
,

102 
	mMAGIC_SWAP_RALT_RGUI
,

103 
	mMAGIC_NO_GUI
,

104 
	mMAGIC_SWAP_GRAVE_ESC
,

105 
	mMAGIC_SWAP_BACKSLASH_BACKSPACE
,

106 
	mMAGIC_HOST_NKRO
,

107 
	mMAGIC_SWAP_ALT_GUI
,

108 
	mMAGIC_UNSWAP_CONTROL_CAPSLOCK
,

109 
	mMAGIC_UNCAPSLOCK_TO_CONTROL
,

110 
	mMAGIC_UNSWAP_LALT_LGUI
,

111 
	mMAGIC_UNSWAP_RALT_RGUI
,

112 
	mMAGIC_UNNO_GUI
,

113 
	mMAGIC_UNSWAP_GRAVE_ESC
,

114 
	mMAGIC_UNSWAP_BACKSLASH_BACKSPACE
,

115 
	mMAGIC_UNHOST_NKRO
,

116 
	mMAGIC_UNSWAP_ALT_GUI
,

117 
	mMAGIC_TOGGLE_NKRO
,

118 
	mMAGIC_TOGGLE_ALT_GUI
,

119 
	mGRAVE_ESC
,

122 #ifde‡
LEADER_ENABLE


123 
	mKC_LEAD
,

127 #i‚de‡
AUTO_SHIFT_NO_SETUP


128 
	mKC_ASUP
,

129 
	mKC_ASDN
,

130 
	mKC_ASRP
,

132 
	mKC_ASTG
,

133 
	mKC_ASON
,

134 
	mKC_ASOFF
,

137 
	mAU_ON
,

138 
	mAU_OFF
,

139 
	mAU_TOG
,

142 
	mCLICKY_TOGGLE
,

143 
	mCLICKY_ENABLE
,

144 
	mCLICKY_DISABLE
,

145 
	mCLICKY_UP
,

146 
	mCLICKY_DOWN
,

147 
	mCLICKY_RESET
,

149 #ifde‡
FAUXCLICKY_ENABLE


151 
	mFC_ON
,

152 
	mFC_OFF
,

153 
	mFC_TOG
,

157 
	mMU_ON
,

158 
	mMU_OFF
,

159 
	mMU_TOG
,

162 
	mMU_MOD
,

165 
	mMUV_IN
,

166 
	mMUV_DE
,

169 #i‡!
MIDI_ENABLE_STRICT
 || (
deföed
(
MIDI_ENABLE
Ë&& deföed(
MIDI_BASIC
))

170 
	mMI_ON
,

171 
	mMI_OFF
,

172 
	mMI_TOG
,

175 #i‡!
MIDI_ENABLE_STRICT
 || (
deföed
(
MIDI_ENABLE
Ë&& deföed(
MIDI_ADVANCED
))

176 
	mMIDI_TONE_MIN
,

178 #i‡!
MIDI_ENABLE_STRICT
 || 
MIDI_TONE_KEYCODE_OCTAVES
 > 0

179 
	mMI_C
 = 
MIDI_TONE_MIN
,

180 
	mMI_Cs
,

181 
	mMI_Db
 = 
MI_Cs
,

182 
	mMI_D
,

183 
	mMI_Ds
,

184 
	mMI_Eb
 = 
MI_Ds
,

185 
	mMI_E
,

186 
	mMI_F
,

187 
	mMI_Fs
,

188 
	mMI_Gb
 = 
MI_Fs
,

189 
	mMI_G
,

190 
	mMI_Gs
,

191 
	mMI_Ab
 = 
MI_Gs
,

192 
	mMI_A
,

193 
	mMI_As
,

194 
	mMI_Bb
 = 
MI_As
,

195 
	mMI_B
,

198 #i‡!
MIDI_ENABLE_STRICT
 || 
MIDI_TONE_KEYCODE_OCTAVES
 > 1

199 
	mMI_C_1
,

200 
	mMI_Cs_1
,

201 
	mMI_Db_1
 = 
MI_Cs_1
,

202 
	mMI_D_1
,

203 
	mMI_Ds_1
,

204 
	mMI_Eb_1
 = 
MI_Ds_1
,

205 
	mMI_E_1
,

206 
	mMI_F_1
,

207 
	mMI_Fs_1
,

208 
	mMI_Gb_1
 = 
MI_Fs_1
,

209 
	mMI_G_1
,

210 
	mMI_Gs_1
,

211 
	mMI_Ab_1
 = 
MI_Gs_1
,

212 
	mMI_A_1
,

213 
	mMI_As_1
,

214 
	mMI_Bb_1
 = 
MI_As_1
,

215 
	mMI_B_1
,

218 #i‡!
MIDI_ENABLE_STRICT
 || 
MIDI_TONE_KEYCODE_OCTAVES
 > 2

219 
	mMI_C_2
,

220 
	mMI_Cs_2
,

221 
	mMI_Db_2
 = 
MI_Cs_2
,

222 
	mMI_D_2
,

223 
	mMI_Ds_2
,

224 
	mMI_Eb_2
 = 
MI_Ds_2
,

225 
	mMI_E_2
,

226 
	mMI_F_2
,

227 
	mMI_Fs_2
,

228 
	mMI_Gb_2
 = 
MI_Fs_2
,

229 
	mMI_G_2
,

230 
	mMI_Gs_2
,

231 
	mMI_Ab_2
 = 
MI_Gs_2
,

232 
	mMI_A_2
,

233 
	mMI_As_2
,

234 
	mMI_Bb_2
 = 
MI_As_2
,

235 
	mMI_B_2
,

238 #i‡!
MIDI_ENABLE_STRICT
 || 
MIDI_TONE_KEYCODE_OCTAVES
 > 3

239 
	mMI_C_3
,

240 
	mMI_Cs_3
,

241 
	mMI_Db_3
 = 
MI_Cs_3
,

242 
	mMI_D_3
,

243 
	mMI_Ds_3
,

244 
	mMI_Eb_3
 = 
MI_Ds_3
,

245 
	mMI_E_3
,

246 
	mMI_F_3
,

247 
	mMI_Fs_3
,

248 
	mMI_Gb_3
 = 
MI_Fs_3
,

249 
	mMI_G_3
,

250 
	mMI_Gs_3
,

251 
	mMI_Ab_3
 = 
MI_Gs_3
,

252 
	mMI_A_3
,

253 
	mMI_As_3
,

254 
	mMI_Bb_3
 = 
MI_As_3
,

255 
	mMI_B_3
,

258 #i‡!
MIDI_ENABLE_STRICT
 || 
MIDI_TONE_KEYCODE_OCTAVES
 > 4

259 
	mMI_C_4
,

260 
	mMI_Cs_4
,

261 
	mMI_Db_4
 = 
MI_Cs_4
,

262 
	mMI_D_4
,

263 
	mMI_Ds_4
,

264 
	mMI_Eb_4
 = 
MI_Ds_4
,

265 
	mMI_E_4
,

266 
	mMI_F_4
,

267 
	mMI_Fs_4
,

268 
	mMI_Gb_4
 = 
MI_Fs_4
,

269 
	mMI_G_4
,

270 
	mMI_Gs_4
,

271 
	mMI_Ab_4
 = 
MI_Gs_4
,

272 
	mMI_A_4
,

273 
	mMI_As_4
,

274 
	mMI_Bb_4
 = 
MI_As_4
,

275 
	mMI_B_4
,

278 #i‡!
MIDI_ENABLE_STRICT
 || 
MIDI_TONE_KEYCODE_OCTAVES
 > 5

279 
	mMI_C_5
,

280 
	mMI_Cs_5
,

281 
	mMI_Db_5
 = 
MI_Cs_5
,

282 
	mMI_D_5
,

283 
	mMI_Ds_5
,

284 
	mMI_Eb_5
 = 
MI_Ds_5
,

285 
	mMI_E_5
,

286 
	mMI_F_5
,

287 
	mMI_Fs_5
,

288 
	mMI_Gb_5
 = 
MI_Fs_5
,

289 
	mMI_G_5
,

290 
	mMI_Gs_5
,

291 
	mMI_Ab_5
 = 
MI_Gs_5
,

292 
	mMI_A_5
,

293 
	mMI_As_5
,

294 
	mMI_Bb_5
 = 
MI_As_5
,

295 
	mMI_B_5
,

298 #i‡!
MIDI_ENABLE_STRICT
 || 
MIDI_TONE_KEYCODE_OCTAVES
 > 5

299 
	mMIDI_TONE_MAX
 = 
MI_B_5
,

300 #ñi‡
MIDI_TONE_KEYCODE_OCTAVES
 > 4

301 
	mMIDI_TONE_MAX
 = 
MI_B_4
,

302 #ñi‡
MIDI_TONE_KEYCODE_OCTAVES
 > 3

303 
	mMIDI_TONE_MAX
 = 
MI_B_3
,

304 #ñi‡
MIDI_TONE_KEYCODE_OCTAVES
 > 2

305 
	mMIDI_TONE_MAX
 = 
MI_B_2
,

306 #ñi‡
MIDI_TONE_KEYCODE_OCTAVES
 > 1

307 
	mMIDI_TONE_MAX
 = 
MI_B_1
,

308 #ñi‡
MIDI_TONE_KEYCODE_OCTAVES
 > 0

309 
	mMIDI_TONE_MAX
 = 
MI_B
,

312 
	mMIDI_OCTAVE_MIN
,

313 
	mMI_OCT_N2
 = 
MIDI_OCTAVE_MIN
,

314 
	mMI_OCT_N1
,

315 
	mMI_OCT_0
,

316 
	mMI_OCT_1
,

317 
	mMI_OCT_2
,

318 
	mMI_OCT_3
,

319 
	mMI_OCT_4
,

320 
	mMI_OCT_5
,

321 
	mMI_OCT_6
,

322 
	mMI_OCT_7
,

323 
	mMIDI_OCTAVE_MAX
 = 
MI_OCT_7
,

324 
	mMI_OCTD
,

325 
	mMI_OCTU
,

327 
	mMIDI_TRANSPOSE_MIN
,

328 
	mMI_TRNS_N6
 = 
MIDI_TRANSPOSE_MIN
,

329 
	mMI_TRNS_N5
,

330 
	mMI_TRNS_N4
,

331 
	mMI_TRNS_N3
,

332 
	mMI_TRNS_N2
,

333 
	mMI_TRNS_N1
,

334 
	mMI_TRNS_0
,

335 
	mMI_TRNS_1
,

336 
	mMI_TRNS_2
,

337 
	mMI_TRNS_3
,

338 
	mMI_TRNS_4
,

339 
	mMI_TRNS_5
,

340 
	mMI_TRNS_6
,

341 
	mMIDI_TRANSPOSE_MAX
 = 
MI_TRNS_6
,

342 
	mMI_TRNSD
,

343 
	mMI_TRNSU
,

345 
	mMIDI_VELOCITY_MIN
,

346 
	mMI_VEL_1
 = 
MIDI_VELOCITY_MIN
,

347 
	mMI_VEL_2
,

348 
	mMI_VEL_3
,

349 
	mMI_VEL_4
,

350 
	mMI_VEL_5
,

351 
	mMI_VEL_6
,

352 
	mMI_VEL_7
,

353 
	mMI_VEL_8
,

354 
	mMI_VEL_9
,

355 
	mMI_VEL_10
,

356 
	mMIDI_VELOCITY_MAX
 = 
MI_VEL_10
,

357 
	mMI_VELD
,

358 
	mMI_VELU
,

360 
	mMIDI_CHANNEL_MIN
,

361 
	mMI_CH1
 = 
MIDI_CHANNEL_MIN
,

362 
	mMI_CH2
,

363 
	mMI_CH3
,

364 
	mMI_CH4
,

365 
	mMI_CH5
,

366 
	mMI_CH6
,

367 
	mMI_CH7
,

368 
	mMI_CH8
,

369 
	mMI_CH9
,

370 
	mMI_CH10
,

371 
	mMI_CH11
,

372 
	mMI_CH12
,

373 
	mMI_CH13
,

374 
	mMI_CH14
,

375 
	mMI_CH15
,

376 
	mMI_CH16
,

377 
	mMIDI_CHANNEL_MAX
 = 
MI_CH16
,

378 
	mMI_CHD
,

379 
	mMI_CHU
,

381 
	mMI_ALLOFF
,

383 
	mMI_SUS
,

384 
	mMI_PORT
,

385 
	mMI_SOST
,

386 
	mMI_SOFT
,

387 
	mMI_LEG
,

389 
	mMI_MOD
,

390 
	mMI_MODSD
,

391 
	mMI_MODSU
,

393 
	mMI_BENDD
,

394 
	mMI_BENDU
,

398 
	mBL_ON
,

399 
	mBL_OFF
,

400 
	mBL_DEC
,

401 
	mBL_INC
,

402 
	mBL_TOGG
,

403 
	mBL_STEP
,

404 
	mBL_BRTG
,

407 
	mRGB_TOG
,

408 
	mRGB_MODE_FORWARD
,

409 
	mRGB_MODE_REVERSE
,

410 
	mRGB_HUI
,

411 
	mRGB_HUD
,

412 
	mRGB_SAI
,

413 
	mRGB_SAD
,

414 
	mRGB_VAI
,

415 
	mRGB_VAD
,

416 
	mRGB_SPI
,

417 
	mRGB_SPD
,

418 
	mRGB_MODE_PLAIN
,

419 
	mRGB_MODE_BREATHE
,

420 
	mRGB_MODE_RAINBOW
,

421 
	mRGB_MODE_SWIRL
,

422 
	mRGB_MODE_SNAKE
,

423 
	mRGB_MODE_KNIGHT
,

424 
	mRGB_MODE_XMAS
,

425 
	mRGB_MODE_GRADIENT
,

426 
	mRGB_MODE_RGBTEST
,

429 
	mVLK_TOG
,

432 
	mKC_LSPO
,

435 
	mKC_RSPC
,

438 
	mKC_SFTENT
,

441 
	mPRINT_ON
,

442 
	mPRINT_OFF
,

445 
	mOUT_AUTO
,

446 
	mOUT_USB
,

447 #ifde‡
BLUETOOTH_ENABLE


448 
	mOUT_BT
,

451 #ifde‡
KEY_LOCK_ENABLE


452 
	mKC_LOCK
,

455 #ifde‡
TERMINAL_ENABLE


456 
	mTERM_ON
,

457 
	mTERM_OFF
,

460 
	mEEPROM_RESET
,

462 
	mUNICODE_MODE_FORWARD
,

463 
	mUNICODE_MODE_REVERSE
,

464 
	mUNICODE_MODE_MAC
,

465 
	mUNICODE_MODE_LNX
,

466 
	mUNICODE_MODE_WIN
,

467 
	mUNICODE_MODE_BSD
,

468 
	mUNICODE_MODE_WINC
,

470 
	mHPT_ON
,

471 
	mHPT_OFF
,

472 
	mHPT_TOG
,

473 
	mHPT_RST
,

474 
	mHPT_FBK
,

475 
	mHPT_BUZ
,

476 
	mHPT_MODI
,

477 
	mHPT_MODD
,

478 
	mHPT_CONT
,

479 
	mHPT_CONI
,

480 
	mHPT_COND
,

481 
	mHPT_DWLI
,

482 
	mHPT_DWLD
,

485 
	mKC_LCPO
,

488 
	mKC_RCPC
,

491 
	mKC_LAPO
,

494 
	mKC_RAPC
,

496 
	mCMB_ON
,

497 
	mCMB_OFF
,

498 
	mCMB_TOG
,

500 
	mMAGIC_SWAP_LCTL_LGUI
,

501 
	mMAGIC_SWAP_RCTL_RGUI
,

502 
	mMAGIC_UNSWAP_LCTL_LGUI
,

503 
	mMAGIC_UNSWAP_RCTL_RGUI
,

504 
	mMAGIC_SWAP_CTL_GUI
,

505 
	mMAGIC_UNSWAP_CTL_GUI
,

506 
	mMAGIC_TOGGLE_CTL_GUI
,

507 
	mMAGIC_EE_HANDS_LEFT
,

508 
	mMAGIC_EE_HANDS_RIGHT
,

511 
	mDYN_REC_START1
,

512 
	mDYN_REC_START2
,

513 
	mDYN_REC_STOP
,

514 
	mDYN_MACRO_PLAY1
,

515 
	mDYN_MACRO_PLAY2
,

517 
	mJS_BUTTON0
,

518 
	mJS_BUTTON_MIN
 = 
JS_BUTTON0
,

519 
	mJS_BUTTON1
,

520 
	mJS_BUTTON2
,

521 
	mJS_BUTTON3
,

522 
	mJS_BUTTON4
,

523 
	mJS_BUTTON5
,

524 
	mJS_BUTTON6
,

525 
	mJS_BUTTON7
,

526 
	mJS_BUTTON8
,

527 
	mJS_BUTTON9
,

528 
	mJS_BUTTON10
,

529 
	mJS_BUTTON11
,

530 
	mJS_BUTTON12
,

531 
	mJS_BUTTON13
,

532 
	mJS_BUTTON14
,

533 
	mJS_BUTTON15
,

534 
	mJS_BUTTON16
,

535 
	mJS_BUTTON17
,

536 
	mJS_BUTTON18
,

537 
	mJS_BUTTON19
,

538 
	mJS_BUTTON20
,

539 
	mJS_BUTTON21
,

540 
	mJS_BUTTON22
,

541 
	mJS_BUTTON23
,

542 
	mJS_BUTTON24
,

543 
	mJS_BUTTON25
,

544 
	mJS_BUTTON26
,

545 
	mJS_BUTTON27
,

546 
	mJS_BUTTON28
,

547 
	mJS_BUTTON29
,

548 
	mJS_BUTTON30
,

549 
	mJS_BUTTON31
,

550 
	mJS_BUTTON_MAX
 = 
JS_BUTTON31
,

553 
	mSAFE_RANGE


557 
	#LCTL
(
kc
Ë(
QK_LCTL
 | (kc))

	)

558 
	#LSFT
(
kc
Ë(
QK_LSFT
 | (kc))

	)

559 
	#LALT
(
kc
Ë(
QK_LALT
 | (kc))

	)

560 
	#LGUI
(
kc
Ë(
QK_LGUI
 | (kc))

	)

561 
	#LOPT
(
kc
Ë
	`LALT
(kc)

	)

562 
	#LCMD
(
kc
Ë
	`LGUI
(kc)

	)

563 
	#LWIN
(
kc
Ë
	`LGUI
(kc)

	)

564 
	#RCTL
(
kc
Ë(
QK_RCTL
 | (kc))

	)

565 
	#RSFT
(
kc
Ë(
QK_RSFT
 | (kc))

	)

566 
	#RALT
(
kc
Ë(
QK_RALT
 | (kc))

	)

567 
	#RGUI
(
kc
Ë(
QK_RGUI
 | (kc))

	)

568 
	#ALGR
(
kc
Ë
	`RALT
(kc)

	)

569 
	#ROPT
(
kc
Ë
	`RALT
(kc)

	)

570 
	#RCMD
(
kc
Ë
	`RGUI
(kc)

	)

571 
	#RWIN
(
kc
Ë
	`RGUI
(kc)

	)

573 
	#HYPR
(
kc
Ë(
QK_LCTL
 | 
QK_LSFT
 | 
QK_LALT
 | 
QK_LGUI
 | (kc))

	)

574 
	#MEH
(
kc
Ë(
QK_LCTL
 | 
QK_LSFT
 | 
QK_LALT
 | (kc))

	)

575 
	#LCAG
(
kc
Ë(
QK_LCTL
 | 
QK_LALT
 | 
QK_LGUI
 | (kc))

	)

576 
	#SGUI
(
kc
Ë(
QK_LGUI
 | 
QK_LSFT
 | (kc))

	)

577 
	#SCMD
(
kc
Ë
	`SGUI
(kc)

	)

578 
	#SWIN
(
kc
Ë
	`SGUI
(kc)

	)

579 
	#LCA
(
kc
Ë(
QK_LCTL
 | 
QK_LALT
 | (kc))

	)

580 
	#LSA
(
kc
Ë(
QK_LSFT
 | 
QK_LALT
 | (kc))

	)

581 
	#RSA
(
kc
Ë(
QK_RSFT
 | 
QK_RALT
 | (kc))

	)

582 
	#RCS
(
kc
Ë(
QK_RCTL
 | 
QK_RSFT
 | (kc))

	)

583 
	#SAGR
(
kc
Ë
	`RSA
(kc)

	)

585 
	#MOD_HYPR
 0xF

	)

586 
	#MOD_MEH
 0x7

	)

593 
	#KC_TILD
 
	`LSFT
(
KC_GRV
)

594 
	#KC_TILDE
 
KC_TILD


	)

596 
	#KC_EXLM
 
	`LSFT
(
KC_1
)

597 
	#KC_EXCLAIM
 
KC_EXLM


	)

599 
	#KC_AT
 
	`LSFT
(
KC_2
)

600 

	)

601 
	#KC_HASH
 
	`LSFT
(
KC_3
)

602 

	)

603 
	#KC_DLR
 
	`LSFT
(
KC_4
)

604 
	#KC_DOLLAR
 
KC_DLR


	)

606 
	#KC_PERC
 
	`LSFT
(
KC_5
)

607 
	#KC_PERCENT
 
KC_PERC


	)

609 
	#KC_CIRC
 
	`LSFT
(
KC_6
)

610 
	#KC_CIRCUMFLEX
 
KC_CIRC


	)

612 
	#KC_AMPR
 
	`LSFT
(
KC_7
)

613 
	#KC_AMPERSAND
 
KC_AMPR


	)

615 
	#KC_ASTR
 
	`LSFT
(
KC_8
)

616 
	#KC_ASTERISK
 
KC_ASTR


	)

618 
	#KC_LPRN
 
	`LSFT
(
KC_9
)

619 
	#KC_LEFT_PAREN
 
KC_LPRN


	)

621 
	#KC_RPRN
 
	`LSFT
(
KC_0
)

622 
	#KC_RIGHT_PAREN
 
KC_RPRN


	)

624 
	#KC_UNDS
 
	`LSFT
(
KC_MINS
)

625 
	#KC_UNDERSCORE
 
KC_UNDS


	)

627 
	#KC_PLUS
 
	`LSFT
(
KC_EQL
)

628 

	)

629 
	#KC_LCBR
 
	`LSFT
(
KC_LBRC
)

630 
	#KC_LEFT_CURLY_BRACE
 
KC_LCBR


	)

632 
	#KC_RCBR
 
	`LSFT
(
KC_RBRC
)

633 
	#KC_RIGHT_CURLY_BRACE
 
KC_RCBR


	)

635 
	#KC_LABK
 
	`LSFT
(
KC_COMM
)

636 
	#KC_LEFT_ANGLE_BRACKET
 
KC_LABK


	)

638 
	#KC_RABK
 
	`LSFT
(
KC_DOT
)

639 
	#KC_RIGHT_ANGLE_BRACKET
 
KC_RABK


	)

641 
	#KC_COLN
 
	`LSFT
(
KC_SCLN
)

642 
	#KC_COLON
 
KC_COLN


	)

644 
	#KC_PIPE
 
	`LSFT
(
KC_BSLS
)

645 

	)

646 
	#KC_LT
 
	`LSFT
(
KC_COMM
)

647 

	)

648 
	#KC_GT
 
	`LSFT
(
KC_DOT
)

649 

	)

650 
	#KC_QUES
 
	`LSFT
(
KC_SLSH
)

651 
	#KC_QUESTION
 
KC_QUES


	)

653 
	#KC_DQT
 
	`LSFT
(
KC_QUOT
)

654 
	#KC_DOUBLE_QUOTE
 
KC_DQT


	)

655 
	#KC_DQUO
 
KC_DQT


	)

657 
	#KC_DELT
 
KC_DELETE


658 

	)

660 
	#FUNC
(
kc
Ë(
QK_FUNCTION
 | (kc))

	)

663 
	#C
(
kc
Ë
	`LCTL
(kc)

	)

664 
	#S
(
kc
Ë
	`LSFT
(kc)

	)

665 
	#A
(
kc
Ë
	`LALT
(kc)

	)

666 
	#G
(
kc
Ë
	`LGUI
(kc)

	)

668 
	#F
(
kc
Ë
	`FUNC
(kc)

	)

669 
	#M
(
kc
Ë(
QK_MACRO
 | (kc))

	)

671 
	#MACROTAP
(
kc
Ë(
QK_MACRO
 | (
FUNC_TAP
 << 8Ë| (kc))

	)

672 
	#MACRODOWN
(...Ë(
ªc‹d
->
evít
.
¥es£d
 ? 
	`MACRO
(
__VA_ARGS__
Ë: 
MACRO_NONE
)

	)

674 
	#KC_GESC
 
GRAVE_ESC


	)

676 
	#EEP_RST
 
EEPROM_RESET


	)

678 
	#CK_TOGG
 
CLICKY_TOGGLE


	)

679 
	#CK_RST
 
CLICKY_RESET


	)

680 
	#CK_UP
 
CLICKY_UP


	)

681 
	#CK_DOWN
 
CLICKY_DOWN


	)

682 
	#CK_ON
 
CLICKY_ENABLE


	)

683 
	#CK_OFF
 
CLICKY_DISABLE


	)

685 
	#RGB_MOD
 
RGB_MODE_FORWARD


	)

686 
	#RGB_RMOD
 
RGB_MODE_REVERSE


	)

688 
	#RGB_M_P
 
RGB_MODE_PLAIN


	)

689 
	#RGB_M_B
 
RGB_MODE_BREATHE


	)

690 
	#RGB_M_R
 
RGB_MODE_RAINBOW


	)

691 
	#RGB_M_SW
 
RGB_MODE_SWIRL


	)

692 
	#RGB_M_SN
 
RGB_MODE_SNAKE


	)

693 
	#RGB_M_K
 
RGB_MODE_KNIGHT


	)

694 
	#RGB_M_X
 
RGB_MODE_XMAS


	)

695 
	#RGB_M_G
 
RGB_MODE_GRADIENT


	)

696 
	#RGB_M_T
 
RGB_MODE_RGBTEST


	)

699 
	#LT
(
œyî
, 
kc
Ë(
QK_LAYER_TAP
 | ((÷ayî)&0xFË<< 8Ë| ((kc)&0xFF))

	)

701 
	#CL_SWAP
 
MAGIC_SWAP_CONTROL_CAPSLOCK


	)

702 
	#CL_NORM
 
MAGIC_UNSWAP_CONTROL_CAPSLOCK


	)

703 
	#CL_CTRL
 
MAGIC_CAPSLOCK_TO_CONTROL


	)

704 
	#CL_CAPS
 
MAGIC_UNCAPSLOCK_TO_CONTROL


	)

706 
	#LCG_SWP
 
MAGIC_SWAP_LCTL_LGUI


	)

707 
	#LCG_NRM
 
MAGIC_UNSWAP_LCTL_LGUI


	)

708 
	#RCG_SWP
 
MAGIC_SWAP_RCTL_RGUI


	)

709 
	#RCG_NRM
 
MAGIC_UNSWAP_RCTL_RGUI


	)

710 
	#CG_SWAP
 
MAGIC_SWAP_CTL_GUI


	)

711 
	#CG_NORM
 
MAGIC_UNSWAP_CTL_GUI


	)

712 
	#CG_TOGG
 
MAGIC_TOGGLE_CTL_GUI


	)

714 
	#LAG_SWP
 
MAGIC_SWAP_LALT_LGUI


	)

715 
	#LAG_NRM
 
MAGIC_UNSWAP_LALT_LGUI


	)

716 
	#RAG_SWP
 
MAGIC_SWAP_RALT_RGUI


	)

717 
	#RAG_NRM
 
MAGIC_UNSWAP_RALT_RGUI


	)

718 
	#AG_SWAP
 
MAGIC_SWAP_ALT_GUI


	)

719 
	#AG_NORM
 
MAGIC_UNSWAP_ALT_GUI


	)

720 
	#AG_TOGG
 
MAGIC_TOGGLE_ALT_GUI


	)

722 
	#GUI_OFF
 
MAGIC_NO_GUI


	)

723 
	#GUI_ON
 
MAGIC_UNNO_GUI


	)

725 
	#GE_SWAP
 
MAGIC_SWAP_GRAVE_ESC


	)

726 
	#GE_NORM
 
MAGIC_UNSWAP_GRAVE_ESC


	)

728 
	#BS_SWAP
 
MAGIC_SWAP_BACKSLASH_BACKSPACE


	)

729 
	#BS_NORM
 
MAGIC_UNSWAP_BACKSLASH_BACKSPACE


	)

731 
	#NK_ON
 
MAGIC_HOST_NKRO


	)

732 
	#NK_OFF
 
MAGIC_UNHOST_NKRO


	)

733 
	#NK_TOGG
 
MAGIC_TOGGLE_NKRO


	)

735 
	#EH_LEFT
 
MAGIC_EE_HANDS_LEFT


	)

736 
	#EH_RGHT
 
MAGIC_EE_HANDS_RIGHT


	)

746 
	#TO
(
œyî
Ë(
QK_TO
 | (
ON_PRESS
 << 0x4Ë| (÷ayî)&0xFF))

	)

749 
	#MO
(
œyî
Ë(
QK_MOMENTARY
 | (÷ayî)&0xFF))

	)

752 
	#DF
(
œyî
Ë(
QK_DEF_LAYER
 | (÷ayî)&0xFF))

	)

755 
	#TG
(
œyî
Ë(
QK_TOGGLE_LAYER
 | (÷ayî)&0xFF))

	)

758 
	#OSL
(
œyî
Ë(
QK_ONE_SHOT_LAYER
 | (÷ayî)&0xFF))

	)

761 
	#LM
(
œyî
, 
mod
Ë(
QK_LAYER_MOD
 | ((÷ayî)&0xFË<< 4Ë| ((mod)&0xF))

	)

764 
	#OSM
(
mod
Ë(
QK_ONE_SHOT_MOD
 | ((mod)&0xFF))

	)

767 
	#TT
(
œyî
Ë(
QK_LAYER_TAP_TOGGLE
 | (÷ayî)&0xFF))

	)

770 
	#MT
(
mod
, 
kc
Ë(
QK_MOD_TAP
 | (((mod)&0x1FË<< 8Ë| ((kc)&0xFF))

	)

772 
	#LCTL_T
(
kc
Ë
	`MT
(
MOD_LCTL
, kc)

	)

773 
	#RCTL_T
(
kc
Ë
	`MT
(
MOD_RCTL
, kc)

	)

774 
	#CTL_T
(
kc
Ë
	`LCTL_T
(kc)

	)

776 
	#LSFT_T
(
kc
Ë
	`MT
(
MOD_LSFT
, kc)

	)

777 
	#RSFT_T
(
kc
Ë
	`MT
(
MOD_RSFT
, kc)

	)

778 
	#SFT_T
(
kc
Ë
	`LSFT_T
(kc)

	)

780 
	#LALT_T
(
kc
Ë
	`MT
(
MOD_LALT
, kc)

	)

781 
	#RALT_T
(
kc
Ë
	`MT
(
MOD_RALT
, kc)

	)

782 
	#LOPT_T
(
kc
Ë
	`LALT_T
(kc)

	)

783 
	#ROPT_T
(
kc
Ë
	`RALT_T
(kc)

	)

784 
	#ALGR_T
(
kc
Ë
	`RALT_T
(kc)

	)

785 
	#ALT_T
(
kc
Ë
	`LALT_T
(kc)

	)

786 
	#OPT_T
(
kc
Ë
	`LOPT_T
(kc)

	)

788 
	#LGUI_T
(
kc
Ë
	`MT
(
MOD_LGUI
, kc)

	)

789 
	#RGUI_T
(
kc
Ë
	`MT
(
MOD_RGUI
, kc)

	)

790 
	#LCMD_T
(
kc
Ë
	`LGUI_T
(kc)

	)

791 
	#LWIN_T
(
kc
Ë
	`LGUI_T
(kc)

	)

792 
	#RCMD_T
(
kc
Ë
	`RGUI_T
(kc)

	)

793 
	#RWIN_T
(
kc
Ë
	`RGUI_T
(kc)

	)

794 
	#GUI_T
(
kc
Ë
	`LGUI_T
(kc)

	)

795 
	#CMD_T
(
kc
Ë
	`LCMD_T
(kc)

	)

796 
	#WIN_T
(
kc
Ë
	`LWIN_T
(kc)

	)

798 
	#C_S_T
(
kc
Ë
	`MT
(
MOD_LCTL
 | 
MOD_LSFT
, kc)

799 
	#MEH_T
(
kc
Ë
	`MT
(
MOD_LCTL
 | 
MOD_LSFT
 | 
MOD_LALT
, kc)

800 
	#LCAG_T
(
kc
Ë
	`MT
(
MOD_LCTL
 | 
MOD_LALT
 | 
MOD_LGUI
, kc)

801 
	#RCAG_T
(
kc
Ë
	`MT
(
MOD_RCTL
 | 
MOD_RALT
 | 
MOD_RGUI
, kc)

802 
	#HYPR_T
(
kc
Ë
	`MT
(
MOD_LCTL
 | 
MOD_LSFT
 | 
MOD_LALT
 | 
MOD_LGUI
, kc)

803 
	#SGUI_T
(
kc
Ë
	`MT
(
MOD_LGUI
 | 
MOD_LSFT
, kc)

804 
	#SCMD_T
(
kc
Ë
	`SGUI_T
(kc)

	)

805 
	#SWIN_T
(
kc
Ë
	`SGUI_T
(kc)

	)

806 
	#LCA_T
(
kc
Ë
	`MT
(
MOD_LCTL
 | 
MOD_LALT
, kc)

807 
	#LSA_T
(
kc
Ë
	`MT
(
MOD_LSFT
 | 
MOD_LALT
, kc)

808 
	#RSA_T
(
kc
Ë
	`MT
(
MOD_RSFT
 | 
MOD_RALT
, kc)

809 
	#RCS_T
(
kc
Ë
	`MT
(
MOD_RCTL
 | 
MOD_RSFT
, kc)

810 
	#SAGR_T
(
kc
Ë
	`RSA_T
(kc)

	)

812 
	#ALL_T
(
kc
Ë
	`HYPR_T
(kc)

	)

815 
	#KC_HYPR
 
	`HYPR
(
KC_NO
)

	)

816 
	#KC_MEH
 
	`MEH
(
KC_NO
)

	)

818 #ifde‡
UNICODE_ENABLE


820 
	#UC
(
c
Ë(
QK_UNICODE
 | (c))

	)

822 #ifde‡
UNICODEMAP_ENABLE


824 
	#X
(
i
Ë(
QK_UNICODEMAP
 | (i))

	)

825 
	#XP
(
i
, 
j
Ë(
QK_UNICODEMAP_PAIR
 | ((i)&0x7F) | (((j)&0x7F) << 7))

827 

	)

828 
	#UC_MOD
 
UNICODE_MODE_FORWARD


	)

829 
	#UC_RMOD
 
UNICODE_MODE_REVERSE


	)

831 
	#UC_M_MA
 
UNICODE_MODE_MAC


	)

832 
	#UNICODE_MODE_OSX
 
UNICODE_MODE_MAC


833 
	#UC_M_OS
 
UNICODE_MODE_MAC


834 
	#UC_M_LN
 
UNICODE_MODE_LNX


	)

835 
	#UC_M_WI
 
UNICODE_MODE_WIN


	)

836 
	#UC_M_BS
 
UNICODE_MODE_BSD


	)

837 
	#UC_M_WC
 
UNICODE_MODE_WINC


	)

839 #ifde‡
SWAP_HANDS_ENABLE


840 
	#SH_T
(
kc
Ë(
QK_SWAP_HANDS
 | (kc))

	)

841 
	#SH_TG
 (
QK_SWAP_HANDS
 | 
OP_SH_TOGGLE
)

	)

842 
	#SH_TT
 (
QK_SWAP_HANDS
 | 
OP_SH_TAP_TOGGLE
)

	)

843 
	#SH_OS
 (
QK_SWAP_HANDS
 | 
OP_SH_ONESHOT
)

	)

844 
	#SH_MON
 (
QK_SWAP_HANDS
 | 
OP_SH_ON_OFF
)

	)

845 
	#SH_MOFF
 (
QK_SWAP_HANDS
 | 
OP_SH_OFF_ON
)

	)

846 
	#SH_ON
 (
QK_SWAP_HANDS
 | 
OP_SH_ON
)

	)

847 
	#SH_OFF
 (
QK_SWAP_HANDS
 | 
OP_SH_OFF
)

	)

851 
	#DM_REC1
 
DYN_REC_START1


	)

852 
	#DM_REC2
 
DYN_REC_START2


	)

853 
	#DM_RSTP
 
DYN_REC_STOP


	)

854 
	#DM_PLY1
 
DYN_MACRO_PLAY1


	)

855 
	#DM_PLY2
 
DYN_MACRO_PLAY2


	)

	@rgb.h

17 #i‚de‡
RGB_H


18 
	#RGB_H


	)

20 
__©åibuã__
((
wók
)Ë
	$rgblight_toggÀ
(){
	}
};

22 
__©åibuã__
((
wók
)Ë
	$rgblight_°ï
(){
	}
};

24 
__©åibuã__
((
wók
)Ë
	$rgblight_°ï_ªvî£
(){
	}
};

26 
__©åibuã__
((
wók
)Ë
	$rgblight_ö¸ó£_hue
(){
	}
};

28 
__©åibuã__
((
wók
)Ë
	$rgblight_de¸ó£_hue
(){
	}
};

30 
__©åibuã__
((
wók
)Ë
	$rgblight_ö¸ó£_ßt
(){
	}
};

32 
__©åibuã__
((
wók
)Ë
	$rgblight_de¸ó£_ßt
(){
	}
};

34 
__©åibuã__
((
wók
)Ë
	$rgblight_ö¸ó£_vÆ
(){
	}
};

36 
__©åibuã__
((
wók
)Ë
	$rgblight_de¸ó£_vÆ
(){
	}
};

38 
__©åibuã__
((
wók
)Ë
	$rgblight_ö¸ó£_•ìd
(){
	}
};

40 
__©åibuã__
((
wók
)Ë
	$rgblight_de¸ó£_•ìd
(){
	}
};

	@rgb_matrix.c

19 
	~"rgb_m©rix.h
"

20 
	~"¥ogmem.h
"

21 
	~"c⁄fig.h
"

22 
	~"ì¥om.h
"

23 
	~<°rög.h
>

24 
	~<m©h.h
>

26 
	~"lib/lib8ti⁄/lib8ti⁄.h
"

28 #i‚de‡
RGB_MATRIX_CENTER


29 c⁄° 
poöt_t
 
	gk_rgb_m©rix_˚¡î
 = {112, 32};

31 c⁄° 
poöt_t
 
	gk_rgb_m©rix_˚¡î
 = 
RGB_MATRIX_CENTER
;

35 
	~"rgb_m©rix_ru¬îs/ef„˘_ru¬î_dx_dy_di°.h
"

36 
	~"rgb_m©rix_ru¬îs/ef„˘_ru¬î_dx_dy.h
"

37 
	~"rgb_m©rix_ru¬îs/ef„˘_ru¬î_i.h
"

38 
	~"rgb_m©rix_ru¬îs/ef„˘_ru¬î_sö_cos_i.h
"

39 
	~"rgb_m©rix_ru¬îs/ef„˘_ru¬î_ªa˘ive.h
"

40 
	~"rgb_m©rix_ru¬îs/ef„˘_ru¬î_ªa˘ive_•œsh.h
"

44 
	#RGB_MATRIX_EFFECT
(
«me
)

	)

45 
	#RGB_MATRIX_CUSTOM_EFFECT_IMPLS


	)

47 
	~"rgb_m©rix_™im©i⁄s/rgb_m©rix_ef„˘s.öc
"

48 #ifde‡
RGB_MATRIX_CUSTOM_KB


49 
	~"rgb_m©rix_kb.öc
"

51 #ifde‡
RGB_MATRIX_CUSTOM_USER


52 
	~"rgb_m©rix_u£r.öc
"

55 #unde‡
RGB_MATRIX_CUSTOM_EFFECT_IMPLS


56 #unde‡
RGB_MATRIX_EFFECT


60 #i‡
deföed
(
RGB_DISABLE_AFTER_TIMEOUT
Ë&& !deföed(
RGB_DISABLE_TIMEOUT
)

61 
	#RGB_DISABLE_TIMEOUT
 (
RGB_DISABLE_AFTER_TIMEOUT
 * 1200UL)

	)

64 #i‚de‡
RGB_DISABLE_TIMEOUT


65 
	#RGB_DISABLE_TIMEOUT
 0

	)

68 #i‚de‡
RGB_DISABLE_WHEN_USB_SUSPENDED


69 
	#RGB_DISABLE_WHEN_USB_SUSPENDED
 
Ál£


	)

72 #i‡!
deföed
(
RGB_MATRIX_MAXIMUM_BRIGHTNESS
Ë|| RGB_MATRIX_MAXIMUM_BRIGHTNESS > 
UINT8_MAX


73 #unde‡
RGB_MATRIX_MAXIMUM_BRIGHTNESS


74 
	#RGB_MATRIX_MAXIMUM_BRIGHTNESS
 
UINT8_MAX


	)

77 #i‡!
deföed
(
RGB_MATRIX_HUE_STEP
)

78 
	#RGB_MATRIX_HUE_STEP
 8

	)

81 #i‡!
deföed
(
RGB_MATRIX_SAT_STEP
)

82 
	#RGB_MATRIX_SAT_STEP
 16

	)

85 #i‡!
deföed
(
RGB_MATRIX_VAL_STEP
)

86 
	#RGB_MATRIX_VAL_STEP
 16

	)

89 #i‡!
deföed
(
RGB_MATRIX_SPD_STEP
)

90 
	#RGB_MATRIX_SPD_STEP
 16

	)

93 #i‡!
deföed
(
RGB_MATRIX_STARTUP_MODE
)

94 #i‚de‡
DISABLE_RGB_MATRIX_CYCLE_LEFT_RIGHT


95 
	#RGB_MATRIX_STARTUP_MODE
 
RGB_MATRIX_CYCLE_LEFT_RIGHT


	)

98 
	#RGB_MATRIX_STARTUP_MODE
 
RGB_MATRIX_SOLID_COLOR


	)

102 #i‡!
deföed
(
RGB_MATRIX_STARTUP_HUE
)

103 
	#RGB_MATRIX_STARTUP_HUE
 0

	)

106 #i‡!
deföed
(
RGB_MATRIX_STARTUP_SAT
)

107 
	#RGB_MATRIX_STARTUP_SAT
 
UINT8_MAX


	)

110 #i‡!
deföed
(
RGB_MATRIX_STARTUP_VAL
)

111 
	#RGB_MATRIX_STARTUP_VAL
 
RGB_MATRIX_MAXIMUM_BRIGHTNESS


	)

114 #i‡!
deföed
(
RGB_MATRIX_STARTUP_SPD
)

115 
	#RGB_MATRIX_STARTUP_SPD
 
UINT8_MAX
 / 2

	)

119 
boﬁ
 
	gg_su•íd_°©e
 = 
Ál£
;

120 
rgb_c⁄fig_t
 
	grgb_m©rix_c⁄fig
;

121 
uöt32_t
 
	gg_rgb_timî
;

122 #ifde‡
RGB_MATRIX_FRAMEBUFFER_EFFECTS


123 
uöt8_t
 
	gg_rgb_‰ame_buf„r
[
MATRIX_ROWS
][
MATRIX_COLS
] = {{0}};

125 #ifde‡
RGB_MATRIX_KEYREACTIVE_ENABLED


126 
œ°_hô_t
 
	gg_œ°_hô_åackî
;

130 
uöt8_t
 
	grgb_œ°_íabÀ
 = 
UINT8_MAX
;

131 
uöt8_t
 
	grgb_œ°_ef„˘
 = 
UINT8_MAX
;

132 
ef„˘_∑øms_t
 
	grgb_ef„˘_∑øms
 = {0, 0xFF};

133 
rgb_èsk_°©es
 
	grgb_èsk_°©e
 = 
SYNCING
;

134 #i‡
RGB_DISABLE_TIMEOUT
 > 0

135 
uöt32_t
 
	grgb_™ykey_timî
;

139 
uöt32_t
 
	grgb_timî_buf„r
;

140 #ifde‡
RGB_MATRIX_KEYREACTIVE_ENABLED


141 
œ°_hô_t
 
	gœ°_hô_buf„r
;

144 
	$ìc⁄fig_ªad_rgb_m©rix
(Ë{ 
	`ì¥om_ªad_block
(&
rgb_m©rix_c⁄fig
, 
EECONFIG_RGB_MATRIX
, ‘gb_m©rix_c⁄fig)); 
	}
}

146 
	$ìc⁄fig_upd©e_rgb_m©rix
(Ë{ 
	`ì¥om_upd©e_block
(&
rgb_m©rix_c⁄fig
, 
EECONFIG_RGB_MATRIX
, ‘gb_m©rix_c⁄fig)); 
	}
}

148 
	$ìc⁄fig_upd©e_rgb_m©rix_deÁu…
() {

149 
	`d¥ötf
("eeconfig_update_rgb_matrix_default\n");

150 
rgb_m©rix_c⁄fig
.
íabÀ
 = 1;

151 
rgb_m©rix_c⁄fig
.
mode
 = 
RGB_MATRIX_STARTUP_MODE
;

152 
rgb_m©rix_c⁄fig
.
hsv
 = (
HSV
){
RGB_MATRIX_STARTUP_HUE
, 
RGB_MATRIX_STARTUP_SAT
, 
RGB_MATRIX_STARTUP_VAL
};

153 
rgb_m©rix_c⁄fig
.
•ìd
 = 
RGB_MATRIX_STARTUP_SPD
;

154 
	`ìc⁄fig_upd©e_rgb_m©rix
();

155 
	}
}

157 
	$ìc⁄fig_debug_rgb_m©rix
() {

158 
	`d¥ötf
("rgb_matrix_config EEPROM\n");

159 
	`d¥ötf
("rgb_m©rix_c⁄fig.íabÀ = %d\n", 
rgb_m©rix_c⁄fig
.
íabÀ
);

160 
	`d¥ötf
("rgb_m©rix_c⁄fig.modê%d\n", 
rgb_m©rix_c⁄fig
.
mode
);

161 
	`d¥ötf
("rgb_m©rix_c⁄fig.hsv.h = %d\n", 
rgb_m©rix_c⁄fig
.
hsv
.
h
);

162 
	`d¥ötf
("rgb_m©rix_c⁄fig.hsv.†%d\n", 
rgb_m©rix_c⁄fig
.
hsv
.
s
);

163 
	`d¥ötf
("rgb_m©rix_c⁄fig.hsv.v = %d\n", 
rgb_m©rix_c⁄fig
.
hsv
.
v
);

164 
	`d¥ötf
("rgb_m©rix_c⁄fig.•ìd = %d\n", 
rgb_m©rix_c⁄fig
.
•ìd
);

165 
	}
}

167 
__©åibuã__
((
wók
)Ë
uöt8_t
 
	$rgb_m©rix_m≠_row_cﬁumn_to_Àd_kb
(
uöt8_t
 
row
, uöt8_à
cﬁumn
, uöt8_à*
Àd_i
Ë{  0; 
	}
}

169 
uöt8_t
 
	$rgb_m©rix_m≠_row_cﬁumn_to_Àd
(
uöt8_t
 
row
, uöt8_à
cﬁumn
, uöt8_à*
Àd_i
) {

170 
uöt8_t
 
Àd_cou¡
 = 
	`rgb_m©rix_m≠_row_cﬁumn_to_Àd_kb
(
row
, 
cﬁumn
, 
Àd_i
);

171 
uöt8_t
 
Àd_ödex
 = 
g_Àd_c⁄fig
.
m©rix_co
[
row
][
cﬁumn
];

172 i‡(
Àd_ödex
 !
NO_LED
) {

173 
Àd_i
[
Àd_cou¡
] = 
Àd_ödex
;

174 
Àd_cou¡
++;

176  
Àd_cou¡
;

177 
	}
}

179 
	$rgb_m©rix_upd©e_pwm_buf„rs
(Ë{ 
rgb_m©rix_drivî
.
	`Êush
(); 
	}
}

181 
	$rgb_m©rix_£t_cﬁ‹
(
ödex
, 
uöt8_t
 
ªd
, uöt8_à
gªí
, uöt8_à
blue
Ë{ 
rgb_m©rix_drivî
.
	`£t_cﬁ‹
(ödex,Ñed, gªí, blue); 
	}
}

183 
	$rgb_m©rix_£t_cﬁ‹_Æl
(
uöt8_t
 
ªd
, uöt8_à
gªí
, uöt8_à
blue
Ë{ 
rgb_m©rix_drivî
.
	`£t_cﬁ‹_Æl
‘ed, gªí, blue); 
	}
}

185 
boﬁ
 
	$¥o˚ss_rgb_m©rix
(
uöt16_t
 
keycode
, 
keyªc‹d_t
 *
ªc‹d
) {

186 #i‡
RGB_DISABLE_TIMEOUT
 > 0

187 i‡(
ªc‹d
->
evít
.
¥es£d
) {

188 
rgb_™ykey_timî
 = 0;

192 #ifde‡
RGB_MATRIX_KEYREACTIVE_ENABLED


193 
uöt8_t
 
Àd
[
LED_HITS_TO_REMEMBER
];

194 
uöt8_t
 
Àd_cou¡
 = 0;

196 #i‡
	`deföed
(
RGB_MATRIX_KEYRELEASES
)

197 i‡(!
ªc‹d
->
evít
.
¥es£d
)

198 #ñi‡
	`deföed
(
RGB_MATRIX_KEYPRESSES
)

199 i‡(
ªc‹d
->
evít
.
¥es£d
)

202 
Àd_cou¡
 = 
	`rgb_m©rix_m≠_row_cﬁumn_to_Àd
(
ªc‹d
->
evít
.
key
.
row
,Ñec‹d->evít.key.
cﬁ
, 
Àd
);

205 i‡(
œ°_hô_buf„r
.
cou¡
 + 
Àd_cou¡
 > 
LED_HITS_TO_REMEMBER
) {

206 
	`mem˝y
(&
œ°_hô_buf„r
.
x
[0], &œ°_hô_buf„r.x[
Àd_cou¡
], 
LED_HITS_TO_REMEMBER
 -Üed_count);

207 
	`mem˝y
(&
œ°_hô_buf„r
.
y
[0], &œ°_hô_buf„r.y[
Àd_cou¡
], 
LED_HITS_TO_REMEMBER
 -Üed_count);

208 
	`mem˝y
(&
œ°_hô_buf„r
.
tick
[0], &œ°_hô_buf„r.tick[
Àd_cou¡
], (
LED_HITS_TO_REMEMBER
 -Üed_count) * 2);

209 
	`mem˝y
(&
œ°_hô_buf„r
.
ödex
[0], &œ°_hô_buf„r.ödex[
Àd_cou¡
], 
LED_HITS_TO_REMEMBER
 -Üed_count);

210 
œ°_hô_buf„r
.
cou¡
--;

213 
uöt8_t
 
i
 = 0; i < 
Àd_cou¡
; i++) {

214 
uöt8_t
 
ödex
 = 
œ°_hô_buf„r
.
cou¡
;

215 
œ°_hô_buf„r
.
x
[
ödex
] = 
g_Àd_c⁄fig
.
poöt
[
Àd
[
i
]].x;

216 
œ°_hô_buf„r
.
y
[
ödex
] = 
g_Àd_c⁄fig
.
poöt
[
Àd
[
i
]].y;

217 
œ°_hô_buf„r
.
ödex
[ödex] = 
Àd
[
i
];

218 
œ°_hô_buf„r
.
tick
[
ödex
] = 0;

219 
œ°_hô_buf„r
.
cou¡
++;

223 #i‡
	`deföed
(
RGB_MATRIX_FRAMEBUFFER_EFFECTS
Ë&& !deföed(
DISABLE_RGB_MATRIX_TYPING_HEATMAP
)

224 i‡(
rgb_m©rix_c⁄fig
.
mode
 =
RGB_MATRIX_TYPING_HEATMAP
) {

225 
	`¥o˚ss_rgb_m©rix_typög_hótm≠
(
ªc‹d
);

229  
åue
;

230 
	}
}

232 
	$rgb_m©rix_ã°
() {

235 
uöt8_t
 
Á˘‹
 = 10;

236 (
g_rgb_timî
 & (0b11 << 
Á˘‹
)) >> factor) {

238 
	`rgb_m©rix_£t_cﬁ‹_Æl
(20, 0, 0);

242 
	`rgb_m©rix_£t_cﬁ‹_Æl
(0, 20, 0);

246 
	`rgb_m©rix_£t_cﬁ‹_Æl
(0, 0, 20);

250 
	`rgb_m©rix_£t_cﬁ‹_Æl
(20, 20, 20);

254 
	}
}

256 
boﬁ
 
	$rgb_m©rix_n⁄e
(
ef„˘_∑øms_t
 *
∑øms
) {

257 i‡(!
∑øms
->
öô
) {

258  
Ál£
;

261 
	`rgb_m©rix_£t_cﬁ‹_Æl
(0, 0, 0);

262  
Ál£
;

263 
	}
}

265 
	$rgb_èsk_timîs
() {

266 #i‡
	`deföed
(
RGB_MATRIX_KEYREACTIVE_ENABLED
Ë|| 
RGB_DISABLE_TIMEOUT
 > 0

267 
uöt32_t
 
dñèTime
 = 
	`timî_ñ≠£d32
(
rgb_timî_buf„r
);

269 
rgb_timî_buf„r
 = 
	`timî_ªad32
();

272 #i‡
RGB_DISABLE_TIMEOUT
 > 0

273 i‡(
rgb_™ykey_timî
 < 
UINT32_MAX
) {

274 i‡(
UINT32_MAX
 - 
dñèTime
 < 
rgb_™ykey_timî
) {

275 
rgb_™ykey_timî
 = 
UINT32_MAX
;

277 
rgb_™ykey_timî
 +
dñèTime
;

283 #ifde‡
RGB_MATRIX_KEYREACTIVE_ENABLED


284 
uöt8_t
 
cou¡
 = 
œ°_hô_buf„r
.count;

285 
uöt8_t
 
i
 = 0; i < 
cou¡
; ++i) {

286 i‡(
UINT16_MAX
 - 
dñèTime
 < 
œ°_hô_buf„r
.
tick
[
i
]) {

287 
œ°_hô_buf„r
.
cou¡
--;

290 
œ°_hô_buf„r
.
tick
[
i
] +
dñèTime
;

293 
	}
}

295 
	$rgb_èsk_sync
() {

297 i‡(
	`timî_ñ≠£d32
(
g_rgb_timî
Ë>
RGB_MATRIX_LED_FLUSH_LIMIT
Ë
rgb_èsk_°©e
 = 
STARTING
;

298 
	}
}

300 
	$rgb_èsk_°¨t
() {

302 
rgb_ef„˘_∑øms
.
ôî
 = 0;

305 
g_rgb_timî
 = 
rgb_timî_buf„r
;

306 #ifde‡
RGB_MATRIX_KEYREACTIVE_ENABLED


307 
g_œ°_hô_åackî
 = 
œ°_hô_buf„r
;

311 
rgb_èsk_°©e
 = 
RENDERING
;

312 
	}
}

314 
	$rgb_èsk_ªndî
(
uöt8_t
 
ef„˘
) {

315 
boﬁ
 
ªndîög
 = 
Ál£
;

316 
rgb_ef„˘_∑øms
.
öô
 = (
ef„˘
 !
rgb_œ°_ef„˘
Ë|| (
rgb_m©rix_c⁄fig
.
íabÀ
 !
rgb_œ°_íabÀ
);

320 
ef„˘
) {

321 
RGB_MATRIX_NONE
:

322 
ªndîög
 = 
	`rgb_m©rix_n⁄e
(&
rgb_ef„˘_∑øms
);

327 
	#RGB_MATRIX_EFFECT
(
«me
, ...) \

328 
RGB_MATRIX_
##
«me
: \

329 
ªndîög
 = 
	`«me
(&
rgb_ef„˘_∑øms
); \

330 ;

	)

331 
	~"rgb_m©rix_™im©i⁄s/rgb_m©rix_ef„˘s.öc
"

332 #unde‡
RGB_MATRIX_EFFECT


334 #i‡
	`deföed
(
RGB_MATRIX_CUSTOM_KB
Ë|| deföed(
RGB_MATRIX_CUSTOM_USER
)

335 
	#RGB_MATRIX_EFFECT
(
«me
, ...) \

336 
RGB_MATRIX_CUSTOM_
##
«me
: \

337 
ªndîög
 = 
	`«me
(&
rgb_ef„˘_∑øms
); \

338 ;

	)

339 #ifde‡
RGB_MATRIX_CUSTOM_KB


340 
	~"rgb_m©rix_kb.öc
"

342 #ifde‡
RGB_MATRIX_CUSTOM_USER


343 
	~"rgb_m©rix_u£r.öc
"

345 #unde‡
RGB_MATRIX_EFFECT


351 
UINT8_MAX
: {

352 
	`rgb_m©rix_ã°
();

353 
rgb_èsk_°©e
 = 
FLUSHING
;

358 
rgb_ef„˘_∑øms
.
ôî
++;

361 i‡(!
ªndîög
) {

362 
rgb_èsk_°©e
 = 
FLUSHING
;

363 i‡(!
rgb_ef„˘_∑øms
.
öô
 && 
ef„˘
 =
RGB_MATRIX_NONE
) {

365 
rgb_èsk_°©e
 = 
SYNCING
;

368 
	}
}

370 
	$rgb_èsk_Êush
(
uöt8_t
 
ef„˘
) {

372 
rgb_œ°_ef„˘
 = 
ef„˘
;

373 
rgb_œ°_íabÀ
 = 
rgb_m©rix_c⁄fig
.
íabÀ
;

376 
	`rgb_m©rix_upd©e_pwm_buf„rs
();

379 
rgb_èsk_°©e
 = 
SYNCING
;

380 
	}
}

382 
	$rgb_m©rix_èsk
() {

383 
	`rgb_èsk_timîs
();

387 
boﬁ
 
su•íd_backlight
 =

388 #i‡
RGB_DISABLE_WHEN_USB_SUSPENDED
 =
åue


389 
g_su•íd_°©e
 ||

391 #i‡
RGB_DISABLE_TIMEOUT
 > 0

392 (
rgb_™ykey_timî
 > (
uöt32_t
)
RGB_DISABLE_TIMEOUT
) ||

394 
Ál£
;

396 
uöt8_t
 
ef„˘
 = 
su•íd_backlight
 || !
rgb_m©rix_c⁄fig
.
íabÀ
 ? 0 :Ñgb_m©rix_c⁄fig.
mode
;

398 
rgb_èsk_°©e
) {

399 
STARTING
:

400 
	`rgb_èsk_°¨t
();

402 
RENDERING
:

403 
	`rgb_èsk_ªndî
(
ef„˘
);

405 
FLUSHING
:

406 
	`rgb_èsk_Êush
(
ef„˘
);

408 
SYNCING
:

409 
	`rgb_èsk_sync
();

413 i‡(!
su•íd_backlight
) {

414 
	`rgb_m©rix_ödiˇt‹s
();

416 
	}
}

418 
	$rgb_m©rix_ödiˇt‹s
() {

419 
	`rgb_m©rix_ödiˇt‹s_kb
();

420 
	`rgb_m©rix_ödiˇt‹s_u£r
();

421 
	}
}

423 
__©åibuã__
((
wók
)Ë
	$rgb_m©rix_ödiˇt‹s_kb
(Ë{
	}
}

425 
__©åibuã__
((
wók
)Ë
	$rgb_m©rix_ödiˇt‹s_u£r
(Ë{
	}
}

427 
	$rgb_m©rix_öô
() {

428 
rgb_m©rix_drivî
.
	`öô
();

430 #ifde‡
RGB_MATRIX_KEYREACTIVE_ENABLED


431 
g_œ°_hô_åackî
.
cou¡
 = 0;

432 
uöt8_t
 
i
 = 0; i < 
LED_HITS_TO_REMEMBER
; ++i) {

433 
g_œ°_hô_åackî
.
tick
[
i
] = 
UINT16_MAX
;

436 
œ°_hô_buf„r
.
cou¡
 = 0;

437 
uöt8_t
 
i
 = 0; i < 
LED_HITS_TO_REMEMBER
; ++i) {

438 
œ°_hô_buf„r
.
tick
[
i
] = 
UINT16_MAX
;

442 i‡(!
	`ìc⁄fig_is_íabÀd
()) {

443 
	`d¥ötf
("rgb_matrix_init_driversÉeconfig isÇotÉnabled.\n");

444 
	`ìc⁄fig_öô
();

445 
	`ìc⁄fig_upd©e_rgb_m©rix_deÁu…
();

448 
	`ìc⁄fig_ªad_rgb_m©rix
();

449 i‡(!
rgb_m©rix_c⁄fig
.
mode
) {

450 
	`d¥ötf
("rgb_matrix_init_driversÑgb_matrix_config.mode = 0. Write default valuesÅo EEPROM.\n");

451 
	`ìc⁄fig_upd©e_rgb_m©rix_deÁu…
();

453 
	`ìc⁄fig_debug_rgb_m©rix
();

454 
	}
}

456 
	$rgb_m©rix_£t_su•íd_°©e
(
boﬁ
 
°©e
) {

457 i‡(
RGB_DISABLE_WHEN_USB_SUSPENDED
 && 
°©e
) {

458 
	`rgb_m©rix_£t_cﬁ‹_Æl
(0, 0, 0);

460 
g_su•íd_°©e
 = 
°©e
;

461 
	}
}

463 
boﬁ
 
	$rgb_m©rix_gë_su•íd_°©e
(Ë{  
g_su•íd_°©e
; 
	}
}

465 
	$rgb_m©rix_toggÀ_ì¥om_hñ≥r
(
boﬁ
 
wrôe_to_ì¥om
) {

466 
rgb_m©rix_c⁄fig
.
íabÀ
 ^= 1;

467 
rgb_èsk_°©e
 = 
STARTING
;

468 i‡(
wrôe_to_ì¥om
) {

469 
	`ìc⁄fig_upd©e_rgb_m©rix
();

471 
	`d¥ötf
("rgb m©rixÅoggÀ [%s]:Ñgb_m©rix_c⁄fig.íabÀ = %u\n", (
wrôe_to_ì¥om
Ë? "EEPROM" : "NOEEPROM", 
rgb_m©rix_c⁄fig
.
íabÀ
);

472 
	}
}

473 
	$rgb_m©rix_toggÀ_n€ïrom
(Ë{ 
	`rgb_m©rix_toggÀ_ì¥om_hñ≥r
(
Ál£
); 
	}
}

474 
	$rgb_m©rix_toggÀ
(Ë{ 
	`rgb_m©rix_toggÀ_ì¥om_hñ≥r
(
åue
); 
	}
}

476 
	$rgb_m©rix_íabÀ
() {

477 
	`rgb_m©rix_íabÀ_n€ïrom
();

478 
	`ìc⁄fig_upd©e_rgb_m©rix
();

479 
	}
}

481 
	$rgb_m©rix_íabÀ_n€ïrom
() {

482 i‡(!
rgb_m©rix_c⁄fig
.
íabÀ
Ë
rgb_èsk_°©e
 = 
STARTING
;

483 
rgb_m©rix_c⁄fig
.
íabÀ
 = 1;

484 
	}
}

486 
	$rgb_m©rix_dißbÀ
() {

487 
	`rgb_m©rix_dißbÀ_n€ïrom
();

488 
	`ìc⁄fig_upd©e_rgb_m©rix
();

489 
	}
}

491 
	$rgb_m©rix_dißbÀ_n€ïrom
() {

492 i‡(
rgb_m©rix_c⁄fig
.
íabÀ
Ë
rgb_èsk_°©e
 = 
STARTING
;

493 
rgb_m©rix_c⁄fig
.
íabÀ
 = 0;

494 
	}
}

496 
uöt8_t
 
	$rgb_m©rix_is_íabÀd
(Ë{  
rgb_m©rix_c⁄fig
.
íabÀ
; 
	}
}

498 
	$rgb_m©rix_mode_ì¥om_hñ≥r
(
uöt8_t
 
mode
, 
boﬁ
 
wrôe_to_ì¥om
) {

499 i‡(!
rgb_m©rix_c⁄fig
.
íabÀ
) {

502 i‡(
mode
 < 1) {

503 
rgb_m©rix_c⁄fig
.
mode
 = 1;

504 } i‡(
mode
 >
RGB_MATRIX_EFFECT_MAX
) {

505 
rgb_m©rix_c⁄fig
.
mode
 = 
RGB_MATRIX_EFFECT_MAX
 - 1;

507 
rgb_m©rix_c⁄fig
.
mode
 = mode;

509 
rgb_èsk_°©e
 = 
STARTING
;

510 i‡(
wrôe_to_ì¥om
) {

511 
	`ìc⁄fig_upd©e_rgb_m©rix
();

513 
	`d¥ötf
("rgb m©rix modê[%s]: %u\n", (
wrôe_to_ì¥om
Ë? "EEPROM" : "NOEEPROM", 
rgb_m©rix_c⁄fig
.
mode
);

514 
	}
}

515 
	$rgb_m©rix_mode_n€ïrom
(
uöt8_t
 
mode
Ë{ 
	`rgb_m©rix_mode_ì¥om_hñ≥r
(mode, 
Ál£
); 
	}
}

516 
	$rgb_m©rix_mode
(
uöt8_t
 
mode
Ë{ 
	`rgb_m©rix_mode_ì¥om_hñ≥r
(mode, 
åue
); 
	}
}

518 
uöt8_t
 
	$rgb_m©rix_gë_mode
(Ë{  
rgb_m©rix_c⁄fig
.
mode
; 
	}
}

520 
	$rgb_m©rix_°ï_hñ≥r
(
boﬁ
 
wrôe_to_ì¥om
) {

521 
uöt8_t
 
mode
 = 
rgb_m©rix_c⁄fig
.mode + 1;

522 
	`rgb_m©rix_mode_ì¥om_hñ≥r
((
mode
 < 
RGB_MATRIX_EFFECT_MAX
Ë? modê: 1, 
wrôe_to_ì¥om
);

523 
	}
}

524 
	$rgb_m©rix_°ï_n€ïrom
(Ë{ 
	`rgb_m©rix_°ï_hñ≥r
(
Ál£
); 
	}
}

525 
	$rgb_m©rix_°ï
(Ë{ 
	`rgb_m©rix_°ï_hñ≥r
(
åue
); 
	}
}

527 
	$rgb_m©rix_°ï_ªvî£_hñ≥r
(
boﬁ
 
wrôe_to_ì¥om
) {

528 
uöt8_t
 
mode
 = 
rgb_m©rix_c⁄fig
.mode - 1;

529 
	`rgb_m©rix_mode_ì¥om_hñ≥r
((
mode
 < 1Ë? 
RGB_MATRIX_EFFECT_MAX
 - 1 : mode, 
wrôe_to_ì¥om
);

530 
	}
}

531 
	$rgb_m©rix_°ï_ªvî£_n€ïrom
(Ë{ 
	`rgb_m©rix_°ï_ªvî£_hñ≥r
(
Ál£
); 
	}
}

532 
	$rgb_m©rix_°ï_ªvî£
(Ë{ 
	`rgb_m©rix_°ï_ªvî£_hñ≥r
(
åue
); 
	}
}

534 
	$rgb_m©rix_£thsv_ì¥om_hñ≥r
(
uöt16_t
 
hue
, 
uöt8_t
 
ßt
, uöt8_à
vÆ
, 
boﬁ
 
wrôe_to_ì¥om
) {

535 i‡(!
rgb_m©rix_c⁄fig
.
íabÀ
) {

538 
rgb_m©rix_c⁄fig
.
hsv
.
h
 = 
hue
;

539 
rgb_m©rix_c⁄fig
.
hsv
.
s
 = 
ßt
;

540 
rgb_m©rix_c⁄fig
.
hsv
.
v
 = (
vÆ
 > 
RGB_MATRIX_MAXIMUM_BRIGHTNESS
) ? RGB_MATRIX_MAXIMUM_BRIGHTNESS : val;

541 i‡(
wrôe_to_ì¥om
) {

542 
	`ìc⁄fig_upd©e_rgb_m©rix
();

544 
	`d¥ötf
("rgb m©rix së hsv [%s]: %u,%u,%u\n", (
wrôe_to_ì¥om
Ë? "EEPROM" : "NOEEPROM", 
rgb_m©rix_c⁄fig
.
hsv
.
h
,Ñgb_m©rix_c⁄fig.hsv.
s
,Ñgb_m©rix_c⁄fig.hsv.
v
);

545 
	}
}

546 
	$rgb_m©rix_£thsv_n€ïrom
(
uöt16_t
 
hue
, 
uöt8_t
 
ßt
, uöt8_à
vÆ
Ë{ 
	`rgb_m©rix_£thsv_ì¥om_hñ≥r
(hue, s©, vÆ, 
Ál£
); 
	}
}

547 
	$rgb_m©rix_£thsv
(
uöt16_t
 
hue
, 
uöt8_t
 
ßt
, uöt8_à
vÆ
Ë{ 
	`rgb_m©rix_£thsv_ì¥om_hñ≥r
(hue, s©, vÆ, 
åue
); 
	}
}

549 
HSV
 
	$rgb_m©rix_gë_hsv
(Ë{  
rgb_m©rix_c⁄fig
.
hsv
; 
	}
}

550 
uöt8_t
 
	$rgb_m©rix_gë_hue
(Ë{  
rgb_m©rix_c⁄fig
.
hsv
.
h
; 
	}
}

551 
uöt8_t
 
	$rgb_m©rix_gë_ßt
(Ë{  
rgb_m©rix_c⁄fig
.
hsv
.
s
; 
	}
}

552 
uöt8_t
 
	$rgb_m©rix_gë_vÆ
(Ë{  
rgb_m©rix_c⁄fig
.
hsv
.
v
; 
	}
}

554 
	$rgb_m©rix_ö¸ó£_hue_hñ≥r
(
boﬁ
 
wrôe_to_ì¥om
Ë{ 
	`rgb_m©rix_£thsv_ì¥om_hñ≥r
(
rgb_m©rix_c⁄fig
.
hsv
.
h
 + 
RGB_MATRIX_HUE_STEP
,Ñgb_m©rix_c⁄fig.hsv.
s
,Ñgb_m©rix_c⁄fig.hsv.
v
, wrôe_to_ì¥om); 
	}
}

555 
	$rgb_m©rix_ö¸ó£_hue_n€ïrom
(Ë{ 
	`rgb_m©rix_ö¸ó£_hue_hñ≥r
(
Ál£
); 
	}
}

556 
	$rgb_m©rix_ö¸ó£_hue
(Ë{ 
	`rgb_m©rix_ö¸ó£_hue_hñ≥r
(
åue
); 
	}
}

558 
	$rgb_m©rix_de¸ó£_hue_hñ≥r
(
boﬁ
 
wrôe_to_ì¥om
Ë{ 
	`rgb_m©rix_£thsv_ì¥om_hñ≥r
(
rgb_m©rix_c⁄fig
.
hsv
.
h
 - 
RGB_MATRIX_HUE_STEP
,Ñgb_m©rix_c⁄fig.hsv.
s
,Ñgb_m©rix_c⁄fig.hsv.
v
, wrôe_to_ì¥om); 
	}
}

559 
	$rgb_m©rix_de¸ó£_hue_n€ïrom
(Ë{ 
	`rgb_m©rix_de¸ó£_hue_hñ≥r
(
Ál£
); 
	}
}

560 
	$rgb_m©rix_de¸ó£_hue
(Ë{ 
	`rgb_m©rix_de¸ó£_hue_hñ≥r
(
åue
); 
	}
}

562 
	$rgb_m©rix_ö¸ó£_ßt_hñ≥r
(
boﬁ
 
wrôe_to_ì¥om
Ë{ 
	`rgb_m©rix_£thsv_ì¥om_hñ≥r
(
rgb_m©rix_c⁄fig
.
hsv
.
h
, 
	`qadd8
‘gb_m©rix_c⁄fig.hsv.
s
, 
RGB_MATRIX_SAT_STEP
),Ñgb_m©rix_c⁄fig.hsv.
v
, wrôe_to_ì¥om); 
	}
}

563 
	$rgb_m©rix_ö¸ó£_ßt_n€ïrom
(Ë{ 
	`rgb_m©rix_ö¸ó£_ßt_hñ≥r
(
Ál£
); 
	}
}

564 
	$rgb_m©rix_ö¸ó£_ßt
(Ë{ 
	`rgb_m©rix_ö¸ó£_ßt_hñ≥r
(
åue
); 
	}
}

566 
	$rgb_m©rix_de¸ó£_ßt_hñ≥r
(
boﬁ
 
wrôe_to_ì¥om
Ë{ 
	`rgb_m©rix_£thsv_ì¥om_hñ≥r
(
rgb_m©rix_c⁄fig
.
hsv
.
h
, 
	`qsub8
‘gb_m©rix_c⁄fig.hsv.
s
, 
RGB_MATRIX_SAT_STEP
),Ñgb_m©rix_c⁄fig.hsv.
v
, wrôe_to_ì¥om); 
	}
}

567 
	$rgb_m©rix_de¸ó£_ßt_n€ïrom
(Ë{ 
	`rgb_m©rix_de¸ó£_ßt_hñ≥r
(
Ál£
); 
	}
}

568 
	$rgb_m©rix_de¸ó£_ßt
(Ë{ 
	`rgb_m©rix_de¸ó£_ßt_hñ≥r
(
åue
); 
	}
}

570 
	$rgb_m©rix_ö¸ó£_vÆ_hñ≥r
(
boﬁ
 
wrôe_to_ì¥om
Ë{ 
	`rgb_m©rix_£thsv_ì¥om_hñ≥r
(
rgb_m©rix_c⁄fig
.
hsv
.
h
,Ñgb_m©rix_c⁄fig.hsv.
s
, 
	`qadd8
‘gb_m©rix_c⁄fig.hsv.
v
, 
RGB_MATRIX_VAL_STEP
), wrôe_to_ì¥om); 
	}
}

571 
	$rgb_m©rix_ö¸ó£_vÆ_n€ïrom
(Ë{ 
	`rgb_m©rix_ö¸ó£_vÆ_hñ≥r
(
Ál£
); 
	}
}

572 
	$rgb_m©rix_ö¸ó£_vÆ
(Ë{ 
	`rgb_m©rix_ö¸ó£_vÆ_hñ≥r
(
åue
); 
	}
}

574 
	$rgb_m©rix_de¸ó£_vÆ_hñ≥r
(
boﬁ
 
wrôe_to_ì¥om
Ë{ 
	`rgb_m©rix_£thsv_ì¥om_hñ≥r
(
rgb_m©rix_c⁄fig
.
hsv
.
h
,Ñgb_m©rix_c⁄fig.hsv.
s
, 
	`qsub8
‘gb_m©rix_c⁄fig.hsv.
v
, 
RGB_MATRIX_VAL_STEP
), wrôe_to_ì¥om); 
	}
}

575 
	$rgb_m©rix_de¸ó£_vÆ_n€ïrom
(Ë{ 
	`rgb_m©rix_de¸ó£_vÆ_hñ≥r
(
Ál£
); 
	}
}

576 
	$rgb_m©rix_de¸ó£_vÆ
(Ë{ 
	`rgb_m©rix_de¸ó£_vÆ_hñ≥r
(
åue
); 
	}
}

578 
	$rgb_m©rix_£t_•ìd_ì¥om_hñ≥r
(
uöt8_t
 
•ìd
, 
boﬁ
 
wrôe_to_ì¥om
) {

579 
rgb_m©rix_c⁄fig
.
•ìd
 = speed;

580 i‡(
wrôe_to_ì¥om
) {

581 
	`ìc⁄fig_upd©e_rgb_m©rix
();

583 
	`d¥ötf
("rgb m©rix së s≥ed [%s]: %u\n", (
wrôe_to_ì¥om
Ë? "EEPROM" : "NOEEPROM", 
rgb_m©rix_c⁄fig
.
•ìd
);

584 
	}
}

585 
	$rgb_m©rix_£t_•ìd_n€ïrom
(
uöt8_t
 
•ìd
Ë{ 
	`rgb_m©rix_£t_•ìd_ì¥om_hñ≥r
(•ìd, 
Ál£
); 
	}
}

586 
	$rgb_m©rix_£t_•ìd
(
uöt8_t
 
•ìd
Ë{ 
	`rgb_m©rix_£t_•ìd_ì¥om_hñ≥r
(•ìd, 
åue
); 
	}
}

588 
uöt8_t
 
	$rgb_m©rix_gë_•ìd
(Ë{  
rgb_m©rix_c⁄fig
.
•ìd
; 
	}
}

590 
	$rgb_m©rix_ö¸ó£_•ìd_hñ≥r
(
boﬁ
 
wrôe_to_ì¥om
Ë{ 
	`rgb_m©rix_£t_•ìd_ì¥om_hñ≥r
(
	`qadd8
(
rgb_m©rix_c⁄fig
.
•ìd
, 
RGB_MATRIX_SPD_STEP
), wrôe_to_ì¥om); 
	}
}

591 
	$rgb_m©rix_ö¸ó£_•ìd_n€ïrom
(Ë{ 
	`rgb_m©rix_ö¸ó£_•ìd_hñ≥r
(
Ál£
); 
	}
}

592 
	$rgb_m©rix_ö¸ó£_•ìd
(Ë{ 
	`rgb_m©rix_ö¸ó£_•ìd_hñ≥r
(
åue
); 
	}
}

594 
	$rgb_m©rix_de¸ó£_•ìd_hñ≥r
(
boﬁ
 
wrôe_to_ì¥om
Ë{ 
	`rgb_m©rix_£t_•ìd_ì¥om_hñ≥r
(
	`qsub8
(
rgb_m©rix_c⁄fig
.
•ìd
, 
RGB_MATRIX_SPD_STEP
), wrôe_to_ì¥om); 
	}
}

595 
	$rgb_m©rix_de¸ó£_•ìd_n€ïrom
(Ë{ 
	`rgb_m©rix_de¸ó£_•ìd_hñ≥r
(
Ál£
); 
	}
}

596 
	$rgb_m©rix_de¸ó£_•ìd
(Ë{ 
	`rgb_m©rix_de¸ó£_•ìd_hñ≥r
(
åue
); 
	}
}

598 
Àd_Êags_t
 
	$rgb_m©rix_gë_Êags
(Ë{  
rgb_ef„˘_∑øms
.
Êags
; 
	}
}

600 
	$rgb_m©rix_£t_Êags
(
Àd_Êags_t
 
Êags
Ë{ 
rgb_ef„˘_∑øms
.Êag†Êags; 
	}
}

	@rgb_matrix.h

19 #i‚de‡
RGB_MATRIX_H


20 
	#RGB_MATRIX_H


	)

22 
	~<°döt.h
>

23 
	~<°dboﬁ.h
>

24 
	~"rgb_m©rix_ty≥s.h
"

25 
	~"cﬁ‹.h
"

26 
	~"qu™tum.h
"

27 
	~"rgblight_li°.h
"

29 #ifde‡
IS31FL3731


30 
	~"is31Ê3731.h
"

31 #ñi‡
deföed
(
IS31FL3733
)

32 
	~"is31Ê3733.h
"

33 #ñi‡
deföed
(
IS31FL3737
)

34 
	~"is31Ê3737.h
"

35 #ñi‡
deföed
(
IS31FL3741
)

36 
	~"is31Ê3741.h
"

37 #ñi‡
deföed
(
WS2812
)

38 
	~"ws2812.h
"

41 #i‚de‡
RGB_MATRIX_LED_FLUSH_LIMIT


42 
	#RGB_MATRIX_LED_FLUSH_LIMIT
 16

	)

45 #i‚de‡
RGB_MATRIX_LED_PROCESS_LIMIT


46 
	#RGB_MATRIX_LED_PROCESS_LIMIT
 (
DRIVER_LED_TOTAL
 + 4Ë/ 5

	)

49 #i‡
deföed
(
RGB_MATRIX_LED_PROCESS_LIMIT
Ë&& RGB_MATRIX_LED_PROCESS_LIMIT > 0 && RGB_MATRIX_LED_PROCESS_LIMIT < 
DRIVER_LED_TOTAL


50 
	#RGB_MATRIX_USE_LIMITS
(
mö
, 
max
) \

51 
uöt8_t
 
mö
 = 
RGB_MATRIX_LED_PROCESS_LIMIT
 * 
∑øms
->
ôî
; \

52 
uöt8_t
 
max
 = 
mö
 + 
RGB_MATRIX_LED_PROCESS_LIMIT
; \

53 i‡(
max
 > 
DRIVER_LED_TOTAL
Ëmax = DRIVER_LED_TOTAL;

	)

55 
	#RGB_MATRIX_USE_LIMITS
(
mö
, 
max
) \

56 
uöt8_t
 
mö
 = 0; \

57 
uöt8_t
 
max
 = 
DRIVER_LED_TOTAL
;

	)

60 
	#RGB_MATRIX_TEST_LED_FLAGS
() \

61 i‡(!
	`HAS_ANY_FLAGS
(
g_Àd_c⁄fig
.
Êags
[
i
], 
∑øms
->Êags)Ë

	)

63 
	ergb_m©rix_ef„˘s
 {

64 
	mRGB_MATRIX_NONE
 = 0,

68 
	#RGB_MATRIX_EFFECT
(
«me
, ...Ë
RGB_MATRIX_
##«me,

	)

69 
	~"rgb_m©rix_™im©i⁄s/rgb_m©rix_ef„˘s.öc
"

70 #unde‡
RGB_MATRIX_EFFECT


72 #i‡
deföed
(
RGB_MATRIX_CUSTOM_KB
Ë|| deföed(
RGB_MATRIX_CUSTOM_USER
)

73 
	#RGB_MATRIX_EFFECT
(
«me
, ...Ë
RGB_MATRIX_CUSTOM_
##«me,

	)

74 #ifde‡
RGB_MATRIX_CUSTOM_KB


75 
	~"rgb_m©rix_kb.öc
"

77 #ifde‡
RGB_MATRIX_CUSTOM_USER


78 
	~"rgb_m©rix_u£r.öc
"

80 #unde‡
RGB_MATRIX_EFFECT


85 
	mRGB_MATRIX_EFFECT_MAX


88 
ìc⁄fig_upd©e_rgb_m©rix_deÁu…
();

90 
uöt8_t
 
rgb_m©rix_m≠_row_cﬁumn_to_Àd_kb
(uöt8_à
row
, uöt8_à
cﬁumn
, uöt8_à*
Àd_i
);

91 
uöt8_t
 
rgb_m©rix_m≠_row_cﬁumn_to_Àd
(uöt8_à
row
, uöt8_à
cﬁumn
, uöt8_à*
Àd_i
);

93 
rgb_m©rix_£t_cﬁ‹
(
ödex
, 
uöt8_t
 
ªd
, uöt8_à
gªí
, uöt8_à
blue
);

94 
rgb_m©rix_£t_cﬁ‹_Æl
(
uöt8_t
 
ªd
, uöt8_à
gªí
, uöt8_à
blue
);

96 
boﬁ
 
¥o˚ss_rgb_m©rix
(
uöt16_t
 
keycode
, 
keyªc‹d_t
 *
ªc‹d
);

98 
rgb_m©rix_èsk
();

102 
rgb_m©rix_ödiˇt‹s
();

103 
rgb_m©rix_ödiˇt‹s_kb
();

104 
rgb_m©rix_ödiˇt‹s_u£r
();

106 
rgb_m©rix_öô
();

108 
rgb_m©rix_£t_su•íd_°©e
(
boﬁ
 
°©e
);

109 
boﬁ
 
rgb_m©rix_gë_su•íd_°©e
();

110 
rgb_m©rix_toggÀ
();

111 
rgb_m©rix_toggÀ_n€ïrom
();

112 
rgb_m©rix_íabÀ
();

113 
rgb_m©rix_íabÀ_n€ïrom
();

114 
rgb_m©rix_dißbÀ
();

115 
rgb_m©rix_dißbÀ_n€ïrom
();

116 
uöt8_t
 
rgb_m©rix_is_íabÀd
();

117 
rgb_m©rix_mode
(
uöt8_t
 
mode
);

118 
rgb_m©rix_mode_n€ïrom
(
uöt8_t
 
mode
);

119 
uöt8_t
 
rgb_m©rix_gë_mode
();

120 
rgb_m©rix_°ï
();

121 
rgb_m©rix_°ï_n€ïrom
();

122 
rgb_m©rix_°ï_ªvî£
();

123 
rgb_m©rix_°ï_ªvî£_n€ïrom
();

124 
rgb_m©rix_£thsv
(
uöt16_t
 
hue
, 
uöt8_t
 
ßt
, uöt8_à
vÆ
);

125 
rgb_m©rix_£thsv_n€ïrom
(
uöt16_t
 
hue
, 
uöt8_t
 
ßt
, uöt8_à
vÆ
);

126 
HSV
 
rgb_m©rix_gë_hsv
();

127 
uöt8_t
 
rgb_m©rix_gë_hue
();

128 
uöt8_t
 
rgb_m©rix_gë_ßt
();

129 
uöt8_t
 
rgb_m©rix_gë_vÆ
();

130 
rgb_m©rix_ö¸ó£_hue
();

131 
rgb_m©rix_ö¸ó£_hue_n€ïrom
();

132 
rgb_m©rix_de¸ó£_hue
();

133 
rgb_m©rix_de¸ó£_hue_n€ïrom
();

134 
rgb_m©rix_ö¸ó£_ßt
();

135 
rgb_m©rix_ö¸ó£_ßt_n€ïrom
();

136 
rgb_m©rix_de¸ó£_ßt
();

137 
rgb_m©rix_de¸ó£_ßt_n€ïrom
();

138 
rgb_m©rix_ö¸ó£_vÆ
();

139 
rgb_m©rix_ö¸ó£_vÆ_n€ïrom
();

140 
rgb_m©rix_de¸ó£_vÆ
();

141 
rgb_m©rix_de¸ó£_vÆ_n€ïrom
();

142 
rgb_m©rix_£t_•ìd
(
uöt8_t
 
•ìd
);

143 
rgb_m©rix_£t_•ìd_n€ïrom
(
uöt8_t
 
•ìd
);

144 
uöt8_t
 
rgb_m©rix_gë_•ìd
();

145 
rgb_m©rix_ö¸ó£_•ìd
();

146 
rgb_m©rix_ö¸ó£_•ìd_n€ïrom
();

147 
rgb_m©rix_de¸ó£_•ìd
();

148 
rgb_m©rix_de¸ó£_•ìd_n€ïrom
();

149 
Àd_Êags_t
 
rgb_m©rix_gë_Êags
();

150 
rgb_m©rix_£t_Êags
(
Àd_Êags_t
 
Êags
);

152 #i‚de‡
RGBLIGHT_ENABLE


153 
	#rgblight_toggÀ
 
rgb_m©rix_toggÀ


	)

154 
	#rgblight_toggÀ_n€ïrom
 
rgb_m©rix_toggÀ_n€ïrom


	)

155 
	#rgblight_íabÀ
 
rgb_m©rix_íabÀ


	)

156 
	#rgblight_íabÀ_n€ïrom
 
rgb_m©rix_íabÀ_n€ïrom


	)

157 
	#rgblight_dißbÀ
 
rgb_m©rix_dißbÀ


	)

158 
	#rgblight_dißbÀ_n€ïrom
 
rgb_m©rix_dißbÀ_n€ïrom


	)

159 
	#rgblight_is_íabÀd
 
rgb_m©rix_is_íabÀd


	)

160 
	#rgblight_mode
 
rgb_m©rix_mode


	)

161 
	#rgblight_mode_n€ïrom
 
rgb_m©rix_mode_n€ïrom


	)

162 
	#rgblight_gë_mode
 
rgb_m©rix_gë_mode


	)

163 
	#rgblight_gë_hue
 
rgb_m©rix_gë_hue


	)

164 
	#rgblight_gë_ßt
 
rgb_m©rix_gë_ßt


	)

165 
	#rgblight_gë_vÆ
 
rgb_m©rix_gë_vÆ


	)

166 
	#rgblight_gë_hsv
 
rgb_m©rix_gë_hsv


	)

167 
	#rgblight_°ï
 
rgb_m©rix_°ï


	)

168 
	#rgblight_°ï_n€ïrom
 
rgb_m©rix_°ï_n€ïrom


	)

169 
	#rgblight_°ï_ªvî£
 
rgb_m©rix_°ï_ªvî£


	)

170 
	#rgblight_°ï_ªvî£_n€ïrom
 
rgb_m©rix_°ï_ªvî£_n€ïrom


	)

171 
	#rgblight_£thsv
 
rgb_m©rix_£thsv


	)

172 
	#rgblight_£thsv_n€ïrom
 
rgb_m©rix_£thsv_n€ïrom


	)

173 
	#rgblight_ö¸ó£_hue
 
rgb_m©rix_ö¸ó£_hue


	)

174 
	#rgblight_ö¸ó£_hue_n€ïrom
 
rgb_m©rix_ö¸ó£_hue_n€ïrom


	)

175 
	#rgblight_de¸ó£_hue
 
rgb_m©rix_de¸ó£_hue


	)

176 
	#rgblight_de¸ó£_hue_n€ïrom
 
rgb_m©rix_de¸ó£_hue_n€ïrom


	)

177 
	#rgblight_ö¸ó£_ßt
 
rgb_m©rix_ö¸ó£_ßt


	)

178 
	#rgblight_ö¸ó£_ßt_n€ïrom
 
rgb_m©rix_ö¸ó£_ßt_n€ïrom


	)

179 
	#rgblight_de¸ó£_ßt
 
rgb_m©rix_de¸ó£_ßt


	)

180 
	#rgblight_de¸ó£_ßt_n€ïrom
 
rgb_m©rix_de¸ó£_ßt_n€ïrom


	)

181 
	#rgblight_ö¸ó£_vÆ
 
rgb_m©rix_ö¸ó£_vÆ


	)

182 
	#rgblight_ö¸ó£_vÆ_n€ïrom
 
rgb_m©rix_ö¸ó£_vÆ_n€ïrom


	)

183 
	#rgblight_de¸ó£_vÆ
 
rgb_m©rix_de¸ó£_vÆ


	)

184 
	#rgblight_de¸ó£_vÆ_n€ïrom
 
rgb_m©rix_de¸ó£_vÆ_n€ïrom


	)

185 
	#rgblight_£t_•ìd
 
rgb_m©rix_£t_•ìd


	)

186 
	#rgblight_£t_•ìd_n€ïrom
 
rgb_m©rix_£t_•ìd_n€ïrom


	)

187 
	#rgblight_gë_•ìd
 
rgb_m©rix_gë_•ìd


	)

188 
	#rgblight_ö¸ó£_•ìd
 
rgb_m©rix_ö¸ó£_•ìd


	)

189 
	#rgblight_ö¸ó£_•ìd_n€ïrom
 
rgb_m©rix_ö¸ó£_•ìd_n€ïrom


	)

190 
	#rgblight_de¸ó£_•ìd
 
rgb_m©rix_de¸ó£_•ìd


	)

191 
	#rgblight_de¸ó£_•ìd_n€ïrom
 
rgb_m©rix_de¸ó£_•ìd_n€ïrom


	)

196 (*
	möô
)();

198 (*
	m£t_cﬁ‹
)(
	mödex
, 
uöt8_t
 
	mr
, uöt8_à
	mg
, uöt8_à
	mb
);

200 (*
	m£t_cﬁ‹_Æl
)(
uöt8_t
 
	mr
, uöt8_à
	mg
, uöt8_à
	mb
);

202 (*
	mÊush
)();

203 } 
	trgb_m©rix_drivî_t
;

205 c⁄° 
rgb_m©rix_drivî_t
 
rgb_m©rix_drivî
;

207 
rgb_c⁄fig_t
 
rgb_m©rix_c⁄fig
;

209 
boﬁ
 
g_su•íd_°©e
;

210 
uöt32_t
 
g_rgb_timî
;

211 
Àd_c⁄fig_t
 
g_Àd_c⁄fig
;

212 #ifde‡
RGB_MATRIX_KEYREACTIVE_ENABLED


213 
œ°_hô_t
 
g_œ°_hô_åackî
;

215 #ifde‡
RGB_MATRIX_FRAMEBUFFER_EFFECTS


216 
uöt8_t
 
g_rgb_‰ame_buf„r
[
MATRIX_ROWS
][
MATRIX_COLS
];

	@rgb_matrix_drivers.c

17 
	~"rgb_m©rix.h
"

26 #i‡
deföed
(
IS31FL3731
Ë|| deföed(
IS31FL3733
Ë|| deföed(
IS31FL3737
Ë|| deföed(
IS31FL3741
)

28 
	~"i2c_ma°î.h
"

30 
	$öô
() {

31 
	`i2c_öô
();

32 #ifde‡
IS31FL3731


33 
	`IS31FL3731_öô
(
DRIVER_ADDR_1
);

34 #ifde‡
DRIVER_ADDR_2


35 
	`IS31FL3731_öô
(
DRIVER_ADDR_2
);

37 #ñi‡
	`deföed
(
IS31FL3733
)

38 
	`IS31FL3733_öô
(
DRIVER_ADDR_1
, 0);

39 #ñi‡
	`deföed
(
IS31FL3737
)

40 
	`IS31FL3737_öô
(
DRIVER_ADDR_1
);

42 
	`IS31FL3741_öô
(
DRIVER_ADDR_1
);

44 
ödex
 = 0; index < 
DRIVER_LED_TOTAL
; index++) {

45 
boﬁ
 
íabÀd
 = 
åue
;

47 #ifde‡
IS31FL3731


48 
	`IS31FL3731_£t_Àd_c⁄åﬁ_ªgi°î
(
ödex
, 
íabÀd
,Énabled,Énabled);

49 #ñi‡
	`deföed
(
IS31FL3733
)

50 
	`IS31FL3733_£t_Àd_c⁄åﬁ_ªgi°î
(
ödex
, 
íabÀd
,Énabled,Énabled);

51 #ñi‡
	`deföed
(
IS31FL3737
)

52 
	`IS31FL3737_£t_Àd_c⁄åﬁ_ªgi°î
(
ödex
, 
íabÀd
,Énabled,Énabled);

54 
	`IS31FL3741_£t_Àd_c⁄åﬁ_ªgi°î
(
ödex
, 
íabÀd
,Énabled,Énabled);

58 #ifde‡
IS31FL3731


59 
	`IS31FL3731_upd©e_Àd_c⁄åﬁ_ªgi°îs
(
DRIVER_ADDR_1
, 0);

60 #ifde‡
DRIVER_ADDR_2


61 
	`IS31FL3731_upd©e_Àd_c⁄åﬁ_ªgi°îs
(
DRIVER_ADDR_2
, 1);

63 #ñi‡
	`deföed
(
IS31FL3733
)

64 
	`IS31FL3733_upd©e_Àd_c⁄åﬁ_ªgi°îs
(
DRIVER_ADDR_1
, 0);

65 
	`IS31FL3733_upd©e_Àd_c⁄åﬁ_ªgi°îs
(
DRIVER_ADDR_2
, 1);

66 #ñi‡
	`deföed
(
IS31FL3737
)

67 
	`IS31FL3737_upd©e_Àd_c⁄åﬁ_ªgi°îs
(
DRIVER_ADDR_1
, 
DRIVER_ADDR_2
);

69 
	`IS31FL3741_upd©e_Àd_c⁄åﬁ_ªgi°îs
(
DRIVER_ADDR_1
, 0);

71 
	}
}

73 #ifde‡
IS31FL3731


74 
	$Êush
() {

75 
	`IS31FL3731_upd©e_pwm_buf„rs
(
DRIVER_ADDR_1
, 0);

76 #ifde‡
DRIVER_ADDR_2


77 
	`IS31FL3731_upd©e_pwm_buf„rs
(
DRIVER_ADDR_2
, 1);

79 
	}
}

81 c⁄° 
rgb_m©rix_drivî_t
 
	grgb_m©rix_drivî
 = {

82 .
öô
 = init,

83 .
	gÊush
 = 
Êush
,

84 .
	g£t_cﬁ‹
 = 
IS31FL3731_£t_cﬁ‹
,

85 .
	g£t_cﬁ‹_Æl
 = 
IS31FL3731_£t_cﬁ‹_Æl
,

87 #ñi‡
deföed
(
IS31FL3733
)

88 
	$Êush
() {

89 
	`IS31FL3733_upd©e_pwm_buf„rs
(
DRIVER_ADDR_1
, 0);

90 
	`IS31FL3733_upd©e_pwm_buf„rs
(
DRIVER_ADDR_2
, 1);

91 
	}
}

93 c⁄° 
rgb_m©rix_drivî_t
 
	grgb_m©rix_drivî
 = {

94 .
öô
 = init,

95 .
	gÊush
 = 
Êush
,

96 .
	g£t_cﬁ‹
 = 
IS31FL3733_£t_cﬁ‹
,

97 .
	g£t_cﬁ‹_Æl
 = 
IS31FL3733_£t_cﬁ‹_Æl
,

99 #ñi‡
deföed
(
IS31FL3737
)

100 
	$Êush
(Ë{ 
	`IS31FL3737_upd©e_pwm_buf„rs
(
DRIVER_ADDR_1
, 
DRIVER_ADDR_2
); 
	}
}

102 c⁄° 
rgb_m©rix_drivî_t
 
	grgb_m©rix_drivî
 = {

103 .
öô
 = init,

104 .
	gÊush
 = 
Êush
,

105 .
	g£t_cﬁ‹
 = 
IS31FL3737_£t_cﬁ‹
,

106 .
	g£t_cﬁ‹_Æl
 = 
IS31FL3737_£t_cﬁ‹_Æl
,

109 
	$Êush
(Ë{ 
	`IS31FL3741_upd©e_pwm_buf„rs
(
DRIVER_ADDR_1
, 
DRIVER_ADDR_2
); 
	}
}

111 c⁄° 
rgb_m©rix_drivî_t
 
	grgb_m©rix_drivî
 = {

112 .
öô
 = init,

113 .
	gÊush
 = 
Êush
,

114 .
	g£t_cﬁ‹
 = 
IS31FL3741_£t_cﬁ‹
,

115 .
	g£t_cﬁ‹_Æl
 = 
IS31FL3741_£t_cﬁ‹_Æl
,

119 #ñi‡
deföed
(
WS2812
)

120 #i‡
deföed
(
RGBLIGHT_ENABLE
Ë&& !deföed(
RGBLIGHT_CUSTOM_DRIVER
)

121 #¥agm®
mesßge
 "Cannot use RGBLIGHTánd RGB Matrix using WS2812átÅhe sameÅime."

122 #¥agm®
mesßge
 "YouÇeedÅo useá custom driver, orÑe-implementÅhe WS2812 driverÅo useá different configuration."

126 
LED_TYPE
 
	grgb_m©rix_ws2812_¨øy
[
DRIVER_LED_TOTAL
];

128 
	$öô
(Ë{
	}
}

130 
	$Êush
() {

132 
	`ws2812_£éeds
(
rgb_m©rix_ws2812_¨øy
, 
DRIVER_LED_TOTAL
);

133 
	}
}

136 
ölöe
 
	$£éed
(
i
, 
uöt8_t
 
r
, uöt8_à
g
, uöt8_à
b
) {

137 
rgb_m©rix_ws2812_¨øy
[
i
].
r
 =Ñ;

138 
rgb_m©rix_ws2812_¨øy
[
i
].
g
 = g;

139 
rgb_m©rix_ws2812_¨øy
[
i
].
b
 = b;

140 #ifde‡
RGBW


141 
	`c⁄vît_rgb_to_rgbw
(&
rgb_m©rix_ws2812_¨øy
[
i
]);

143 
	}
}

145 
	$£éed_Æl
(
uöt8_t
 
r
, uöt8_à
g
, uöt8_à
b
) {

146 
i
 = 0; i < (
rgb_m©rix_ws2812_¨øy
) / (rgb_matrix_ws2812_array[0]); i++) {

147 
	`£éed
(
i
, 
r
, 
g
, 
b
);

149 
	}
}

151 c⁄° 
rgb_m©rix_drivî_t
 
	grgb_m©rix_drivî
 = {

152 .
öô
 = init,

153 .
	gÊush
 = 
Êush
,

154 .
	g£t_cﬁ‹
 = 
£éed
,

155 .
	g£t_cﬁ‹_Æl
 = 
£éed_Æl
,

	@rgb_matrix_types.h

1 #¥agm®
⁄˚


3 
	~<°döt.h
>

4 
	~<°dboﬁ.h
>

5 
	~"cﬁ‹.h
"

7 #i‡
deföed
(
__GNUC__
)

8 
	#PACKED
 
	`__©åibuã__
((
__∑cked__
))

	)

10 
	#PACKED


	)

13 #i‡
deföed
(
_MSC_VER
)

14 #¥agm®
∑ck
(
push
, 1)

17 #i‡
deföed
(
RGB_MATRIX_KEYPRESSES
Ë|| deföed(
RGB_MATRIX_KEYRELEASES
)

18 
	#RGB_MATRIX_KEYREACTIVE_ENABLED


	)

22 #i‚de‡
LED_HITS_TO_REMEMBER


23 
	#LED_HITS_TO_REMEMBER
 8

	)

26 #ifde‡
RGB_MATRIX_KEYREACTIVE_ENABLED


27 
	sPACKED
 {

28 
uöt8_t
 
	mcou¡
;

29 
uöt8_t
 
	mx
[
LED_HITS_TO_REMEMBER
];

30 
uöt8_t
 
	my
[
LED_HITS_TO_REMEMBER
];

31 
uöt8_t
 
	mödex
[
LED_HITS_TO_REMEMBER
];

32 
uöt16_t
 
	mtick
[
LED_HITS_TO_REMEMBER
];

33 } 
	tœ°_hô_t
;

36 
	ergb_èsk_°©es
 { 
	mSTARTING
, 
	mRENDERING
, 
	mFLUSHING
, 
	mSYNCING
 } 
	trgb_èsk_°©es
;

38 
uöt8_t
 
	tÀd_Êags_t
;

40 
	sPACKED
 {

41 
uöt8_t
 
	môî
;

42 
Àd_Êags_t
 
	mÊags
;

43 
boﬁ
 
	möô
;

44 } 
	tef„˘_∑øms_t
;

46 
	sPACKED
 {

47 
uöt8_t
 
	mx
;

48 
uöt8_t
 
	my
;

49 } 
	tpoöt_t
;

51 
	#HAS_FLAGS
(
bôs
, 
Êags
Ë((bô†& fœgsË=Êags)

	)

52 
	#HAS_ANY_FLAGS
(
bôs
, 
Êags
Ë((bô†& fœgsË!0x00)

	)

54 
	#LED_FLAG_ALL
 0xFF

	)

55 
	#LED_FLAG_NONE
 0x00

	)

56 
	#LED_FLAG_MODIFIER
 0x01

	)

57 
	#LED_FLAG_UNDERGLOW
 0x02

	)

58 
	#LED_FLAG_KEYLIGHT
 0x04

	)

59 
	#LED_FLAG_INDICATOR
 0x08

	)

61 
	#NO_LED
 255

	)

63 
	sPACKED
 {

64 
uöt8_t
 
	mm©rix_co
[
MATRIX_ROWS
][
MATRIX_COLS
];

65 
poöt_t
 
	mpoöt
[
DRIVER_LED_TOTAL
];

66 
uöt8_t
 
	mÊags
[
DRIVER_LED_TOTAL
];

67 } 
	tÀd_c⁄fig_t
;

70 
uöt32_t
 
	møw
;

71 
	sPACKED
 {

72 
uöt8_t
 
	míabÀ
 : 2;

73 
uöt8_t
 
	mmode
 : 6;

74 
HSV
 
	mhsv
;

75 
uöt8_t
 
	m•ìd
;

77 } 
	trgb_c⁄fig_t
;

79 #i‡
deföed
(
_MSC_VER
)

80 #¥agm®
∑ck
(
p›
)

	@rgblight.c

16 
	~<m©h.h
>

17 
	~<°rög.h
>

18 
	~<°dlib.h
>

19 #ifde‡
__AVR__


20 
	~<avr/ì¥om.h
>

21 
	~<avr/öãºu±.h
>

23 #ifde‡
EEPROM_ENABLE


24 
	~"ì¥om.h
"

26 #ifde‡
STM32_EEPROM_ENABLE


27 
	~"hÆ.h
"

28 
	~"ì¥om_°m32.h
"

30 
	~"waô.h
"

31 
	~"¥ogmem.h
"

32 
	~"timî.h
"

33 
	~"rgblight.h
"

34 
	~"cﬁ‹.h
"

35 
	~"debug.h
"

36 
	~"Àd_èbÀs.h
"

37 
	~"lib/lib8ti⁄/lib8ti⁄.h
"

38 #ifde‡
VELOCIKEY_ENABLE


39 
	~"vñocikey.h
"

42 #i‚de‡
MIN


43 
	#MIN
(
a
, 
b
Ë((◊Ë< (b)Ë? (aË: (b))

	)

46 #ifde‡
RGBLIGHT_SPLIT


48 
	#RGBLIGHT_SPLIT_SET_CHANGE_MODE
 
rgblight_°©us
.
ch™ge_Êags
 |
RGBLIGHT_STATUS_CHANGE_MODE


	)

49 
	#RGBLIGHT_SPLIT_SET_CHANGE_HSVS
 
rgblight_°©us
.
ch™ge_Êags
 |
RGBLIGHT_STATUS_CHANGE_HSVS


	)

50 
	#RGBLIGHT_SPLIT_SET_CHANGE_MODEHSVS
 
rgblight_°©us
.
ch™ge_Êags
 |(
RGBLIGHT_STATUS_CHANGE_MODE
 | 
RGBLIGHT_STATUS_CHANGE_HSVS
)

	)

51 
	#RGBLIGHT_SPLIT_SET_CHANGE_LAYERS
 
rgblight_°©us
.
ch™ge_Êags
 |
RGBLIGHT_STATUS_CHANGE_LAYERS


	)

52 
	#RGBLIGHT_SPLIT_SET_CHANGE_TIMER_ENABLE
 
rgblight_°©us
.
ch™ge_Êags
 |
RGBLIGHT_STATUS_CHANGE_TIMER


	)

53 
	#RGBLIGHT_SPLIT_ANIMATION_TICK
 
rgblight_°©us
.
ch™ge_Êags
 |
RGBLIGHT_STATUS_ANIMATION_TICK


	)

55 
	#RGBLIGHT_SPLIT_SET_CHANGE_MODE


	)

56 
	#RGBLIGHT_SPLIT_SET_CHANGE_HSVS


	)

57 
	#RGBLIGHT_SPLIT_SET_CHANGE_MODEHSVS


	)

58 
	#RGBLIGHT_SPLIT_SET_CHANGE_LAYERS


	)

59 
	#RGBLIGHT_SPLIT_SET_CHANGE_TIMER_ENABLE


	)

60 
	#RGBLIGHT_SPLIT_ANIMATION_TICK


	)

63 
	#_RGBM_SINGLE_STATIC
(
sym
Ë
RGBLIGHT_MODE_
##sym,

	)

64 
	#_RGBM_SINGLE_DYNAMIC
(
sym
)

	)

65 
	#_RGBM_MULTI_STATIC
(
sym
Ë
RGBLIGHT_MODE_
##sym,

	)

66 
	#_RGBM_MULTI_DYNAMIC
(
sym
)

	)

67 
	#_RGBM_TMP_STATIC
(
sym
, 
msym
Ë
RGBLIGHT_MODE_
##sym,

	)

68 
	#_RGBM_TMP_DYNAMIC
(
sym
, 
msym
)

	)

69 
uöt8_t
 
	g°©ic_ef„˘_èbÀ
[] = {

70 
	~"rgblight_modes.h
"

73 
	#_RGBM_SINGLE_STATIC
(
sym
Ë
RGBLIGHT_MODE_
##sym,

	)

74 
	#_RGBM_SINGLE_DYNAMIC
(
sym
Ë
RGBLIGHT_MODE_
##sym,

	)

75 
	#_RGBM_MULTI_STATIC
(
sym
Ë
RGBLIGHT_MODE_
##sym,

	)

76 
	#_RGBM_MULTI_DYNAMIC
(
sym
Ë
RGBLIGHT_MODE_
##sym,

	)

77 
	#_RGBM_TMP_STATIC
(
sym
, 
msym
Ë
RGBLIGHT_MODE_
##msym,

	)

78 
	#_RGBM_TMP_DYNAMIC
(
sym
, 
msym
Ë
RGBLIGHT_MODE_
##msym,

	)

79 
uöt8_t
 
	gmode_ba£_èbÀ
[] = {

81 
	~"rgblight_modes.h
"

84 
ölöe
 
	$is_°©ic_ef„˘
(
uöt8_t
 
mode
Ë{  
	`memchr
(
°©ic_ef„˘_èbÀ
, mode, (°©ic_ef„˘_èbÀ)Ë!
NULL
; 
	}
}

86 #ifde‡
RGBLIGHT_LED_MAP


87 c⁄° 
uöt8_t
 
	gÀd_m≠
[] 
	gPROGMEM
 = 
RGBLIGHT_LED_MAP
;

90 #ifde‡
RGBLIGHT_EFFECT_STATIC_GRADIENT


91 
__©åibuã__
((
wók
)Ëc⁄° 
uöt8_t
 
	gRGBLED_GRADIENT_RANGES
[] 
	gPROGMEM
 = {255, 170, 127, 85, 64};

94 
rgblight_c⁄fig_t
 
	grgblight_c⁄fig
;

95 
rgblight_°©us_t
 
	grgblight_°©us
 = {.
timî_íabÀd
 = 
Ál£
};

96 
boﬁ
 
	gis_rgblight_öôülized
 = 
Ál£
;

98 #ifde‡
RGBLIGHT_USE_TIMER


99 
™im©i⁄_°©us_t
 
	g™im©i⁄_°©us
 = {};

102 #i‚de‡
LED_ARRAY


103 
LED_TYPE
 
	gÀd
[
RGBLED_NUM
];

104 
	#LED_ARRAY
 
Àd


	)

107 #ifde‡
RGBLIGHT_LAYERS


108 
rgblight_£gmít_t
 c⁄° *c⁄° *
	grgblight_œyîs
 = 
NULL
;

111 
rgblight_ønges_t
 
	grgblight_ønges
 = {0, 
RGBLED_NUM
, 0, RGBLED_NUM, RGBLED_NUM};

113 
	$rgblight_£t_˛ùpög_ønge
(
uöt8_t
 
°¨t_pos
, uöt8_à
num_Àds
) {

114 
rgblight_ønges
.
˛ùpög_°¨t_pos
 = 
°¨t_pos
;

115 
rgblight_ønges
.
˛ùpög_num_Àds
 = 
num_Àds
;

116 
	}
}

118 
	$rgblight_£t_ef„˘_ønge
(
uöt8_t
 
°¨t_pos
, uöt8_à
num_Àds
) {

119 i‡(
°¨t_pos
 >
RGBLED_NUM
) ;

120 i‡(
°¨t_pos
 + 
num_Àds
 > 
RGBLED_NUM
) ;

121 
rgblight_ønges
.
ef„˘_°¨t_pos
 = 
°¨t_pos
;

122 
rgblight_ønges
.
ef„˘_íd_pos
 = 
°¨t_pos
 + 
num_Àds
;

123 
rgblight_ønges
.
ef„˘_num_Àds
 = 
num_Àds
;

124 
	}
}

126 
	$£thsv_øw
(
uöt8_t
 
hue
, uöt8_à
ßt
, uöt8_à
vÆ
, 
LED_TYPE
 *
Àd1
) {

127 
HSV
 
hsv
 = {
hue
, 
ßt
, 
vÆ
};

128 
RGB
 
rgb
 = 
	`hsv_to_rgb
(
hsv
);

129 
	`£ågb
(
rgb
.
r
,Ñgb.
g
,Ñgb.
b
, 
Àd1
);

130 
	}
}

132 
	$£thsv
(
uöt8_t
 
hue
, uöt8_à
ßt
, uöt8_à
vÆ
, 
LED_TYPE
 *
Àd1
Ë{ 
	`£thsv_øw
(hue, s©, vÆ > 
RGBLIGHT_LIMIT_VAL
 ? RGBLIGHT_LIMIT_VAL : vÆ,Üed1); 
	}
}

134 
	$£ågb
(
uöt8_t
 
r
, uöt8_à
g
, uöt8_à
b
, 
LED_TYPE
 *
Àd1
) {

135 
Àd1
->
r
 =Ñ;

136 
Àd1
->
g
 = g;

137 
Àd1
->
b
 = b;

138 #ifde‡
RGBW


139 
Àd1
->
w
 = 0;

141 
	}
}

143 
	$rgblight_check_c⁄fig
() {

146 i‡(
rgblight_c⁄fig
.
mode
 < 
RGBLIGHT_MODE_STATIC_LIGHT
) {

147 
rgblight_c⁄fig
.
mode
 = 
RGBLIGHT_MODE_STATIC_LIGHT
;

148 } i‡(
rgblight_c⁄fig
.
mode
 > 
RGBLIGHT_MODES
) {

149 
rgblight_c⁄fig
.
mode
 = 
RGBLIGHT_MODES
;

152 i‡(
rgblight_c⁄fig
.
vÆ
 > 
RGBLIGHT_LIMIT_VAL
) {

153 
rgblight_c⁄fig
.
vÆ
 = 
RGBLIGHT_LIMIT_VAL
;

155 
	}
}

157 
uöt32_t
 
	$ìc⁄fig_ªad_rgblight
() {

158 #ifde‡
EEPROM_ENABLE


159  
	`ì¥om_ªad_dw‹d
(
EECONFIG_RGBLIGHT
);

163 
	}
}

165 
	$ìc⁄fig_upd©e_rgblight
(
uöt32_t
 
vÆ
) {

166 #ifde‡
EEPROM_ENABLE


167 
	`rgblight_check_c⁄fig
();

168 
	`ì¥om_upd©e_dw‹d
(
EECONFIG_RGBLIGHT
, 
vÆ
);

170 
	}
}

172 
	$ìc⁄fig_upd©e_rgblight_cuºít
(Ë{ 
	`ìc⁄fig_upd©e_rgblight
(
rgblight_c⁄fig
.
øw
); 
	}
}

174 
	$ìc⁄fig_upd©e_rgblight_deÁu…
() {

175 
rgblight_c⁄fig
.
íabÀ
 = 1;

176 
rgblight_c⁄fig
.
mode
 = 
RGBLIGHT_MODE_STATIC_LIGHT
;

177 
rgblight_c⁄fig
.
hue
 = 0;

178 
rgblight_c⁄fig
.
ßt
 = 
UINT8_MAX
;

179 
rgblight_c⁄fig
.
vÆ
 = 
RGBLIGHT_LIMIT_VAL
;

180 
rgblight_c⁄fig
.
•ìd
 = 0;

181 
RGBLIGHT_SPLIT_SET_CHANGE_MODEHSVS
;

182 
	`ìc⁄fig_upd©e_rgblight
(
rgblight_c⁄fig
.
øw
);

183 
	}
}

185 
	$ìc⁄fig_debug_rgblight
() {

186 
	`d¥ötf
("rgblight_config EEPROM:\n");

187 
	`d¥ötf
("rgblight_c⁄fig.íabÀ = %d\n", 
rgblight_c⁄fig
.
íabÀ
);

188 
	`d¥ötf
("rghlight_c⁄fig.modê%d\n", 
rgblight_c⁄fig
.
mode
);

189 
	`d¥ötf
("rgblight_c⁄fig.huê%d\n", 
rgblight_c⁄fig
.
hue
);

190 
	`d¥ötf
("rgblight_c⁄fig.ßà%d\n", 
rgblight_c⁄fig
.
ßt
);

191 
	`d¥ötf
("rgblight_c⁄fig.vÆ = %d\n", 
rgblight_c⁄fig
.
vÆ
);

192 
	`d¥ötf
("rgblight_c⁄fig.•ìd = %d\n", 
rgblight_c⁄fig
.
•ìd
);

193 
	}
}

195 
	$rgblight_öô
() {

199 i‡(
is_rgblight_öôülized
) {

203 
	`d¥ötf
("rgblight_init called.\n");

204 
	`d¥ötf
("rgblight_init start!\n");

205 i‡(!
	`ìc⁄fig_is_íabÀd
()) {

206 
	`d¥ötf
("rgblight_initÉeconfig isÇotÉnabled.\n");

207 
	`ìc⁄fig_öô
();

208 
	`ìc⁄fig_upd©e_rgblight_deÁu…
();

210 
rgblight_c⁄fig
.
øw
 = 
	`ìc⁄fig_ªad_rgblight
();

211 
RGBLIGHT_SPLIT_SET_CHANGE_MODEHSVS
;

212 i‡(!
rgblight_c⁄fig
.
mode
) {

213 
	`d¥ötf
("rgblight_initÑgblight_config.mode = 0. Write default valuesÅo EEPROM.\n");

214 
	`ìc⁄fig_upd©e_rgblight_deÁu…
();

215 
rgblight_c⁄fig
.
øw
 = 
	`ìc⁄fig_ªad_rgblight
();

217 
	`rgblight_check_c⁄fig
();

219 
	`ìc⁄fig_debug_rgblight
();

221 
	`rgblight_timî_öô
();

223 i‡(
rgblight_c⁄fig
.
íabÀ
) {

224 
	`rgblight_mode_n€ïrom
(
rgblight_c⁄fig
.
mode
);

227 
is_rgblight_öôülized
 = 
åue
;

228 
	}
}

230 
uöt32_t
 
	$rgblight_ªad_dw‹d
(Ë{  
rgblight_c⁄fig
.
øw
; 
	}
}

232 
	$rgblight_upd©e_dw‹d
(
uöt32_t
 
dw‹d
) {

233 
RGBLIGHT_SPLIT_SET_CHANGE_MODEHSVS
;

234 
rgblight_c⁄fig
.
øw
 = 
dw‹d
;

235 i‡(
rgblight_c⁄fig
.
íabÀ
)

236 
	`rgblight_mode_n€ïrom
(
rgblight_c⁄fig
.
mode
);

238 
	`rgblight_timî_dißbÀ
();

239 
	`rgblight_£t
();

241 
	}
}

243 
	$rgblight_ö¸ó£
() {

244 
uöt8_t
 
mode
 = 0;

245 i‡(
rgblight_c⁄fig
.
mode
 < 
RGBLIGHT_MODES
) {

246 
mode
 = 
rgblight_c⁄fig
.mode + 1;

248 
	`rgblight_mode
(
mode
);

249 
	}
}

250 
	$rgblight_de¸ó£
() {

251 
uöt8_t
 
mode
 = 0;

253 i‡(
rgblight_c⁄fig
.
mode
 > 
RGBLIGHT_MODE_STATIC_LIGHT
) {

254 
mode
 = 
rgblight_c⁄fig
.mode - 1;

256 
	`rgblight_mode
(
mode
);

257 
	}
}

258 
	$rgblight_°ï_hñ≥r
(
boﬁ
 
wrôe_to_ì¥om
) {

259 
uöt8_t
 
mode
 = 0;

260 
mode
 = 
rgblight_c⁄fig
.mode + 1;

261 i‡(
mode
 > 
RGBLIGHT_MODES
) {

262 
mode
 = 1;

264 
	`rgblight_mode_ì¥om_hñ≥r
(
mode
, 
wrôe_to_ì¥om
);

265 
	}
}

266 
	$rgblight_°ï_n€ïrom
(Ë{ 
	`rgblight_°ï_hñ≥r
(
Ál£
); 
	}
}

267 
	$rgblight_°ï
(Ë{ 
	`rgblight_°ï_hñ≥r
(
åue
); 
	}
}

268 
	$rgblight_°ï_ªvî£_hñ≥r
(
boﬁ
 
wrôe_to_ì¥om
) {

269 
uöt8_t
 
mode
 = 0;

270 
mode
 = 
rgblight_c⁄fig
.mode - 1;

271 i‡(
mode
 < 1) {

272 
mode
 = 
RGBLIGHT_MODES
;

274 
	`rgblight_mode_ì¥om_hñ≥r
(
mode
, 
wrôe_to_ì¥om
);

275 
	}
}

276 
	$rgblight_°ï_ªvî£_n€ïrom
(Ë{ 
	`rgblight_°ï_ªvî£_hñ≥r
(
Ál£
); 
	}
}

277 
	$rgblight_°ï_ªvî£
(Ë{ 
	`rgblight_°ï_ªvî£_hñ≥r
(
åue
); 
	}
}

279 
uöt8_t
 
	$rgblight_gë_mode
() {

280 i‡(!
rgblight_c⁄fig
.
íabÀ
) {

281  
Ál£
;

284  
rgblight_c⁄fig
.
mode
;

285 
	}
}

287 
	$rgblight_mode_ì¥om_hñ≥r
(
uöt8_t
 
mode
, 
boﬁ
 
wrôe_to_ì¥om
) {

288 i‡(!
rgblight_c⁄fig
.
íabÀ
) {

291 i‡(
mode
 < 
RGBLIGHT_MODE_STATIC_LIGHT
) {

292 
rgblight_c⁄fig
.
mode
 = 
RGBLIGHT_MODE_STATIC_LIGHT
;

293 } i‡(
mode
 > 
RGBLIGHT_MODES
) {

294 
rgblight_c⁄fig
.
mode
 = 
RGBLIGHT_MODES
;

296 
rgblight_c⁄fig
.
mode
 = mode;

298 
RGBLIGHT_SPLIT_SET_CHANGE_MODE
;

299 i‡(
wrôe_to_ì¥om
) {

300 
	`ìc⁄fig_upd©e_rgblight
(
rgblight_c⁄fig
.
øw
);

301 
	`d¥ötf
("rgblighàmodê[EEPROM]: %u\n", 
rgblight_c⁄fig
.
mode
);

303 
	`d¥ötf
("rgblighàmodê[NOEEPROM]: %u\n", 
rgblight_c⁄fig
.
mode
);

305 i‡(
	`is_°©ic_ef„˘
(
rgblight_c⁄fig
.
mode
)) {

306 
	`rgblight_timî_dißbÀ
();

308 
	`rgblight_timî_íabÀ
();

310 #ifde‡
RGBLIGHT_USE_TIMER


311 
™im©i⁄_°©us
.
ª°¨t
 = 
åue
;

313 
	`rgblight_£thsv_n€ïrom
(
rgblight_c⁄fig
.
hue
,Ñgblight_c⁄fig.
ßt
,Ñgblight_c⁄fig.
vÆ
);

314 
	}
}

316 
	$rgblight_mode
(
uöt8_t
 
mode
Ë{ 
	`rgblight_mode_ì¥om_hñ≥r
(mode, 
åue
); 
	}
}

318 
	$rgblight_mode_n€ïrom
(
uöt8_t
 
mode
Ë{ 
	`rgblight_mode_ì¥om_hñ≥r
(mode, 
Ál£
); 
	}
}

320 
	$rgblight_toggÀ
() {

321 
	`d¥ötf
("rgblighàtoggÀ [EEPROM]:Ñgblight_c⁄fig.íabÀ = %u\n", !
rgblight_c⁄fig
.
íabÀ
);

322 i‡(
rgblight_c⁄fig
.
íabÀ
) {

323 
	`rgblight_dißbÀ
();

325 
	`rgblight_íabÀ
();

327 
	}
}

329 
	$rgblight_toggÀ_n€ïrom
() {

330 
	`d¥ötf
("rgblighàtoggÀ [NOEEPROM]:Ñgblight_c⁄fig.íabÀ = %u\n", !
rgblight_c⁄fig
.
íabÀ
);

331 i‡(
rgblight_c⁄fig
.
íabÀ
) {

332 
	`rgblight_dißbÀ_n€ïrom
();

334 
	`rgblight_íabÀ_n€ïrom
();

336 
	}
}

338 
	$rgblight_íabÀ
() {

339 
rgblight_c⁄fig
.
íabÀ
 = 1;

342 
	`d¥ötf
("rgblighàíabÀ [EEPROM]:Ñgblight_c⁄fig.íabÀ = %u\n", 
rgblight_c⁄fig
.
íabÀ
);

343 
	`rgblight_mode
(
rgblight_c⁄fig
.
mode
);

344 
	}
}

346 
	$rgblight_íabÀ_n€ïrom
() {

347 
rgblight_c⁄fig
.
íabÀ
 = 1;

348 
	`d¥ötf
("rgblighàíabÀ [NOEEPROM]:Ñgblight_c⁄fig.íabÀ = %u\n", 
rgblight_c⁄fig
.
íabÀ
);

349 
	`rgblight_mode_n€ïrom
(
rgblight_c⁄fig
.
mode
);

350 
	}
}

352 
	$rgblight_dißbÀ
() {

353 
rgblight_c⁄fig
.
íabÀ
 = 0;

354 
	`ìc⁄fig_upd©e_rgblight
(
rgblight_c⁄fig
.
øw
);

355 
	`d¥ötf
("rgblighàdißbÀ [EEPROM]:Ñgblight_c⁄fig.íabÀ = %u\n", 
rgblight_c⁄fig
.
íabÀ
);

356 
	`rgblight_timî_dißbÀ
();

357 
RGBLIGHT_SPLIT_SET_CHANGE_MODE
;

358 
	`waô_ms
(50);

359 
	`rgblight_£t
();

360 
	}
}

362 
	$rgblight_dißbÀ_n€ïrom
() {

363 
rgblight_c⁄fig
.
íabÀ
 = 0;

364 
	`d¥ötf
("rgblighàdißbÀ [NOEEPROM]:Ñgblight_c⁄fig.íabÀ = %u\n", 
rgblight_c⁄fig
.
íabÀ
);

365 
	`rgblight_timî_dißbÀ
();

366 
RGBLIGHT_SPLIT_SET_CHANGE_MODE
;

367 
	`waô_ms
(50);

368 
	`rgblight_£t
();

369 
	}
}

371 
boﬁ
 
	$rgblight_is_íabÀd
(Ë{  
rgblight_c⁄fig
.
íabÀ
; 
	}
}

373 
	$rgblight_ö¸ó£_hue_hñ≥r
(
boﬁ
 
wrôe_to_ì¥om
) {

374 
uöt8_t
 
hue
 = 
rgblight_c⁄fig
.huê+ 
RGBLIGHT_HUE_STEP
;

375 
	`rgblight_£thsv_ì¥om_hñ≥r
(
hue
, 
rgblight_c⁄fig
.
ßt
,Ñgblight_c⁄fig.
vÆ
, 
wrôe_to_ì¥om
);

376 
	}
}

377 
	$rgblight_ö¸ó£_hue_n€ïrom
(Ë{ 
	`rgblight_ö¸ó£_hue_hñ≥r
(
Ál£
); 
	}
}

378 
	$rgblight_ö¸ó£_hue
(Ë{ 
	`rgblight_ö¸ó£_hue_hñ≥r
(
åue
); 
	}
}

379 
	$rgblight_de¸ó£_hue_hñ≥r
(
boﬁ
 
wrôe_to_ì¥om
) {

380 
uöt8_t
 
hue
 = 
rgblight_c⁄fig
.huê- 
RGBLIGHT_HUE_STEP
;

381 
	`rgblight_£thsv_ì¥om_hñ≥r
(
hue
, 
rgblight_c⁄fig
.
ßt
,Ñgblight_c⁄fig.
vÆ
, 
wrôe_to_ì¥om
);

382 
	}
}

383 
	$rgblight_de¸ó£_hue_n€ïrom
(Ë{ 
	`rgblight_de¸ó£_hue_hñ≥r
(
Ál£
); 
	}
}

384 
	$rgblight_de¸ó£_hue
(Ë{ 
	`rgblight_de¸ó£_hue_hñ≥r
(
åue
); 
	}
}

385 
	$rgblight_ö¸ó£_ßt_hñ≥r
(
boﬁ
 
wrôe_to_ì¥om
) {

386 
uöt8_t
 
ßt
 = 
	`qadd8
(
rgblight_c⁄fig
.ßt, 
RGBLIGHT_SAT_STEP
);

387 
	`rgblight_£thsv_ì¥om_hñ≥r
(
rgblight_c⁄fig
.
hue
, 
ßt
,Ñgblight_c⁄fig.
vÆ
, 
wrôe_to_ì¥om
);

388 
	}
}

389 
	$rgblight_ö¸ó£_ßt_n€ïrom
(Ë{ 
	`rgblight_ö¸ó£_ßt_hñ≥r
(
Ál£
); 
	}
}

390 
	$rgblight_ö¸ó£_ßt
(Ë{ 
	`rgblight_ö¸ó£_ßt_hñ≥r
(
åue
); 
	}
}

391 
	$rgblight_de¸ó£_ßt_hñ≥r
(
boﬁ
 
wrôe_to_ì¥om
) {

392 
uöt8_t
 
ßt
 = 
	`qsub8
(
rgblight_c⁄fig
.ßt, 
RGBLIGHT_SAT_STEP
);

393 
	`rgblight_£thsv_ì¥om_hñ≥r
(
rgblight_c⁄fig
.
hue
, 
ßt
,Ñgblight_c⁄fig.
vÆ
, 
wrôe_to_ì¥om
);

394 
	}
}

395 
	$rgblight_de¸ó£_ßt_n€ïrom
(Ë{ 
	`rgblight_de¸ó£_ßt_hñ≥r
(
Ál£
); 
	}
}

396 
	$rgblight_de¸ó£_ßt
(Ë{ 
	`rgblight_de¸ó£_ßt_hñ≥r
(
åue
); 
	}
}

397 
	$rgblight_ö¸ó£_vÆ_hñ≥r
(
boﬁ
 
wrôe_to_ì¥om
) {

398 
uöt8_t
 
vÆ
 = 
	`qadd8
(
rgblight_c⁄fig
.vÆ, 
RGBLIGHT_VAL_STEP
);

399 
	`rgblight_£thsv_ì¥om_hñ≥r
(
rgblight_c⁄fig
.
hue
,Ñgblight_c⁄fig.
ßt
, 
vÆ
, 
wrôe_to_ì¥om
);

400 
	}
}

401 
	$rgblight_ö¸ó£_vÆ_n€ïrom
(Ë{ 
	`rgblight_ö¸ó£_vÆ_hñ≥r
(
Ál£
); 
	}
}

402 
	$rgblight_ö¸ó£_vÆ
(Ë{ 
	`rgblight_ö¸ó£_vÆ_hñ≥r
(
åue
); 
	}
}

403 
	$rgblight_de¸ó£_vÆ_hñ≥r
(
boﬁ
 
wrôe_to_ì¥om
) {

404 
uöt8_t
 
vÆ
 = 
	`qsub8
(
rgblight_c⁄fig
.vÆ, 
RGBLIGHT_VAL_STEP
);

405 
	`rgblight_£thsv_ì¥om_hñ≥r
(
rgblight_c⁄fig
.
hue
,Ñgblight_c⁄fig.
ßt
, 
vÆ
, 
wrôe_to_ì¥om
);

406 
	}
}

407 
	$rgblight_de¸ó£_vÆ_n€ïrom
(Ë{ 
	`rgblight_de¸ó£_vÆ_hñ≥r
(
Ál£
); 
	}
}

408 
	$rgblight_de¸ó£_vÆ
(Ë{ 
	`rgblight_de¸ó£_vÆ_hñ≥r
(
åue
); 
	}
}

410 
	$rgblight_ö¸ó£_•ìd_hñ≥r
(
boﬁ
 
wrôe_to_ì¥om
) {

411 i‡(
rgblight_c⁄fig
.
•ìd
 < 3)Ñgblight_config.speed++;

413 i‡(
wrôe_to_ì¥om
) {

414 
	`ìc⁄fig_upd©e_rgblight
(
rgblight_c⁄fig
.
øw
);

416 
	}
}

417 
	$rgblight_ö¸ó£_•ìd
(Ë{ 
	`rgblight_ö¸ó£_•ìd_hñ≥r
(
åue
); 
	}
}

418 
	$rgblight_ö¸ó£_•ìd_n€ïrom
(Ë{ 
	`rgblight_ö¸ó£_•ìd_hñ≥r
(
Ál£
); 
	}
}

420 
	$rgblight_de¸ó£_•ìd_hñ≥r
(
boﬁ
 
wrôe_to_ì¥om
) {

421 i‡(
rgblight_c⁄fig
.
•ìd
 > 0)Ñgblight_config.speed--;

423 i‡(
wrôe_to_ì¥om
) {

424 
	`ìc⁄fig_upd©e_rgblight
(
rgblight_c⁄fig
.
øw
);

426 
	}
}

427 
	$rgblight_de¸ó£_•ìd
(Ë{ 
	`rgblight_de¸ó£_•ìd_hñ≥r
(
åue
); 
	}
}

428 
	$rgblight_de¸ó£_•ìd_n€ïrom
(Ë{ 
	`rgblight_de¸ó£_•ìd_hñ≥r
(
Ál£
); 
	}
}

430 
	$rgblight_£thsv_n€ïrom_ﬁd
(
uöt8_t
 
hue
, uöt8_à
ßt
, uöt8_à
vÆ
) {

431 i‡(
rgblight_c⁄fig
.
íabÀ
) {

432 
LED_TYPE
 
tmp_Àd
;

433 
	`£thsv
(
hue
, 
ßt
, 
vÆ
, &
tmp_Àd
);

434 
	`rgblight_£ågb
(
tmp_Àd
.
r
,Åmp_Àd.
g
,Åmp_Àd.
b
);

436 
	}
}

438 
	$rgblight_£thsv_ì¥om_hñ≥r
(
uöt8_t
 
hue
, uöt8_à
ßt
, uöt8_à
vÆ
, 
boﬁ
 
wrôe_to_ì¥om
) {

439 i‡(
rgblight_c⁄fig
.
íabÀ
) {

440 
rgblight_°©us
.
ba£_mode
 = 
mode_ba£_èbÀ
[
rgblight_c⁄fig
.
mode
];

441 i‡(
rgblight_c⁄fig
.
mode
 =
RGBLIGHT_MODE_STATIC_LIGHT
) {

443 
LED_TYPE
 
tmp_Àd
;

444 
	`£thsv
(
hue
, 
ßt
, 
vÆ
, &
tmp_Àd
);

445 
	`rgblight_£ågb
(
tmp_Àd
.
r
,Åmp_Àd.
g
,Åmp_Àd.
b
);

450 #ifde‡
RGBLIGHT_EFFECT_BREATHING


451 i‡(
rgblight_°©us
.
ba£_mode
 =
RGBLIGHT_MODE_BREATHING
) {

453 
vÆ
 = 
rgblight_c⁄fig
.val;

456 #ifde‡
RGBLIGHT_EFFECT_RAINBOW_MOOD


457 i‡(
rgblight_°©us
.
ba£_mode
 =
RGBLIGHT_MODE_RAINBOW_MOOD
) {

459 
hue
 = 
rgblight_c⁄fig
.hue;

462 #ifde‡
RGBLIGHT_EFFECT_RAINBOW_SWIRL


463 i‡(
rgblight_°©us
.
ba£_mode
 =
RGBLIGHT_MODE_RAINBOW_SWIRL
) {

465 
hue
 = 
rgblight_c⁄fig
.hue;

468 #ifde‡
RGBLIGHT_EFFECT_STATIC_GRADIENT


469 i‡(
rgblight_°©us
.
ba£_mode
 =
RGBLIGHT_MODE_STATIC_GRADIENT
) {

471 
uöt8_t
 
dñè
 = 
rgblight_c⁄fig
.
mode
 - 
rgblight_°©us
.
ba£_mode
;

472 
boﬁ
 
dúe˘i⁄
 = (
dñè
 % 2) == 0;

473 #ifde‡
__AVR__


475 
uöt8_t
 
ønge
 = 
	`pgm_ªad_w‹d
(&
RGBLED_GRADIENT_RANGES
[
dñè
 / 2]);

477 
uöt8_t
 
ønge
 = 
RGBLED_GRADIENT_RANGES
[
dñè
 / 2];

479 
uöt8_t
 
i
 = 0; i < 
rgblight_ønges
.
ef„˘_num_Àds
; i++) {

480 
uöt8_t
 
_hue
 = ((
uöt16_t
)
i
 * (uöt16_t)
ønge
Ë/ 
rgblight_ønges
.
ef„˘_num_Àds
;

481 i‡(
dúe˘i⁄
) {

482 
_hue
 = 
hue
 + _hue;

484 
_hue
 = 
hue
 - _hue;

486 
	`d¥ötf
("rgblighàøöbow së hsv: %d,%d,%d,%u\n", 
i
, 
_hue
, 
dúe˘i⁄
, 
ønge
);

487 
	`£thsv
(
_hue
, 
ßt
, 
vÆ
, (
LED_TYPE
 *)&
Àd
[
i
 + 
rgblight_ønges
.
ef„˘_°¨t_pos
]);

489 
	`rgblight_£t
();

493 #ifde‡
RGBLIGHT_SPLIT


494 i‡(
rgblight_c⁄fig
.
hue
 !huê||Ñgblight_c⁄fig.
ßt
 !ßà||Ñgblight_c⁄fig.
vÆ
 != val) {

495 
RGBLIGHT_SPLIT_SET_CHANGE_HSVS
;

498 
rgblight_c⁄fig
.
hue
 = hue;

499 
rgblight_c⁄fig
.
ßt
 = sat;

500 
rgblight_c⁄fig
.
vÆ
 = val;

501 i‡(
wrôe_to_ì¥om
) {

502 
	`ìc⁄fig_upd©e_rgblight
(
rgblight_c⁄fig
.
øw
);

503 
	`d¥ötf
("rgblighà£àhsv [EEPROM]: %u,%u,%u\n", 
rgblight_c⁄fig
.
hue
,Ñgblight_c⁄fig.
ßt
,Ñgblight_c⁄fig.
vÆ
);

505 
	`d¥ötf
("rgblighà£àhsv [NOEEPROM]: %u,%u,%u\n", 
rgblight_c⁄fig
.
hue
,Ñgblight_c⁄fig.
ßt
,Ñgblight_c⁄fig.
vÆ
);

508 
	}
}

510 
	$rgblight_£thsv
(
uöt8_t
 
hue
, uöt8_à
ßt
, uöt8_à
vÆ
Ë{ 
	`rgblight_£thsv_ì¥om_hñ≥r
(hue, s©, vÆ, 
åue
); 
	}
}

512 
	$rgblight_£thsv_n€ïrom
(
uöt8_t
 
hue
, uöt8_à
ßt
, uöt8_à
vÆ
Ë{ 
	`rgblight_£thsv_ì¥om_hñ≥r
(hue, s©, vÆ, 
Ál£
); 
	}
}

514 
uöt8_t
 
	$rgblight_gë_•ìd
(Ë{  
rgblight_c⁄fig
.
•ìd
; 
	}
}

516 
	$rgblight_£t_•ìd_ì¥om_hñ≥r
(
uöt8_t
 
•ìd
, 
boﬁ
 
wrôe_to_ì¥om
) {

517 
rgblight_c⁄fig
.
•ìd
 = speed;

518 i‡(
wrôe_to_ì¥om
) {

519 
	`ìc⁄fig_upd©e_rgblight
(
rgblight_c⁄fig
.
øw
);

520 
	`d¥ötf
("rgblighà£à•ìd [EEPROM]: %u\n", 
rgblight_c⁄fig
.
•ìd
);

522 
	`d¥ötf
("rgblighà£à•ìd [NOEEPROM]: %u\n", 
rgblight_c⁄fig
.
•ìd
);

524 
	}
}

526 
	$rgblight_£t_•ìd
(
uöt8_t
 
•ìd
Ë{ 
	`rgblight_£t_•ìd_ì¥om_hñ≥r
(•ìd, 
åue
); 
	}
}

528 
	$rgblight_£t_•ìd_n€ïrom
(
uöt8_t
 
•ìd
Ë{ 
	`rgblight_£t_•ìd_ì¥om_hñ≥r
(•ìd, 
Ál£
); 
	}
}

530 
uöt8_t
 
	$rgblight_gë_hue
(Ë{  
rgblight_c⁄fig
.
hue
; 
	}
}

532 
uöt8_t
 
	$rgblight_gë_ßt
(Ë{  
rgblight_c⁄fig
.
ßt
; 
	}
}

534 
uöt8_t
 
	$rgblight_gë_vÆ
(Ë{  
rgblight_c⁄fig
.
vÆ
; 
	}
}

536 
HSV
 
	$rgblight_gë_hsv
(Ë{  (
HSV
){
rgblight_c⁄fig
.
hue
,Ñgblight_c⁄fig.
ßt
,Ñgblight_c⁄fig.
vÆ
}; 
	}
}

538 
	$rgblight_£ågb
(
uöt8_t
 
r
, uöt8_à
g
, uöt8_à
b
) {

539 i‡(!
rgblight_c⁄fig
.
íabÀ
) {

543 
uöt8_t
 
i
 = 
rgblight_ønges
.
ef„˘_°¨t_pos
; i <Ñgblight_ønges.
ef„˘_íd_pos
; i++) {

544 
Àd
[
i
].
r
 =Ñ;

545 
Àd
[
i
].
g
 = g;

546 
Àd
[
i
].
b
 = b;

547 #ifde‡
RGBW


548 
Àd
[
i
].
w
 = 0;

551 
	`rgblight_£t
();

552 
	}
}

554 
	$rgblight_£ågb_©
(
uöt8_t
 
r
, uöt8_à
g
, uöt8_à
b
, uöt8_à
ödex
) {

555 i‡(!
rgblight_c⁄fig
.
íabÀ
 || 
ödex
 >
RGBLED_NUM
) {

559 
Àd
[
ödex
].
r
 =Ñ;

560 
Àd
[
ödex
].
g
 = g;

561 
Àd
[
ödex
].
b
 = b;

562 #ifde‡
RGBW


563 
Àd
[
ödex
].
w
 = 0;

565 
	`rgblight_£t
();

566 
	}
}

568 
	$rgblight_£thsv_©
(
uöt8_t
 
hue
, uöt8_à
ßt
, uöt8_à
vÆ
, uöt8_à
ödex
) {

569 i‡(!
rgblight_c⁄fig
.
íabÀ
) {

573 
LED_TYPE
 
tmp_Àd
;

574 
	`£thsv
(
hue
, 
ßt
, 
vÆ
, &
tmp_Àd
);

575 
	`rgblight_£ågb_©
(
tmp_Àd
.
r
,Åmp_Àd.
g
,Åmp_Àd.
b
, 
ödex
);

576 
	}
}

578 #i‡
deföed
(
RGBLIGHT_EFFECT_BREATHING
Ë|| deföed(
RGBLIGHT_EFFECT_RAINBOW_MOOD
Ë|| deföed(
RGBLIGHT_EFFECT_RAINBOW_SWIRL
Ë|| deföed(
RGBLIGHT_EFFECT_SNAKE
Ë|| deföed(
RGBLIGHT_EFFECT_KNIGHT
Ë|| deföed(
RGBLIGHT_EFFECT_TWINKLE
)

580 
uöt8_t
 
	$gë_öãrvÆ_time
(c⁄° 
uöt8_t
 *
deÁu…_öãrvÆ_addªss
, uöt8_à
vñocikey_mö
, uöt8_à
vñocikey_max
) {

582 #ifde‡
VELOCIKEY_ENABLE


583 
	`vñocikey_íabÀd
(Ë? 
	`vñocikey_m©ch_•ìd
(
vñocikey_mö
, 
vñocikey_max
) :

585 
	`pgm_ªad_byã
(
deÁu…_öãrvÆ_addªss
);

586 
	}
}

590 
	$rgblight_£ågb_ønge
(
uöt8_t
 
r
, uöt8_à
g
, uöt8_à
b
, uöt8_à
°¨t
, uöt8_à
íd
) {

591 i‡(!
rgblight_c⁄fig
.
íabÀ
 || 
°¨t
 < 0 || sèπ >
íd
 ||Énd > 
RGBLED_NUM
) {

595 
uöt8_t
 
i
 = 
°¨t
; i < 
íd
; i++) {

596 
Àd
[
i
].
r
 =Ñ;

597 
Àd
[
i
].
g
 = g;

598 
Àd
[
i
].
b
 = b;

599 #ifde‡
RGBW


600 
Àd
[
i
].
w
 = 0;

603 
	`rgblight_£t
();

604 
	`waô_ms
(1);

605 
	}
}

607 
	$rgblight_£thsv_ønge
(
uöt8_t
 
hue
, uöt8_à
ßt
, uöt8_à
vÆ
, uöt8_à
°¨t
, uöt8_à
íd
) {

608 i‡(!
rgblight_c⁄fig
.
íabÀ
) {

612 
LED_TYPE
 
tmp_Àd
;

613 
	`£thsv
(
hue
, 
ßt
, 
vÆ
, &
tmp_Àd
);

614 
	`rgblight_£ågb_ønge
(
tmp_Àd
.
r
,Åmp_Àd.
g
,Åmp_Àd.
b
, 
°¨t
, 
íd
);

615 
	}
}

617 #i‚de‡
RGBLIGHT_SPLIT


618 
	$rgblight_£ågb_ma°î
(
uöt8_t
 
r
, uöt8_à
g
, uöt8_à
b
Ë{ 
	`rgblight_£ågb_ønge
‘, g, b, 0, (uöt8_t)
RGBLED_NUM
 / 2); 
	}
}

620 
	$rgblight_£ågb_¶ave
(
uöt8_t
 
r
, uöt8_à
g
, uöt8_à
b
Ë{ 
	`rgblight_£ågb_ønge
‘, g, b, (uöt8_t)
RGBLED_NUM
 / 2, (uöt8_t)RGBLED_NUM); 
	}
}

622 
	$rgblight_£thsv_ma°î
(
uöt8_t
 
hue
, uöt8_à
ßt
, uöt8_à
vÆ
Ë{ 
	`rgblight_£thsv_ønge
(hue, s©, vÆ, 0, (uöt8_t)
RGBLED_NUM
 / 2); 
	}
}

624 
	$rgblight_£thsv_¶ave
(
uöt8_t
 
hue
, uöt8_à
ßt
, uöt8_à
vÆ
Ë{ 
	`rgblight_£thsv_ønge
(hue, s©, vÆ, (uöt8_t)
RGBLED_NUM
 / 2, (uöt8_t)RGBLED_NUM); 
	}
}

627 #ifde‡
RGBLIGHT_LAYERS


628 
	$rgblight_£t_œyî_°©e
(
uöt8_t
 
œyî
, 
boﬁ
 
íabÀd
) {

629 
rgblight_œyî_mask_t
 
mask
 = 1 << 
œyî
;

630 i‡(
íabÀd
) {

631 
rgblight_°©us
.
íabÀd_œyî_mask
 |
mask
;

633 
rgblight_°©us
.
íabÀd_œyî_mask
 &~
mask
;

635 
RGBLIGHT_SPLIT_SET_CHANGE_LAYERS
;

637 i‡(
rgblight_°©us
.
timî_íabÀd
 =
Ál£
) {

638 
	`rgblight_mode_n€ïrom
(
rgblight_c⁄fig
.
mode
);

641 #ifde‡
RGBLIGHT_LAYERS_OVERRIDE_RGB_OFF


643 i‡(!
rgblight_c⁄fig
.
íabÀ
) {

644 
	`rgblight_£t
();

647 
	}
}

649 
boﬁ
 
	$rgblight_gë_œyî_°©e
(
uöt8_t
 
œyî
) {

650 
rgblight_œyî_mask_t
 
mask
 = 1 << 
œyî
;

651  (
rgblight_°©us
.
íabÀd_œyî_mask
 & 
mask
) != 0;

652 
	}
}

655 
	$rgblight_œyîs_wrôe
() {

656 
uöt8_t
 
i
 = 0;

658 c⁄° 
rgblight_£gmít_t
 *c⁄° *
œyî_±r
 = 
rgblight_œyîs
; 
i
 < 
RGBLIGHT_MAX_LAYERS
;Üayer_ptr++, i++) {

659 i‡(!
	`rgblight_gë_œyî_°©e
(
i
)) {

662 c⁄° 
rgblight_£gmít_t
 *
£gmít_±r
 = 
	`pgm_ªad_±r
(
œyî_±r
);

663 i‡(
£gmít_±r
 =
NULL
) {

668 
rgblight_£gmít_t
 
£gmít
;

669 
	`mem˝y_P
(&
£gmít
, 
£gmít_±r
, (
rgblight_£gmít_t
));

670 i‡(
£gmít
.
ödex
 =
RGBLIGHT_END_SEGMENT_INDEX
) {

674 
LED_TYPE
 *c⁄° 
limô
 = &
Àd
[
	`MIN
(
£gmít
.
ödex
 + segmít.
cou¡
, 
RGBLED_NUM
)];

675 
LED_TYPE
 *
Àd_±r
 = &
Àd
[
£gmít
.
ödex
];Üed_±∏< 
limô
;Üed_ptr++) {

676 
	`£thsv
(
£gmít
.
hue
, segmít.
ßt
, segmít.
vÆ
, 
Àd_±r
);

678 
£gmít_±r
++;

681 
	}
}

683 #ifde‡
RGBLIGHT_LAYER_BLINK


684 
rgblight_œyî_mask_t
 
	g_blöked_œyî_mask
 = 0;

685 
uöt16_t
 
	g_blök_duøti⁄
 = 0;

686 
uöt16_t
 
	g_blök_timî
;

688 
	$rgblight_blök_œyî
(
uöt8_t
 
œyî
, 
uöt16_t
 
duøti⁄_ms
) {

689 
	`rgblight_£t_œyî_°©e
(
œyî
, 
åue
);

690 
_blöked_œyî_mask
 |1 << 
œyî
;

691 
_blök_timî
 = 
	`timî_ªad
();

692 
_blök_duøti⁄
 = 
duøti⁄_ms
;

693 
	}
}

695 
	$rgblight_unblök_œyîs
() {

696 i‡(
_blöked_œyî_mask
 !0 && 
	`timî_ñ≠£d
(
_blök_timî
Ë> 
_blök_duøti⁄
) {

697 
uöt8_t
 
œyî
 = 0;Üayî < 
RGBLIGHT_MAX_LAYERS
;Üayer++) {

698 i‡((
_blöked_œyî_mask
 & 1 << 
œyî
) != 0) {

699 
	`rgblight_£t_œyî_°©e
(
œyî
, 
Ál£
);

702 
_blöked_œyî_mask
 = 0;

704 
	}
}

709 
__©åibuã__
((
wók
)Ë
	$rgblight_ˇŒ_drivî
(
LED_TYPE
 *
°¨t_Àd
, 
uöt8_t
 
num_Àds
Ë{ 
	`ws2812_£éeds
(°¨t_Àd,Çum_Àds); 
	}
}

711 #i‚de‡
RGBLIGHT_CUSTOM_DRIVER


713 
	$rgblight_£t
() {

714 
LED_TYPE
 *
°¨t_Àd
;

715 
uöt8_t
 
num_Àds
 = 
rgblight_ønges
.
˛ùpög_num_Àds
;

717 i‡(!
rgblight_c⁄fig
.
íabÀ
) {

718 
uöt8_t
 
i
 = 
rgblight_ønges
.
ef„˘_°¨t_pos
; i <Ñgblight_ønges.
ef„˘_íd_pos
; i++) {

719 
Àd
[
i
].
r
 = 0;

720 
Àd
[
i
].
g
 = 0;

721 
Àd
[
i
].
b
 = 0;

722 #ifde‡
RGBW


723 
Àd
[
i
].
w
 = 0;

728 #ifde‡
RGBLIGHT_LAYERS


729 i‡(
rgblight_œyîs
 !
NULL


730 #i‚de‡
RGBLIGHT_LAYERS_OVERRIDE_RGB_OFF


731 && 
rgblight_c⁄fig
.
íabÀ


734 
	`rgblight_œyîs_wrôe
();

738 #ifde‡
RGBLIGHT_LED_MAP


739 
LED_TYPE
 
Àd0
[
RGBLED_NUM
];

740 
uöt8_t
 
i
 = 0; i < 
RGBLED_NUM
; i++) {

741 
Àd0
[
i
] = 
Àd
[
	`pgm_ªad_byã
(&
Àd_m≠
[i])];

743 
°¨t_Àd
 = 
Àd0
 + 
rgblight_ønges
.
˛ùpög_°¨t_pos
;

745 
°¨t_Àd
 = 
Àd
 + 
rgblight_ønges
.
˛ùpög_°¨t_pos
;

748 #ifde‡
RGBW


749 
uöt8_t
 
i
 = 0; i < 
num_Àds
; i++) {

750 
	`c⁄vît_rgb_to_rgbw
(&
°¨t_Àd
[
i
]);

753 
	`rgblight_ˇŒ_drivî
(
°¨t_Àd
, 
num_Àds
);

754 
	}
}

757 #ifde‡
RGBLIGHT_SPLIT


759 
uöt8_t
 
	$rgblight_gë_ch™ge_Êags
(Ë{  
rgblight_°©us
.
ch™ge_Êags
; 
	}
}

761 
	$rgblight_˛ór_ch™ge_Êags
(Ë{ 
rgblight_°©us
.
ch™ge_Êags
 = 0; 
	}
}

763 
	$rgblight_gë_syncöfo
(
rgblight_syncöfo_t
 *
syncöfo
) {

764 
syncöfo
->
c⁄fig
 = 
rgblight_c⁄fig
;

765 
syncöfo
->
°©us
 = 
rgblight_°©us
;

766 
	}
}

769 
	$rgblight_upd©e_sync
(
rgblight_syncöfo_t
 *
syncöfo
, 
boﬁ
 
wrôe_to_ì¥om
) {

770 #ifde‡
RGBLIGHT_LAYERS


771 i‡(
syncöfo
->
°©us
.
ch™ge_Êags
 & 
RGBLIGHT_STATUS_CHANGE_LAYERS
) {

772 
rgblight_°©us
.
íabÀd_œyî_mask
 = 
syncöfo
->
°©us
.enabled_layer_mask;

775 i‡(
syncöfo
->
°©us
.
ch™ge_Êags
 & 
RGBLIGHT_STATUS_CHANGE_MODE
) {

776 i‡(
syncöfo
->
c⁄fig
.
íabÀ
) {

777 
rgblight_c⁄fig
.
íabÀ
 = 1;

778 
	`rgblight_mode_ì¥om_hñ≥r
(
syncöfo
->
c⁄fig
.
mode
, 
wrôe_to_ì¥om
);

780 
	`rgblight_dißbÀ_n€ïrom
();

783 i‡(
syncöfo
->
°©us
.
ch™ge_Êags
 & 
RGBLIGHT_STATUS_CHANGE_HSVS
) {

784 
	`rgblight_£thsv_ì¥om_hñ≥r
(
syncöfo
->
c⁄fig
.
hue
, syncöfo->c⁄fig.
ßt
, syncöfo->c⁄fig.
vÆ
, 
wrôe_to_ì¥om
);

787 #ifde‡
RGBLIGHT_USE_TIMER


788 i‡(
syncöfo
->
°©us
.
ch™ge_Êags
 & 
RGBLIGHT_STATUS_CHANGE_TIMER
) {

789 i‡(
syncöfo
->
°©us
.
timî_íabÀd
) {

790 
	`rgblight_timî_íabÀ
();

792 
	`rgblight_timî_dißbÀ
();

795 #i‚de‡
RGBLIGHT_SPLIT_NO_ANIMATION_SYNC


796 i‡(
syncöfo
->
°©us
.
ch™ge_Êags
 & 
RGBLIGHT_STATUS_ANIMATION_TICK
) {

797 
™im©i⁄_°©us
.
ª°¨t
 = 
åue
;

801 
	}
}

804 #ifde‡
RGBLIGHT_USE_TIMER


806 (*
	tef„˘_func_t
)(
	t™im©i⁄_°©us_t
 *
	t™im
);

809 
	$rgblight_timî_öô
() {

826 
rgblight_°©us
.
timî_íabÀd
 = 
Ál£
;

827 
RGBLIGHT_SPLIT_SET_CHANGE_TIMER_ENABLE
;

828 
	}
}

829 
	$rgblight_timî_íabÀ
() {

830 i‡(!
	`is_°©ic_ef„˘
(
rgblight_c⁄fig
.
mode
)) {

831 
rgblight_°©us
.
timî_íabÀd
 = 
åue
;

833 
™im©i⁄_°©us
.
œ°_timî
 = 
	`timî_ªad
();

834 
RGBLIGHT_SPLIT_SET_CHANGE_TIMER_ENABLE
;

835 
	`d¥ötf
("rgblightÅimerÉnabled.\n");

836 
	}
}

837 
	$rgblight_timî_dißbÀ
() {

838 
rgblight_°©us
.
timî_íabÀd
 = 
Ál£
;

839 
RGBLIGHT_SPLIT_SET_CHANGE_TIMER_ENABLE
;

840 
	`d¥ötf
("rgblightÅimer disable.\n");

841 
	}
}

842 
	$rgblight_timî_toggÀ
() {

843 
	`d¥ötf
("rgblightÅimerÅoggle.\n");

844 i‡(
rgblight_°©us
.
timî_íabÀd
) {

845 
	`rgblight_timî_dißbÀ
();

847 
	`rgblight_timî_íabÀ
();

849 
	}
}

851 
	$rgblight_show_sﬁid_cﬁ‹
(
uöt8_t
 
r
, uöt8_à
g
, uöt8_à
b
) {

852 
	`rgblight_íabÀ
();

853 
	`rgblight_mode
(
RGBLIGHT_MODE_STATIC_LIGHT
);

854 
	`rgblight_£ågb
(
r
, 
g
, 
b
);

855 
	}
}

857 
	$rgblight_ef„˘_dummy
(
™im©i⁄_°©us_t
 *
™im
) {

867 
	}
}

869 
	$rgblight_èsk
() {

870 i‡(
rgblight_°©us
.
timî_íabÀd
) {

871 
ef„˘_func_t
 
ef„˘_func
 = 
rgblight_ef„˘_dummy
;

872 
uöt16_t
 
öãrvÆ_time
 = 2000;

873 
uöt8_t
 
dñè
 = 
rgblight_c⁄fig
.
mode
 - 
rgblight_°©us
.
ba£_mode
;

874 
™im©i⁄_°©us
.
dñè
 = delta;

879 #ifde‡
RGBLIGHT_EFFECT_BREATHING


880 i‡(
rgblight_°©us
.
ba£_mode
 =
RGBLIGHT_MODE_BREATHING
) {

882 
öãrvÆ_time
 = 
	`gë_öãrvÆ_time
(&
RGBLED_BREATHING_INTERVALS
[
dñè
], 1, 100);

883 
ef„˘_func
 = 
rgblight_ef„˘_bª©hög
;

886 #ifde‡
RGBLIGHT_EFFECT_RAINBOW_MOOD


887 i‡(
rgblight_°©us
.
ba£_mode
 =
RGBLIGHT_MODE_RAINBOW_MOOD
) {

889 
öãrvÆ_time
 = 
	`gë_öãrvÆ_time
(&
RGBLED_RAINBOW_MOOD_INTERVALS
[
dñè
], 5, 100);

890 
ef„˘_func
 = 
rgblight_ef„˘_øöbow_mood
;

893 #ifde‡
RGBLIGHT_EFFECT_RAINBOW_SWIRL


894 i‡(
rgblight_°©us
.
ba£_mode
 =
RGBLIGHT_MODE_RAINBOW_SWIRL
) {

896 
öãrvÆ_time
 = 
	`gë_öãrvÆ_time
(&
RGBLED_RAINBOW_SWIRL_INTERVALS
[
dñè
 / 2], 1, 100);

897 
ef„˘_func
 = 
rgblight_ef„˘_øöbow_swúl
;

900 #ifde‡
RGBLIGHT_EFFECT_SNAKE


901 i‡(
rgblight_°©us
.
ba£_mode
 =
RGBLIGHT_MODE_SNAKE
) {

903 
öãrvÆ_time
 = 
	`gë_öãrvÆ_time
(&
RGBLED_SNAKE_INTERVALS
[
dñè
 / 2], 1, 200);

904 
ef„˘_func
 = 
rgblight_ef„˘_¢ake
;

907 #ifde‡
RGBLIGHT_EFFECT_KNIGHT


908 i‡(
rgblight_°©us
.
ba£_mode
 =
RGBLIGHT_MODE_KNIGHT
) {

910 
öãrvÆ_time
 = 
	`gë_öãrvÆ_time
(&
RGBLED_KNIGHT_INTERVALS
[
dñè
], 5, 100);

911 
ef„˘_func
 = 
rgblight_ef„˘_knight
;

914 #ifde‡
RGBLIGHT_EFFECT_CHRISTMAS


915 i‡(
rgblight_°©us
.
ba£_mode
 =
RGBLIGHT_MODE_CHRISTMAS
) {

917 
öãrvÆ_time
 = 
RGBLIGHT_EFFECT_CHRISTMAS_INTERVAL
;

918 
ef„˘_func
 = (
ef„˘_func_t
)
rgblight_ef„˘_chri°mas
;

921 #ifde‡
RGBLIGHT_EFFECT_RGB_TEST


922 i‡(
rgblight_°©us
.
ba£_mode
 =
RGBLIGHT_MODE_RGB_TEST
) {

924 
öãrvÆ_time
 = 
	`pgm_ªad_w‹d
(&
RGBLED_RGBTEST_INTERVALS
[0]);

925 
ef„˘_func
 = (
ef„˘_func_t
)
rgblight_ef„˘_rgbã°
;

928 #ifde‡
RGBLIGHT_EFFECT_ALTERNATING


929 i‡(
rgblight_°©us
.
ba£_mode
 =
RGBLIGHT_MODE_ALTERNATING
) {

930 
öãrvÆ_time
 = 500;

931 
ef„˘_func
 = (
ef„˘_func_t
)
rgblight_ef„˘_Æã∫©ög
;

934 #ifde‡
RGBLIGHT_EFFECT_TWINKLE


935 i‡(
rgblight_°©us
.
ba£_mode
 =
RGBLIGHT_MODE_TWINKLE
) {

936 
öãrvÆ_time
 = 
	`gë_öãrvÆ_time
(&
RGBLED_TWINKLE_INTERVALS
[
dñè
 % 3], 5, 50);

937 
ef„˘_func
 = (
ef„˘_func_t
)
rgblight_ef„˘_twökÀ
;

940 i‡(
™im©i⁄_°©us
.
ª°¨t
) {

941 
™im©i⁄_°©us
.
ª°¨t
 = 
Ál£
;

942 
™im©i⁄_°©us
.
œ°_timî
 = 
	`timî_ªad
(Ë- 
öãrvÆ_time
 - 1;

943 
™im©i⁄_°©us
.
pos16
 = 0;

945 i‡(
	`timî_ñ≠£d
(
™im©i⁄_°©us
.
œ°_timî
Ë>
öãrvÆ_time
) {

946 #i‡
	`deföed
(
RGBLIGHT_SPLIT
Ë&& !deföed(
RGBLIGHT_SPLIT_NO_ANIMATION_SYNC
)

947 
uöt16_t
 
ªp‹t_œ°_timî
 = 0;

948 
boﬁ
 
tick_Êag
 = 
Ál£
;

949 
uöt16_t
 
ﬁdpos16
;

950 i‡(
tick_Êag
) {

951 
tick_Êag
 = 
Ál£
;

952 i‡(
	`timî_ñ≠£d
(
ªp‹t_œ°_timî
) >= 30000) {

953 
ªp‹t_œ°_timî
 = 
	`timî_ªad
();

954 
	`d¥ötf
("rgblightánimationÅickÑeportÅo slave\n");

955 
RGBLIGHT_SPLIT_ANIMATION_TICK
;

958 
ﬁdpos16
 = 
™im©i⁄_°©us
.
pos16
;

960 
™im©i⁄_°©us
.
œ°_timî
 +
öãrvÆ_time
;

961 
	`ef„˘_func
(&
™im©i⁄_°©us
);

962 #i‡
	`deföed
(
RGBLIGHT_SPLIT
Ë&& !deföed(
RGBLIGHT_SPLIT_NO_ANIMATION_SYNC
)

963 i‡(
™im©i⁄_°©us
.
pos16
 =0 && 
ﬁdpos16
 != 0) {

964 
tick_Êag
 = 
åue
;

970 #ifde‡
RGBLIGHT_LAYER_BLINK


971 
	`rgblight_unblök_œyîs
();

973 
	}
}

978 #ifde‡
RGBLIGHT_EFFECT_BREATHING


980 #i‚de‡
RGBLIGHT_EFFECT_BREATHE_CENTER


981 #i‚de‡
RGBLIGHT_BREATHE_TABLE_SIZE


982 
	#RGBLIGHT_BREATHE_TABLE_SIZE
 256

984 
	~<rgblight_bª©he_èbÀ.h
>

	)

987 
__©åibuã__
((
wók
)Ëc⁄° 
uöt8_t
 
	gRGBLED_BREATHING_INTERVALS
[] 
	gPROGMEM
 = {30, 20, 10, 5};

989 
	$rgblight_ef„˘_bª©hög
(
™im©i⁄_°©us_t
 *
™im
) {

990 
vÆ
;

993 #ifde‡
RGBLIGHT_EFFECT_BREATHE_TABLE


994 
vÆ
 = 
	`pgm_ªad_byã
(&
rgblight_ef„˘_bª©he_èbÀ
[
™im
->
pos
 / 
èbÀ_sˇÀ
]);

996 
vÆ
 = (
	`exp
(
	`sö
((
™im
->
pos
 / 255.0Ë* 
M_PI
)Ë- 
RGBLIGHT_EFFECT_BREATHE_CENTER
 / 
M_E
Ë* (
RGBLIGHT_EFFECT_BREATHE_MAX
 / (M_E - 1 / M_E));

998 
	`rgblight_£thsv_n€ïrom_ﬁd
(
rgblight_c⁄fig
.
hue
,Ñgblight_c⁄fig.
ßt
, 
vÆ
);

999 
™im
->
pos
 = (anim->pos + 1);

1000 
	}
}

1003 #ifde‡
RGBLIGHT_EFFECT_RAINBOW_MOOD


1004 
__©åibuã__
((
wók
)Ëc⁄° 
uöt8_t
 
	gRGBLED_RAINBOW_MOOD_INTERVALS
[] 
	gPROGMEM
 = {120, 60, 30};

1006 
	$rgblight_ef„˘_øöbow_mood
(
™im©i⁄_°©us_t
 *
™im
) {

1007 
	`rgblight_£thsv_n€ïrom_ﬁd
(
™im
->
cuºít_hue
, 
rgblight_c⁄fig
.
ßt
,Ñgblight_c⁄fig.
vÆ
);

1008 
™im
->
cuºít_hue
++;

1009 
	}
}

1012 #ifde‡
RGBLIGHT_EFFECT_RAINBOW_SWIRL


1013 #i‚de‡
RGBLIGHT_RAINBOW_SWIRL_RANGE


1014 
	#RGBLIGHT_RAINBOW_SWIRL_RANGE
 255

	)

1017 
__©åibuã__
((
wók
)Ëc⁄° 
uöt8_t
 
	gRGBLED_RAINBOW_SWIRL_INTERVALS
[] 
	gPROGMEM
 = {100, 50, 20};

1019 
	$rgblight_ef„˘_øöbow_swúl
(
™im©i⁄_°©us_t
 *
™im
) {

1020 
uöt8_t
 
hue
;

1021 
uöt8_t
 
i
;

1023 
i
 = 0; i < 
rgblight_ønges
.
ef„˘_num_Àds
; i++) {

1024 
hue
 = (
RGBLIGHT_RAINBOW_SWIRL_RANGE
 / 
rgblight_ønges
.
ef„˘_num_Àds
 * 
i
 + 
™im
->
cuºít_hue
);

1025 
	`£thsv
(
hue
, 
rgblight_c⁄fig
.
ßt
,Ñgblight_c⁄fig.
vÆ
, (
LED_TYPE
 *)&
Àd
[
i
 + 
rgblight_ønges
.
ef„˘_°¨t_pos
]);

1027 
	`rgblight_£t
();

1029 i‡(
™im
->
dñè
 % 2) {

1030 
™im
->
cuºít_hue
++;

1032 
™im
->
cuºít_hue
--;

1034 
	}
}

1037 #ifde‡
RGBLIGHT_EFFECT_SNAKE


1038 
__©åibuã__
((
wók
)Ëc⁄° 
uöt8_t
 
	gRGBLED_SNAKE_INTERVALS
[] 
	gPROGMEM
 = {100, 50, 20};

1040 
	$rgblight_ef„˘_¢ake
(
™im©i⁄_°©us_t
 *
™im
) {

1041 
uöt8_t
 
pos
 = 0;

1042 
uöt8_t
 
i
, 
j
;

1043 
öt8_t
 
k
;

1044 
öt8_t
 
ö¸emít
 = 1;

1046 i‡(
™im
->
dñè
 % 2) {

1047 
ö¸emít
 = -1;

1050 #i‡
	`deföed
(
RGBLIGHT_SPLIT
Ë&& !deföed(
RGBLIGHT_SPLIT_NO_ANIMATION_SYNC
)

1051 i‡(
™im
->
pos
 == 0) {

1052 i‡(
ö¸emít
 == 1) {

1053 
pos
 = 
rgblight_ønges
.
ef„˘_num_Àds
 - 1;

1055 
pos
 = 0;

1057 
™im
->
pos
 = 1;

1061 
i
 = 0; i < 
rgblight_ønges
.
ef„˘_num_Àds
; i++) {

1062 
LED_TYPE
 *
Àdp
 = 
Àd
 + 
i
 + 
rgblight_ønges
.
ef„˘_°¨t_pos
;

1063 
Àdp
->
r
 = 0;

1064 
Àdp
->
g
 = 0;

1065 
Àdp
->
b
 = 0;

1066 #ifde‡
RGBW


1067 
Àdp
->
w
 = 0;

1069 
j
 = 0; j < 
RGBLIGHT_EFFECT_SNAKE_LENGTH
; j++) {

1070 
k
 = 
pos
 + 
j
 * 
ö¸emít
;

1071 i‡(
k
 > 
RGBLED_NUM
) {

1072 
k
 = k % 
RGBLED_NUM
;

1074 i‡(
k
 < 0) {

1075 
k
 = k + 
rgblight_ønges
.
ef„˘_num_Àds
;

1077 i‡(
i
 =
k
) {

1078 
	`£thsv
(
rgblight_c⁄fig
.
hue
,Ñgblight_c⁄fig.
ßt
, (
uöt8_t
)‘gblight_c⁄fig.
vÆ
 * (
RGBLIGHT_EFFECT_SNAKE_LENGTH
 - 
j
Ë/ RGBLIGHT_EFFECT_SNAKE_LENGTH), 
Àdp
);

1082 
	`rgblight_£t
();

1083 i‡(
ö¸emít
 == 1) {

1084 i‡(
pos
 - 1 < 0) {

1085 
pos
 = 
rgblight_ønges
.
ef„˘_num_Àds
 - 1;

1086 #i‡
	`deföed
(
RGBLIGHT_SPLIT
Ë&& !deföed(
RGBLIGHT_SPLIT_NO_ANIMATION_SYNC
)

1087 
™im
->
pos
 = 0;

1090 
pos
 -= 1;

1091 #i‡
	`deföed
(
RGBLIGHT_SPLIT
Ë&& !deföed(
RGBLIGHT_SPLIT_NO_ANIMATION_SYNC
)

1092 
™im
->
pos
 = 1;

1096 
pos
 = (po†+ 1Ë% 
rgblight_ønges
.
ef„˘_num_Àds
;

1097 #i‡
	`deföed
(
RGBLIGHT_SPLIT
Ë&& !deföed(
RGBLIGHT_SPLIT_NO_ANIMATION_SYNC
)

1098 
™im
->
pos
 =Öos;

1101 
	}
}

1104 #ifde‡
RGBLIGHT_EFFECT_KNIGHT


1105 
__©åibuã__
((
wók
)Ëc⁄° 
uöt8_t
 
	gRGBLED_KNIGHT_INTERVALS
[] 
	gPROGMEM
 = {127, 63, 31};

1107 
	$rgblight_ef„˘_knight
(
™im©i⁄_°©us_t
 *
™im
) {

1108 
öt8_t
 
low_bound
 = 0;

1109 
öt8_t
 
high_bound
 = 
RGBLIGHT_EFFECT_KNIGHT_LENGTH
 - 1;

1110 
öt8_t
 
ö¸emít
 = 1;

1111 
uöt8_t
 
i
, 
cur
;

1113 #i‡
	`deföed
(
RGBLIGHT_SPLIT
Ë&& !deföed(
RGBLIGHT_SPLIT_NO_ANIMATION_SYNC
)

1114 i‡(
™im
->
pos
 == 0) {

1115 
™im
->
pos
 = 1;

1116 
low_bound
 = 0;

1117 
high_bound
 = 
RGBLIGHT_EFFECT_KNIGHT_LENGTH
 - 1;

1118 
ö¸emít
 = 1;

1122 
i
 = 
rgblight_ønges
.
ef„˘_°¨t_pos
; i <Ñgblight_ønges.
ef„˘_íd_pos
; i++) {

1123 
Àd
[
i
].
r
 = 0;

1124 
Àd
[
i
].
g
 = 0;

1125 
Àd
[
i
].
b
 = 0;

1126 #ifde‡
RGBW


1127 
Àd
[
i
].
w
 = 0;

1131 
i
 = 0; i < 
RGBLIGHT_EFFECT_KNIGHT_LED_NUM
; i++) {

1132 
cur
 = (
i
 + 
RGBLIGHT_EFFECT_KNIGHT_OFFSET
Ë% 
rgblight_ønges
.
ef„˘_num_Àds
 +Ñgblight_ønges.
ef„˘_°¨t_pos
;

1134 i‡(
i
 >
low_bound
 && i <
high_bound
) {

1135 
	`£thsv
(
rgblight_c⁄fig
.
hue
,Ñgblight_c⁄fig.
ßt
,Ñgblight_c⁄fig.
vÆ
, (
LED_TYPE
 *)&
Àd
[
cur
]);

1137 
Àd
[
cur
].
r
 = 0;

1138 
Àd
[
cur
].
g
 = 0;

1139 
Àd
[
cur
].
b
 = 0;

1140 #ifde‡
RGBW


1141 
Àd
[
cur
].
w
 = 0;

1145 
	`rgblight_£t
();

1149 
low_bound
 +
ö¸emít
;

1150 
high_bound
 +
ö¸emít
;

1152 i‡(
high_bound
 <0 || 
low_bound
 >
RGBLIGHT_EFFECT_KNIGHT_LED_NUM
 - 1) {

1153 
ö¸emít
 = -increment;

1154 #i‡
	`deföed
(
RGBLIGHT_SPLIT
Ë&& !deföed(
RGBLIGHT_SPLIT_NO_ANIMATION_SYNC
)

1155 i‡(
ö¸emít
 == 1) {

1156 
™im
->
pos
 = 0;

1160 
	}
}

1163 #ifde‡
RGBLIGHT_EFFECT_CHRISTMAS


1164 
	#CUBED
(
x
Ë((xË* (xË* (x))

	)

1169 
	$rgblight_ef„˘_chri°mas
(
™im©i⁄_°©us_t
 *
™im
) {

1170 
öt8_t
 
ö¸emít
 = 1;

1171 c⁄° 
uöt8_t
 
max_pos
 = 32;

1172 c⁄° 
uöt8_t
 
hue_gªí
 = 85;

1174 
uöt32_t
 
xa
;

1175 
uöt8_t
 
hue
, 
vÆ
;

1176 
uöt8_t
 
i
;

1180 
xa
 = 
	`CUBED
((
uöt32_t
)
™im
->
pos
);

1181 
hue
 = ((
uöt32_t
)
hue_gªí
Ë* 
xa
 / (x®+ 
	`CUBED
((uöt32_t)(
max_pos
 - 
™im
->
pos
)));

1183 
vÆ
 = 255 - (3 * (
hue
 < 
hue_gªí
 / 2 ? hue : hue_green - hue) / 2);

1185 
i
 = 0; i < 
rgblight_ønges
.
ef„˘_num_Àds
; i++) {

1186 
uöt8_t
 
loˇl_hue
 = (
i
 / 
RGBLIGHT_EFFECT_CHRISTMAS_STEP
Ë% 2 ? 
hue
 : 
hue_gªí
 - hue;

1187 
	`£thsv
(
loˇl_hue
, 
rgblight_c⁄fig
.
ßt
, 
vÆ
, (
LED_TYPE
 *)&
Àd
[
i
 + 
rgblight_ønges
.
ef„˘_°¨t_pos
]);

1189 
	`rgblight_£t
();

1191 i‡(
™im
->
pos
 == 0) {

1192 
ö¸emít
 = 1;

1193 } i‡(
™im
->
pos
 =
max_pos
) {

1194 
ö¸emít
 = -1;

1196 
™im
->
pos
 +
ö¸emít
;

1197 
	}
}

1200 #ifde‡
RGBLIGHT_EFFECT_RGB_TEST


1201 
__©åibuã__
((
wók
)Ëc⁄° 
uöt16_t
 
	gRGBLED_RGBTEST_INTERVALS
[] 
	gPROGMEM
 = {1024};

1203 
	$rgblight_ef„˘_rgbã°
(
™im©i⁄_°©us_t
 *
™im
) {

1204 
uöt8_t
 
maxvÆ
 = 0;

1205 
uöt8_t
 
g
;

1206 
uöt8_t
 
r
;

1207 
uöt8_t
 
b
;

1209 i‡(
maxvÆ
 == 0) {

1210 
LED_TYPE
 
tmp_Àd
;

1211 
	`£thsv
(0, 255, 
RGBLIGHT_LIMIT_VAL
, &
tmp_Àd
);

1212 
maxvÆ
 = 
tmp_Àd
.
r
;

1214 
g
 = 
r
 = 
b
 = 0;

1215 
™im
->
pos
) {

1217 
r
 = 
maxvÆ
;

1220 
g
 = 
maxvÆ
;

1223 
b
 = 
maxvÆ
;

1226 
	`rgblight_£ågb
(
r
, 
g
, 
b
);

1227 
™im
->
pos
 = (anim->pos + 1) % 3;

1228 
	}
}

1231 #ifde‡
RGBLIGHT_EFFECT_ALTERNATING


1232 
	$rgblight_ef„˘_Æã∫©ög
(
™im©i⁄_°©us_t
 *
™im
) {

1233 
i
 = 0; i < 
rgblight_ønges
.
ef„˘_num_Àds
; i++) {

1234 
LED_TYPE
 *
Àdp
 = 
Àd
 + 
i
 + 
rgblight_ønges
.
ef„˘_°¨t_pos
;

1235 i‡(
i
 < 
rgblight_ønges
.
ef„˘_num_Àds
 / 2 && 
™im
->
pos
) {

1236 
	`£thsv
(
rgblight_c⁄fig
.
hue
,Ñgblight_c⁄fig.
ßt
,Ñgblight_c⁄fig.
vÆ
, 
Àdp
);

1237 } i‡(
i
 >
rgblight_ønges
.
ef„˘_num_Àds
 / 2 && !
™im
->
pos
) {

1238 
	`£thsv
(
rgblight_c⁄fig
.
hue
,Ñgblight_c⁄fig.
ßt
,Ñgblight_c⁄fig.
vÆ
, 
Àdp
);

1240 
	`£thsv
(
rgblight_c⁄fig
.
hue
,Ñgblight_c⁄fig.
ßt
, 0, 
Àdp
);

1243 
	`rgblight_£t
();

1244 
™im
->
pos
 = (anim->pos + 1) % 2;

1245 
	}
}

1248 #ifde‡
RGBLIGHT_EFFECT_TWINKLE


1249 
__©åibuã__
((
wók
)Ëc⁄° 
uöt8_t
 
	gRGBLED_TWINKLE_INTERVALS
[] 
	gPROGMEM
 = {50, 25, 10};

1251 
	sPACKED
 {

1252 
HSV
 
	mhsv
;

1253 
uöt8_t
 
	mli„
;

1254 
boﬁ
 
	mup
;

1255 } 
	tTwökÀSèã
;

1257 
TwökÀSèã
 
	gÀd_twökÀ_°©e
[
RGBLED_NUM
];

1259 
	$rgblight_ef„˘_twökÀ
(
™im©i⁄_°©us_t
 *
™im
) {

1260 
boﬁ
 
øndom_cﬁ‹
 = 
™im
->
dñè
 / 3;

1261 
boﬁ
 
ª°¨t
 = 
™im
->
pos
 == 0;

1262 
™im
->
pos
 = 1;

1264 
uöt8_t
 
i
 = 0; i < 
rgblight_ønges
.
ef„˘_num_Àds
; i++) {

1265 
TwökÀSèã
 *
t
 = &(
Àd_twökÀ_°©e
[
i
]);

1266 
HSV
 * 
c
 = &(
t
->
hsv
);

1267 i‡(
ª°¨t
) {

1269 
t
->
li„
 = 0;

1270 
t
->
hsv
.
v
 = 0;

1271 } i‡(
t
->
li„
) {

1273 
t
->
li„
--;

1274 
uöt8_t
 
⁄
 = 
t
->
up
 ? 
RGBLIGHT_EFFECT_TWINKLE_LIFE
 -Å->
li„
 :Å->life;

1275 
c
->
v
 = (
uöt16_t
)
rgblight_c⁄fig
.
vÆ
 * 
⁄
 / 
RGBLIGHT_EFFECT_TWINKLE_LIFE
;

1276 i‡(
t
->
li„
 =0 &&Å->
up
) {

1277 
t
->
up
 = 
Ál£
;

1278 
t
->
li„
 = 
RGBLIGHT_EFFECT_TWINKLE_LIFE
;

1280 i‡(!
øndom_cﬁ‹
) {

1281 
c
->
h
 = 
rgblight_c⁄fig
.
hue
;

1282 
c
->
s
 = 
rgblight_c⁄fig
.
ßt
;

1284 } i‡(
	`ønd
(Ë< 
RAND_MAX
 * 
RGBLIGHT_EFFECT_TWINKLE_PROBABILITY
) {

1286 
c
->
h
 = 
øndom_cﬁ‹
 ? 
	`ønd
(Ë% 0xFF : 
rgblight_c⁄fig
.
hue
;

1287 
c
->
s
 = 
øndom_cﬁ‹
 ? (
	`ønd
(Ë% (
rgblight_c⁄fig
.
ßt
 / 2)) + (rgblight_config.sat / 2) :Ñgblight_config.sat;

1288 
c
->
v
 = 0;

1289 
t
->
li„
 = 
RGBLIGHT_EFFECT_TWINKLE_LIFE
;

1290 
t
->
up
 = 
åue
;

1295 
LED_TYPE
 *
Àdp
 = 
Àd
 + 
i
 + 
rgblight_ønges
.
ef„˘_°¨t_pos
;

1296 
	`£thsv
(
c
->
h
, c->
s
, c->
v
, 
Àdp
);

1299 
	`rgblight_£t
();

1300 
	}
}

	@rgblight.h

16 #i‚de‡
RGBLIGHT_H


17 
	#RGBLIGHT_H


	)

71 #ifde‡
RGBLIGHT_ANIMATIONS


73 
	#RGBLIGHT_EFFECT_BREATHING


	)

74 
	#RGBLIGHT_EFFECT_RAINBOW_MOOD


	)

75 
	#RGBLIGHT_EFFECT_RAINBOW_SWIRL


	)

76 
	#RGBLIGHT_EFFECT_SNAKE


	)

77 
	#RGBLIGHT_EFFECT_KNIGHT


	)

78 
	#RGBLIGHT_EFFECT_CHRISTMAS


	)

79 
	#RGBLIGHT_EFFECT_STATIC_GRADIENT


	)

80 
	#RGBLIGHT_EFFECT_RGB_TEST


	)

81 
	#RGBLIGHT_EFFECT_ALTERNATING


	)

82 
	#RGBLIGHT_EFFECT_TWINKLE


	)

85 #ifde‡
RGBLIGHT_STATIC_PATTERNS


86 
	#RGBLIGHT_EFFECT_STATIC_GRADIENT


	)

92 #i‡ 
deföed
(
RGBLIGHT_EFFECT_BREATHING
) \

93 || 
deföed
(
RGBLIGHT_EFFECT_RAINBOW_MOOD
) \

94 || 
deföed
(
RGBLIGHT_EFFECT_RAINBOW_SWIRL
) \

95 || 
deföed
(
RGBLIGHT_EFFECT_SNAKE
) \

96 || 
deföed
(
RGBLIGHT_EFFECT_KNIGHT
) \

97 || 
deföed
(
RGBLIGHT_EFFECT_CHRISTMAS
) \

98 || 
deföed
(
RGBLIGHT_EFFECT_RGB_TEST
) \

99 || 
deföed
(
RGBLIGHT_EFFECT_ALTERNATING
) \

100 || 
	$deföed
(
RGBLIGHT_EFFECT_TWINKLE
)

101 
	#RGBLIGHT_USE_TIMER


	)

106 
	#_RGBM_SINGLE_STATIC
(
sym
Ë
RGBLIGHT_MODE_
##sym,

	)

107 
	#_RGBM_SINGLE_DYNAMIC
(
sym
Ë
RGBLIGHT_MODE_
##sym,

	)

108 
	#_RGBM_MULTI_STATIC
(
sym
Ë
RGBLIGHT_MODE_
##sym,

	)

109 
	#_RGBM_MULTI_DYNAMIC
(
sym
Ë
RGBLIGHT_MODE_
##sym,

	)

110 
	#_RGBM_TMP_STATIC
(
sym
, 
msym
Ë
RGBLIGHT_MODE_
##sym,

	)

111 
	#_RGBM_TMP_DYNAMIC
(
sym
, 
msym
Ë
RGBLIGHT_MODE_
##sym,

	)

112 
	eRGBLIGHT_EFFECT_MODE
 {

113 
RGBLIGHT_MODE_zîo
 = 0,

114 
	~"rgblight_modes.h
"

115 
RGBLIGHT_MODE_œ°


118 #i‚de‡
RGBLIGHT_H_DUMMY_DEFINE


120 
	#RGBLIGHT_MODES
 (
RGBLIGHT_MODE_œ°
 - 1)

	)

124 #i‚de‡
RGBLIGHT_EFFECT_BREATHE_MAX


125 
	#RGBLIGHT_EFFECT_BREATHE_MAX
 255

127 

	)

128 #i‚de‡
RGBLIGHT_EFFECT_SNAKE_LENGTH


129 
	#RGBLIGHT_EFFECT_SNAKE_LENGTH
 4

	)

132 #i‚de‡
RGBLIGHT_EFFECT_KNIGHT_LENGTH


133 
	#RGBLIGHT_EFFECT_KNIGHT_LENGTH
 3

	)

136 #i‚de‡
RGBLIGHT_EFFECT_KNIGHT_OFFSET


137 
	#RGBLIGHT_EFFECT_KNIGHT_OFFSET
 0

	)

140 #i‚de‡
RGBLIGHT_EFFECT_KNIGHT_LED_NUM


141 
	#RGBLIGHT_EFFECT_KNIGHT_LED_NUM
 (
rgblight_ønges
.
ef„˘_num_Àds
)

	)

144 #i‚de‡
RGBLIGHT_EFFECT_CHRISTMAS_INTERVAL


145 
	#RGBLIGHT_EFFECT_CHRISTMAS_INTERVAL
 40

	)

148 #i‚de‡
RGBLIGHT_EFFECT_CHRISTMAS_STEP


149 
	#RGBLIGHT_EFFECT_CHRISTMAS_STEP
 2

	)

152 #i‚de‡
RGBLIGHT_EFFECT_TWINKLE_LIFE


153 
	#RGBLIGHT_EFFECT_TWINKLE_LIFE
 75

	)

156 #i‚de‡
RGBLIGHT_EFFECT_TWINKLE_PROBABILITY


157 
	#RGBLIGHT_EFFECT_TWINKLE_PROBABILITY
 1 / 127

	)

160 #i‚de‡
RGBLIGHT_HUE_STEP


161 
	#RGBLIGHT_HUE_STEP
 8

	)

163 #i‚de‡
RGBLIGHT_SAT_STEP


164 
	#RGBLIGHT_SAT_STEP
 17

	)

166 #i‚de‡
RGBLIGHT_VAL_STEP


167 
	#RGBLIGHT_VAL_STEP
 17

	)

169 #i‚de‡
RGBLIGHT_LIMIT_VAL


170 
	#RGBLIGHT_LIMIT_VAL
 255

	)

173 
	#RGBLED_TIMER_TOP
 
F_CPU
 / (256 * 64)

	)

176 
	~<°döt.h
>

177 
	~<°dboﬁ.h
>

178 
	~"ìc⁄fig.h
"

179 
	~"ws2812.h
"

180 
	~"cﬁ‹.h
"

181 
	~"rgblight_li°.h
"

183 #i‡
	`deföed
(
__AVR__
)

184 
	~<avr/pgm•a˚.h
>

187 #ifde‡
RGBLIGHT_LAYERS


189 
uöt8_t
 
ödex
;

190 
uöt8_t
 
cou¡
;

191 
uöt8_t
 
hue
;

192 
uöt8_t
 
ßt
;

193 
uöt8_t
 
vÆ
;

194 } 
	trgblight_£gmít_t
;

196 
	#RGBLIGHT_END_SEGMENT_INDEX
 (255)

	)

197 
	#RGBLIGHT_END_SEGMENTS
 \

198 { 
RGBLIGHT_END_SEGMENT_INDEX
, 0, 0, 0 
	}

	)
}

199 #i‚de‡
RGBLIGHT_MAX_LAYERS


200 
	#RGBLIGHT_MAX_LAYERS
 8

	)

202 #i‡
RGBLIGHT_MAX_LAYERS
 <= 0

203 #îr‹ 
övÆid
 
RGBLIGHT_MAX_LAYERS
 
vÆue
 (
mu°
 
be
 >= 1)

204 #ñi‡
RGBLIGHT_MAX_LAYERS
 <= 8

205 
uöt8_t
 
	trgblight_œyî_mask_t
;

206 #ñi‡
RGBLIGHT_MAX_LAYERS
 <= 16

207 
uöt16_t
 
	trgblight_œyî_mask_t
;

208 #ñi‡
RGBLIGHT_MAX_LAYERS
 <= 32

209 
uöt32_t
 
	trgblight_œyî_mask_t
;

211 #îr‹ 
övÆid
 
RGBLIGHT_MAX_LAYERS
 
vÆue
 (
mu°
 
be
 <= 32)

213 
	#RGBLIGHT_LAYER_SEGMENTS
(...) \

214 { 
__VA_ARGS__
, 
RGBLIGHT_END_SEGMENTS
 }

	)

215 
	#RGBLIGHT_LAYERS_LIST
(...) \

216 { 
__VA_ARGS__
, 
NULL
 }

	)

219 
rgblight_£t_œyî_°©e
(
uöt8_t
 
œyî
, 
boﬁ
 
íabÀd
);

220 
boﬁ
 
rgblight_gë_œyî_°©e
(
uöt8_t
 
œyî
);

223 c⁄° 
rgblight_£gmít_t
 *c⁄° *
rgblight_œyîs
;

225 #ifde‡
RGBLIGHT_LAYER_BLINK


226 
	#RGBLIGHT_USE_TIMER


	)

227 
rgblight_blök_œyî
(
uöt8_t
 
œyî
, 
uöt16_t
 
duøti⁄_ms
);

232 
LED_TYPE
 
Àd
[
RGBLED_NUM
];

234 c⁄° 
uöt8_t
 
RGBLED_BREATHING_INTERVALS
[4] 
PROGMEM
;

235 c⁄° 
uöt8_t
 
RGBLED_RAINBOW_MOOD_INTERVALS
[3] 
PROGMEM
;

236 c⁄° 
uöt8_t
 
RGBLED_RAINBOW_SWIRL_INTERVALS
[3] 
PROGMEM
;

237 c⁄° 
uöt8_t
 
RGBLED_SNAKE_INTERVALS
[3] 
PROGMEM
;

238 c⁄° 
uöt8_t
 
RGBLED_KNIGHT_INTERVALS
[3] 
PROGMEM
;

239 c⁄° 
uöt16_t
 
RGBLED_RGBTEST_INTERVALS
[1] 
PROGMEM
;

240 c⁄° 
uöt8_t
 
RGBLED_TWINKLE_INTERVALS
[3] 
PROGMEM
;

241 
boﬁ
 
is_rgblight_öôülized
;

245 
uöt32_t
 
	møw
;

247 
boﬁ
 
	míabÀ
 : 1;

248 
uöt8_t
 
	mmode
 : 7;

249 
uöt8_t
 
	mhue
 : 8;

250 
uöt8_t
 
	mßt
 : 8;

251 
uöt8_t
 
	mvÆ
 : 8;

252 
uöt8_t
 
	m•ìd
 : 8;

254 } 
	trgblight_c⁄fig_t
;

256 
	s_rgblight_°©us_t
 {

257 
uöt8_t
 
	mba£_mode
;

258 
boﬁ
 
	mtimî_íabÀd
;

259 #ifde‡
RGBLIGHT_SPLIT


260 
uöt8_t
 
	mch™ge_Êags
;

262 #ifde‡
RGBLIGHT_LAYERS


263 
rgblight_œyî_mask_t
 
	míabÀd_œyî_mask
;

265 } 
	trgblight_°©us_t
;

270 
	s_rgblight_ønges_t
 {

271 
uöt8_t
 
	m˛ùpög_°¨t_pos
;

272 
uöt8_t
 
	m˛ùpög_num_Àds
;

273 
uöt8_t
 
	mef„˘_°¨t_pos
;

274 
uöt8_t
 
	mef„˘_íd_pos
;

275 
uöt8_t
 
	mef„˘_num_Àds
;

276 } 
	trgblight_ønges_t
;

278 
rgblight_ønges_t
 
rgblight_ønges
;

281 
£thsv
(
uöt8_t
 
hue
, uöt8_à
ßt
, uöt8_à
vÆ
, 
LED_TYPE
 *
Àd1
);

282 
£thsv_øw
(
uöt8_t
 
hue
, uöt8_à
ßt
, uöt8_à
vÆ
, 
LED_TYPE
 *
Àd1
);

283 
£ågb
(
uöt8_t
 
r
, uöt8_à
g
, uöt8_à
b
, 
LED_TYPE
 *
Àd1
);

286 
rgblight_£t
();

287 
rgblight_£t_˛ùpög_ønge
(
uöt8_t
 
°¨t_pos
, uöt8_à
num_Àds
);

291 
rgblight_£t_ef„˘_ønge
(
uöt8_t
 
°¨t_pos
, uöt8_à
num_Àds
);

294 
rgblight_£ågb_©
(
uöt8_t
 
r
, uöt8_à
g
, uöt8_à
b
, uöt8_à
ödex
);

295 
rgblight_£thsv_©
(
uöt8_t
 
hue
, uöt8_à
ßt
, uöt8_à
vÆ
, uöt8_à
ödex
);

296 
rgblight_£ågb_ønge
(
uöt8_t
 
r
, uöt8_à
g
, uöt8_à
b
, uöt8_à
°¨t
, uöt8_à
íd
);

297 
rgblight_£thsv_ønge
(
uöt8_t
 
hue
, uöt8_à
ßt
, uöt8_à
vÆ
, uöt8_à
°¨t
, uöt8_à
íd
);

298 
rgblight_£ågb
(
uöt8_t
 
r
, uöt8_à
g
, uöt8_à
b
);

300 #i‚de‡
RGBLIGHT_SPLIT


301 
rgblight_£ågb_ma°î
(
uöt8_t
 
r
, uöt8_à
g
, uöt8_à
b
);

302 
rgblight_£ågb_¶ave
(
uöt8_t
 
r
, uöt8_à
g
, uöt8_à
b
);

303 
rgblight_£thsv_ma°î
(
uöt8_t
 
hue
, uöt8_à
ßt
, uöt8_à
vÆ
);

304 
rgblight_£thsv_¶ave
(
uöt8_t
 
hue
, uöt8_à
ßt
, uöt8_à
vÆ
);

308 
rgblight_mode
(
uöt8_t
 
mode
);

309 
rgblight_mode_n€ïrom
(
uöt8_t
 
mode
);

310 
rgblight_ö¸ó£
();

311 
rgblight_de¸ó£
();

312 
rgblight_°ï
();

313 
rgblight_°ï_n€ïrom
();

314 
rgblight_°ï_ªvî£
();

315 
rgblight_°ï_ªvî£_n€ïrom
();

318 
rgblight_toggÀ
();

319 
rgblight_toggÀ_n€ïrom
();

320 
rgblight_íabÀ
();

321 
rgblight_íabÀ_n€ïrom
();

322 
rgblight_dißbÀ
();

323 
rgblight_dißbÀ_n€ïrom
();

326 
rgblight_ö¸ó£_hue
();

327 
rgblight_ö¸ó£_hue_n€ïrom
();

328 
rgblight_de¸ó£_hue
();

329 
rgblight_de¸ó£_hue_n€ïrom
();

330 
rgblight_ö¸ó£_ßt
();

331 
rgblight_ö¸ó£_ßt_n€ïrom
();

332 
rgblight_de¸ó£_ßt
();

333 
rgblight_de¸ó£_ßt_n€ïrom
();

334 
rgblight_ö¸ó£_vÆ
();

335 
rgblight_ö¸ó£_vÆ_n€ïrom
();

336 
rgblight_de¸ó£_vÆ
();

337 
rgblight_de¸ó£_vÆ_n€ïrom
();

338 
rgblight_ö¸ó£_•ìd
();

339 
rgblight_ö¸ó£_•ìd_n€ïrom
();

340 
rgblight_de¸ó£_•ìd
();

341 
rgblight_de¸ó£_•ìd_n€ïrom
();

342 
rgblight_£thsv
(
uöt8_t
 
hue
, uöt8_à
ßt
, uöt8_à
vÆ
);

343 
rgblight_£thsv_n€ïrom
(
uöt8_t
 
hue
, uöt8_à
ßt
, uöt8_à
vÆ
);

346 
uöt8_t
 
rgblight_gë_•ìd
();

347 
rgblight_£t_•ìd
(
uöt8_t
 
•ìd
);

348 
rgblight_£t_•ìd_n€ïrom
(
uöt8_t
 
•ìd
);

351 
uöt8_t
 
rgblight_gë_mode
();

352 
uöt8_t
 
rgblight_gë_hue
();

353 
uöt8_t
 
rgblight_gë_ßt
();

354 
uöt8_t
 
rgblight_gë_vÆ
();

355 
boﬁ
 
rgblight_is_íabÀd
();

356 
HSV
 
rgblight_gë_hsv
();

359 
rgblight_öô
();

360 
uöt32_t
 
rgblight_ªad_dw‹d
();

361 
rgblight_upd©e_dw‹d
(
uöt32_t
 
dw‹d
);

362 
uöt32_t
 
ìc⁄fig_ªad_rgblight
();

363 
ìc⁄fig_upd©e_rgblight
(
uöt32_t
 
vÆ
);

364 
ìc⁄fig_upd©e_rgblight_cuºít
();

365 
ìc⁄fig_upd©e_rgblight_deÁu…
();

366 
ìc⁄fig_debug_rgblight
();

368 
rgb_m©rix_ö¸ó£
();

369 
rgb_m©rix_de¸ó£
();

371 
rgblight_£thsv_ì¥om_hñ≥r
(
uöt8_t
 
hue
, uöt8_à
ßt
, uöt8_à
vÆ
, 
boﬁ
 
wrôe_to_ì¥om
);

372 
rgblight_mode_ì¥om_hñ≥r
(
uöt8_t
 
mode
, 
boﬁ
 
wrôe_to_ì¥om
);

374 
	#EZ_RGB
(
vÆ
Ë
	`rgblight_show_sﬁid_cﬁ‹
((vÆ >> 16Ë& 0xFF, (vÆ >> 8Ë& 0xFF, vÆ & 0xFF)

	)

375 
rgblight_show_sﬁid_cﬁ‹
(
uöt8_t
 
r
, uöt8_à
g
, uöt8_à
b
);

377 #ifde‡
RGBLIGHT_USE_TIMER


378 
rgblight_èsk
();

379 
rgblight_timî_öô
();

380 
rgblight_timî_íabÀ
();

381 
rgblight_timî_dißbÀ
();

382 
rgblight_timî_toggÀ
();

384 
	#rgblight_èsk
()

	)

385 
	#rgblight_timî_öô
()

	)

386 
	#rgblight_timî_íabÀ
()

	)

387 
	#rgblight_timî_dißbÀ
()

	)

388 
	#rgblight_timî_toggÀ
()

	)

391 #ifde‡
RGBLIGHT_SPLIT


392 
	#RGBLIGHT_STATUS_CHANGE_MODE
 (1 << 0)

	)

393 
	#RGBLIGHT_STATUS_CHANGE_HSVS
 (1 << 1)

	)

394 
	#RGBLIGHT_STATUS_CHANGE_TIMER
 (1 << 2)

	)

395 
	#RGBLIGHT_STATUS_ANIMATION_TICK
 (1 << 3)

	)

396 
	#RGBLIGHT_STATUS_CHANGE_LAYERS
 (1 << 4)

	)

398 
	s_rgblight_syncöfo_t
 {

399 
rgblight_c⁄fig_t
 
	mc⁄fig
;

400 
rgblight_°©us_t
 
	m°©us
;

401 } 
	trgblight_syncöfo_t
;

404 
uöt8_t
 
rgblight_gë_ch™ge_Êags
();

405 
rgblight_˛ór_ch™ge_Êags
();

406 
rgblight_gë_syncöfo
(
rgblight_syncöfo_t
 *
syncöfo
);

408 
rgblight_upd©e_sync
(
rgblight_syncöfo_t
 *
syncöfo
, 
boﬁ
 
wrôe_to_ì¥om
);

411 #ifde‡
RGBLIGHT_USE_TIMER


413 
	s_™im©i⁄_°©us_t
 {

414 
uöt16_t
 
	mœ°_timî
;

415 
uöt8_t
 
	mdñè
;

416 
boﬁ
 
	mª°¨t
;

418 
uöt16_t
 
	mpos16
;

419 
uöt8_t
 
	mpos
;

420 
öt8_t
 
	mcuºít_hue
;

421 
uöt16_t
 
	mcuºít_off£t
;

423 } 
	t™im©i⁄_°©us_t
;

425 
™im©i⁄_°©us_t
 
™im©i⁄_°©us
;

427 
rgblight_ef„˘_bª©hög
(
™im©i⁄_°©us_t
 *
™im
);

428 
rgblight_ef„˘_øöbow_mood
(
™im©i⁄_°©us_t
 *
™im
);

429 
rgblight_ef„˘_øöbow_swúl
(
™im©i⁄_°©us_t
 *
™im
);

430 
rgblight_ef„˘_¢ake
(
™im©i⁄_°©us_t
 *
™im
);

431 
rgblight_ef„˘_knight
(
™im©i⁄_°©us_t
 *
™im
);

432 
rgblight_ef„˘_chri°mas
(
™im©i⁄_°©us_t
 *
™im
);

433 
rgblight_ef„˘_rgbã°
(
™im©i⁄_°©us_t
 *
™im
);

434 
rgblight_ef„˘_Æã∫©ög
(
™im©i⁄_°©us_t
 *
™im
);

435 
rgblight_ef„˘_twökÀ
(
™im©i⁄_°©us_t
 *
™im
);

	@rgblight_breathe_table.h

1 #i‚de‡
RGBLIGHT_EFFECT_BREATHE_TABLE


2 
	#RGBLIGHT_EFFECT_BREATHE_TABLE


	)

4 c⁄° 
uöt8_t
 
	grgblight_ef„˘_bª©he_èbÀ
[] 
	gPROGMEM
 = {

8 #i‡
RGBLIGHT_BREATHE_TABLE_SIZE
 == 256

267 #i‡
RGBLIGHT_BREATHE_TABLE_SIZE
 == 128

398 #i‡
RGBLIGHT_BREATHE_TABLE_SIZE
 == 64

466 c⁄° 
	gèbÀ_sˇÀ
 = 256 / (
rgblight_ef„˘_bª©he_èbÀ
);

	@rgblight_list.h

16 #¥agm®
⁄˚


19 
	#RGB_WHITE
 0xFF, 0xFF, 0xFF

	)

20 
	#RGB_RED
 0xFF, 0x00, 0x00

	)

21 
	#RGB_CORAL
 0xFF, 0x7C, 0x4D

	)

22 
	#RGB_ORANGE
 0xFF, 0x80, 0x00

	)

23 
	#RGB_GOLDENROD
 0xD9, 0xA5, 0x21

	)

24 
	#RGB_GOLD
 0xFF, 0xD9, 0x00

	)

25 
	#RGB_YELLOW
 0xFF, 0xFF, 0x00

	)

26 
	#RGB_CHARTREUSE
 0x80, 0xFF, 0x00

	)

27 
	#RGB_GREEN
 0x00, 0xFF, 0x00

	)

28 
	#RGB_SPRINGGREEN
 0x00, 0xFF, 0x80

	)

29 
	#RGB_TURQUOISE
 0x47, 0x6E, 0x6A

	)

30 
	#RGB_TEAL
 0x00, 0x80, 0x80

	)

31 
	#RGB_CYAN
 0x00, 0xFF, 0xFF

	)

32 
	#RGB_AZURE
 0x99, 0xf5, 0xFF

	)

33 
	#RGB_BLUE
 0x00, 0x00, 0xFF

	)

34 
	#RGB_PURPLE
 0x7A, 0x00, 0xFF

	)

35 
	#RGB_MAGENTA
 0xFF, 0x00, 0xFF

	)

36 
	#RGB_PINK
 0xFF, 0x80, 0xBF

	)

39 
	#HSV_WHITE
 0, 0, 255

	)

40 
	#HSV_RED
 0, 255, 255

	)

41 
	#HSV_CORAL
 11, 176, 255

	)

42 
	#HSV_ORANGE
 28, 255, 255

	)

43 
	#HSV_GOLDENROD
 30, 218, 218

	)

44 
	#HSV_GOLD
 36, 255, 255

	)

45 
	#HSV_YELLOW
 43, 255, 255

	)

46 
	#HSV_CHARTREUSE
 64, 255, 255

	)

47 
	#HSV_GREEN
 85, 255, 255

	)

48 
	#HSV_SPRINGGREEN
 106, 255, 255

	)

49 
	#HSV_TURQUOISE
 123, 90, 112

	)

50 
	#HSV_TEAL
 128, 255, 128

	)

51 
	#HSV_CYAN
 128, 255, 255

	)

52 
	#HSV_AZURE
 132, 102, 255

	)

53 
	#HSV_BLUE
 170, 255, 255

	)

54 
	#HSV_PURPLE
 191, 255, 255

	)

55 
	#HSV_MAGENTA
 213, 255, 255

	)

56 
	#HSV_PINK
 234, 128, 255

	)

73 
	#rgblight_£ågb_whôe
(Ë
	`rgblight_£ågb
(
RGB_WHITE
)

	)

74 
	#rgblight_£ågb_ªd
(Ë
	`rgblight_£ågb
(
RGB_RED
)

	)

75 
	#rgblight_£ågb_c‹Æ
(Ë
	`rgblight_£ågb
(
RGB_CORAL
)

	)

76 
	#rgblight_£ågb_‹™ge
(Ë
	`rgblight_£ågb
(
RGB_ORANGE
)

	)

77 
	#rgblight_£ågb_gﬁdírod
(Ë
	`rgblight_£ågb
(
RGB_GOLDENROD
)

	)

78 
	#rgblight_£ågb_gﬁd
(Ë
	`rgblight_£ågb
(
RGB_GOLD
)

	)

79 
	#rgblight_£ågb_yñlow
(Ë
	`rgblight_£ågb
(
RGB_YELLOW
)

	)

80 
	#rgblight_£ågb_ch¨åeu£
(Ë
	`rgblight_£ågb
(
RGB_CHARTREUSE
)

	)

81 
	#rgblight_£ågb_gªí
(Ë
	`rgblight_£ågb
(
RGB_GREEN
)

	)

82 
	#rgblight_£ågb_•röggªí
(Ë
	`rgblight_£ågb
(
RGB_SPRINGGREEN
)

	)

83 
	#rgblight_£ågb_turquoi£
(Ë
	`rgblight_£ågb
(
RGB_TURQUOISE
)

	)

84 
	#rgblight_£ågb_ãÆ
(Ë
	`rgblight_£ågb
(
RGB_TEAL
)

	)

85 
	#rgblight_£ågb_cy™
(Ë
	`rgblight_£ågb
(
RGB_CYAN
)

	)

86 
	#rgblight_£ågb_azuª
(Ë
	`rgblight_£ågb
(
RGB_AZURE
)

	)

87 
	#rgblight_£ågb_blue
(Ë
	`rgblight_£ågb
(
RGB_BLUE
)

	)

88 
	#rgblight_£ågb_puΩÀ
(Ë
	`rgblight_£ågb
(
RGB_PURPLE
)

	)

89 
	#rgblight_£ågb_magíè
(Ë
	`rgblight_£ågb
(
RGB_MAGENTA
)

	)

90 
	#rgblight_£ågb_pök
(Ë
	`rgblight_£ågb
(
RGB_PINK
)

	)

93 
	#rgblight_£ågb_whôe_©
(
©
Ë
	`rgblight_£ågb_©
(
RGB_WHITE
,át)

	)

94 
	#rgblight_£ågb_ªd_©
(
©
Ë
	`rgblight_£ågb_©
(
RGB_RED
,át)

	)

95 
	#rgblight_£ågb_c‹Æ_©
(
©
Ë
	`rgblight_£ågb_©
(
RGB_CORAL
,át)

	)

96 
	#rgblight_£ågb_‹™ge_©
(
©
Ë
	`rgblight_£ågb_©
(
RGB_ORANGE
át)

	)

97 
	#rgblight_£ågb_gﬁdírod_©
(
©
Ë
	`rgblight_£ågb_©
(
RGB_GOLDENROD
,át)

	)

98 
	#rgblight_£ågb_gﬁd_©
(
©
Ë
	`rgblight_£ågb_©
(
RGB_GOLD
,át)

	)

99 
	#rgblight_£ågb_yñlow_©
(
©
Ë
	`rgblight_£ågb_©
(
RGB_YELLOW
,át)

	)

100 
	#rgblight_£ågb_ch¨åeu£_©
(
©
Ë
	`rgblight_£ågb_©
(
RGB_CHARTREUSE
,át)

	)

101 
	#rgblight_£ågb_gªí_©
(
©
Ë
	`rgblight_£ågb_©
(
RGB_GREEN
,át)

	)

102 
	#rgblight_£ågb_•röggªí_©
(
©
Ë
	`rgblight_£ågb_©
(
RGB_SPRINGGREEN
,át)

	)

103 
	#rgblight_£ågb_turquoi£_©
(
©
Ë
	`rgblight_£ågb_©
(
RGB_TURQUOISE
,át)

	)

104 
	#rgblight_£ågb_ãÆ_©
(
©
Ë
	`rgblight_£ågb_©
(
RGB_TEAL
,át)

	)

105 
	#rgblight_£ågb_cy™_©
(
©
Ë
	`rgblight_£ågb_©
(
RGB_CYAN
,át)

	)

106 
	#rgblight_£ågb_azuª_©
(
©
Ë
	`rgblight_£ågb_©
(
RGB_AZURE
,át)

	)

107 
	#rgblight_£ågb_blue_©
(
©
Ë
	`rgblight_£ågb_©
(
RGB_BLUE
,át)

	)

108 
	#rgblight_£ågb_puΩÀ_©
(
©
Ë
	`rgblight_£ågb_©
(
RGB_PURPLE
,át)

	)

109 
	#rgblight_£ågb_magíè_©
(
©
Ë
	`rgblight_£ågb_©
(
RGB_MAGENTA
,át)

	)

110 
	#rgblight_£ågb_pök_©
(
©
Ë
	`rgblight_£ågb_©
(
RGB_PINK
,át)

	)

113 
	#rgblight_£thsv_whôe
(Ë
	`rgblight_£thsv
(
HSV_WHITE
)

	)

114 
	#rgblight_£thsv_ªd
(Ë
	`rgblight_£thsv
(
HSV_RED
)

	)

115 
	#rgblight_£thsv_c‹Æ
(Ë
	`rgblight_£thsv
(
HSV_CORAL
)

	)

116 
	#rgblight_£thsv_‹™ge
(Ë
	`rgblight_£thsv
(
HSV_ORANGE
)

	)

117 
	#rgblight_£thsv_gﬁdírod
(Ë
	`rgblight_£thsv
(
HSV_GOLDENROD
)

	)

118 
	#rgblight_£thsv_gﬁd
(Ë
	`rgblight_£thsv
(
HSV_GOLD
)

	)

119 
	#rgblight_£thsv_yñlow
(Ë
	`rgblight_£thsv
(
HSV_YELLOW
)

	)

120 
	#rgblight_£thsv_ch¨åeu£
(Ë
	`rgblight_£thsv
(
HSV_CHARTREUSE
)

	)

121 
	#rgblight_£thsv_gªí
(Ë
	`rgblight_£thsv
(
HSV_GREEN
)

	)

122 
	#rgblight_£thsv_•röggªí
(Ë
	`rgblight_£thsv
(
HSV_SPRINGGREEN
)

	)

123 
	#rgblight_£thsv_turquoi£
(Ë
	`rgblight_£thsv
(
HSV_TURQUOISE
)

	)

124 
	#rgblight_£thsv_ãÆ
(Ë
	`rgblight_£thsv
(
HSV_TEAL
)

	)

125 
	#rgblight_£thsv_cy™
(Ë
	`rgblight_£thsv
(
HSV_CYAN
)

	)

126 
	#rgblight_£thsv_azuª
(Ë
	`rgblight_£thsv
(
HSV_AZURE
)

	)

127 
	#rgblight_£thsv_blue
(Ë
	`rgblight_£thsv
(
HSV_BLUE
)

	)

128 
	#rgblight_£thsv_puΩÀ
(Ë
	`rgblight_£thsv
(
HSV_PURPLE
)

	)

129 
	#rgblight_£thsv_magíè
(Ë
	`rgblight_£thsv
(
HSV_MAGENTA
)

	)

130 
	#rgblight_£thsv_pök
(Ë
	`rgblight_£thsv
(
HSV_PINK
)

	)

137 
	#rgblight_£thsv_n€ïrom_whôe
(Ë
	`rgblight_£thsv_n€ïrom
(
HSV_WHITE
)

	)

138 
	#rgblight_£thsv_n€ïrom_ªd
(Ë
	`rgblight_£thsv_n€ïrom
(
HSV_RED
)

	)

139 
	#rgblight_£thsv_n€ïrom_c‹Æ
(Ë
	`rgblight_£thsv_n€ïrom
(
HSV_CORAL
)

	)

140 
	#rgblight_£thsv_n€ïrom_‹™ge
(Ë
	`rgblight_£thsv_n€ïrom
(
HSV_ORANGE
)

	)

141 
	#rgblight_£thsv_n€ïrom_gﬁdírod
(Ë
	`rgblight_£thsv_n€ïrom
(
HSV_GOLDENROD
)

	)

142 
	#rgblight_£thsv_n€ïrom_gﬁd
(Ë
	`rgblight_£thsv_n€ïrom
(
HSV_GOLD
)

	)

143 
	#rgblight_£thsv_n€ïrom_yñlow
(Ë
	`rgblight_£thsv_n€ïrom
(
HSV_YELLOW
)

	)

144 
	#rgblight_£thsv_n€ïrom_ch¨åeu£
(Ë
	`rgblight_£thsv_n€ïrom
(
HSV_CHARTREUSE
)

	)

145 
	#rgblight_£thsv_n€ïrom_gªí
(Ë
	`rgblight_£thsv_n€ïrom
(
HSV_GREEN
)

	)

146 
	#rgblight_£thsv_n€ïrom_•röggªí
(Ë
	`rgblight_£thsv_n€ïrom
(
HSV_SPRINGGREEN
)

	)

147 
	#rgblight_£thsv_n€ïrom_turquoi£
(Ë
	`rgblight_£thsv_n€ïrom
(
HSV_TURQUOISE
)

	)

148 
	#rgblight_£thsv_n€ïrom_ãÆ
(Ë
	`rgblight_£thsv_n€ïrom
(
HSV_TEAL
)

	)

149 
	#rgblight_£thsv_n€ïrom_cy™
(Ë
	`rgblight_£thsv_n€ïrom
(
HSV_CYAN
)

	)

150 
	#rgblight_£thsv_n€ïrom_azuª
(Ë
	`rgblight_£thsv_n€ïrom
(
HSV_AZURE
)

	)

151 
	#rgblight_£thsv_n€ïrom_blue
(Ë
	`rgblight_£thsv_n€ïrom
(
HSV_BLUE
)

	)

152 
	#rgblight_£thsv_n€ïrom_puΩÀ
(Ë
	`rgblight_£thsv_n€ïrom
(
HSV_PURPLE
)

	)

153 
	#rgblight_£thsv_n€ïrom_magíè
(Ë
	`rgblight_£thsv_n€ïrom
(
HSV_MAGENTA
)

	)

154 
	#rgblight_£thsv_n€ïrom_pök
(Ë
	`rgblight_£thsv_n€ïrom
(
HSV_PINK
)

	)

157 
	#rgblight_£thsv_whôe_©
(
©
Ë
	`rgblight_£thsv_©
(
HSV_WHITE
,át)

	)

158 
	#rgblight_£thsv_ªd_©
(
©
Ë
	`rgblight_£thsv_©
(
HSV_RED
,át)

	)

159 
	#rgblight_£thsv_c‹Æ_©
(
©
Ë
	`rgblight_£thsv_©
(
HSV_CORAL
,át)

	)

160 
	#rgblight_£thsv_‹™ge_©
(
©
Ë
	`rgblight_£thsv_©
(
HSV_ORANGE
,át)

	)

161 
	#rgblight_£thsv_gﬁdírod_©
(
©
Ë
	`rgblight_£thsv_©
(
HSV_GOLDENROD
,át)

	)

162 
	#rgblight_£thsv_gﬁd_©
(
©
Ë
	`rgblight_£thsv_©
(
HSV_GOLD
,át)

	)

163 
	#rgblight_£thsv_yñlow_©
(
©
Ë
	`rgblight_£thsv_©
(
HSV_YELLOW
,át)

	)

164 
	#rgblight_£thsv_ch¨åeu£_©
(
©
Ë
	`rgblight_£thsv_©
(
HSV_CHARTREUSE
,át)

	)

165 
	#rgblight_£thsv_gªí_©
(
©
Ë
	`rgblight_£thsv_©
(
HSV_GREEN
,át)

	)

166 
	#rgblight_£thsv_•röggªí_©
(
©
Ë
	`rgblight_£thsv_©
(
HSV_SPRINGGREEN
,át)

	)

167 
	#rgblight_£thsv_turquoi£_©
(
©
Ë
	`rgblight_£thsv_©
(
HSV_TURQUOISE
,át)

	)

168 
	#rgblight_£thsv_ãÆ_©
(
©
Ë
	`rgblight_£thsv_©
(
HSV_TEAL
,át)

	)

169 
	#rgblight_£thsv_cy™_©
(
©
Ë
	`rgblight_£thsv_©
(
HSV_CYAN
,át)

	)

170 
	#rgblight_£thsv_azuª_©
(
©
Ë
	`rgblight_£thsv_©
(
HSV_AZURE
,át)

	)

171 
	#rgblight_£thsv_blue_©
(
©
Ë
	`rgblight_£thsv_©
(
HSV_BLUE
,át)

	)

172 
	#rgblight_£thsv_puΩÀ_©
(
©
Ë
	`rgblight_£thsv_©
(
HSV_PURPLE
,át)

	)

173 
	#rgblight_£thsv_magíè_©
(
©
Ë
	`rgblight_£thsv_©
(
HSV_MAGENTA
,át)

	)

174 
	#rgblight_£thsv_pök_©
(
©
Ë
	`rgblight_£thsv_©
(
HSV_PINK
,át)

	)

	@rgblight_modes.h

1 #ifde‡
_RGBM_SINGLE_STATIC


2 
	$_RGBM_SINGLE_STATIC
(
STATIC_LIGHT
)

3 #ifde‡
RGBLIGHT_EFFECT_BREATHING


4 
	$_RGBM_MULTI_DYNAMIC
(
BREATHING
)

5 
	$_RGBM_TMP_DYNAMIC
(
bª©hög_3
, 
BREATHING
)

6 
	$_RGBM_TMP_DYNAMIC
(
bª©hög_4
, 
BREATHING
)

7 
	$_RGBM_TMP_DYNAMIC
(
BREATHING_íd
, 
BREATHING
)

9 #ifde‡
RGBLIGHT_EFFECT_RAINBOW_MOOD


10 
	$_RGBM_MULTI_DYNAMIC
(
RAINBOW_MOOD
)

11 
	$_RGBM_TMP_DYNAMIC
(
øöbow_mood_7
, 
RAINBOW_MOOD
)

12 
	$_RGBM_TMP_DYNAMIC
(
RAINBOW_MOOD_íd
, 
RAINBOW_MOOD
)

14 #ifde‡
RGBLIGHT_EFFECT_RAINBOW_SWIRL


15 
	$_RGBM_MULTI_DYNAMIC
(
RAINBOW_SWIRL
)

16 
	$_RGBM_TMP_DYNAMIC
(
øöbow_swúl_10
, 
RAINBOW_SWIRL
)

17 
	$_RGBM_TMP_DYNAMIC
(
øöbow_swúl_11
, 
RAINBOW_SWIRL
)

18 
	$_RGBM_TMP_DYNAMIC
(
øöbow_swúl_12
, 
RAINBOW_SWIRL
)

19 
	$_RGBM_TMP_DYNAMIC
(
øöbow_swúl_13
, 
RAINBOW_SWIRL
)

20 
	$_RGBM_TMP_DYNAMIC
(
RAINBOW_SWIRL_íd
, 
RAINBOW_SWIRL
)

22 #ifde‡
RGBLIGHT_EFFECT_SNAKE


23 
	$_RGBM_MULTI_DYNAMIC
(
SNAKE
)

24 
	$_RGBM_TMP_DYNAMIC
(
¢ake_16
, 
SNAKE
)

25 
	$_RGBM_TMP_DYNAMIC
(
¢ake_17
, 
SNAKE
)

26 
	$_RGBM_TMP_DYNAMIC
(
¢ake_18
, 
SNAKE
)

27 
	$_RGBM_TMP_DYNAMIC
(
¢ake_19
, 
SNAKE
)

28 
	$_RGBM_TMP_DYNAMIC
(
SNAKE_íd
, 
SNAKE
)

30 #ifde‡
RGBLIGHT_EFFECT_KNIGHT


31 
	$_RGBM_MULTI_DYNAMIC
(
KNIGHT
)

32 
	$_RGBM_TMP_DYNAMIC
(
knight_22
, 
KNIGHT
)

33 
	$_RGBM_TMP_DYNAMIC
(
KNIGHT_íd
, 
KNIGHT
)

35 #ifde‡
RGBLIGHT_EFFECT_CHRISTMAS


36 
	$_RGBM_SINGLE_DYNAMIC
(
CHRISTMAS
)

38 #ifde‡
RGBLIGHT_EFFECT_STATIC_GRADIENT


39 
	$_RGBM_MULTI_STATIC
(
STATIC_GRADIENT
)

40 
	$_RGBM_TMP_STATIC
(
°©ic_gødõ¡_26
, 
STATIC_GRADIENT
)

41 
	$_RGBM_TMP_STATIC
(
°©ic_gødõ¡_27
, 
STATIC_GRADIENT
)

42 
	$_RGBM_TMP_STATIC
(
°©ic_gødõ¡_28
, 
STATIC_GRADIENT
)

43 
	$_RGBM_TMP_STATIC
(
°©ic_gødõ¡_29
, 
STATIC_GRADIENT
)

44 
	$_RGBM_TMP_STATIC
(
°©ic_gødõ¡_30
, 
STATIC_GRADIENT
)

45 
	$_RGBM_TMP_STATIC
(
°©ic_gødõ¡_31
, 
STATIC_GRADIENT
)

46 
	$_RGBM_TMP_STATIC
(
°©ic_gødõ¡_32
, 
STATIC_GRADIENT
)

47 
	$_RGBM_TMP_STATIC
(
°©ic_gødõ¡_33
, 
STATIC_GRADIENT
)

48 
	$_RGBM_TMP_STATIC
(
STATIC_GRADIENT_íd
, 
STATIC_GRADIENT
)

50 #ifde‡
RGBLIGHT_EFFECT_RGB_TEST


51 
	$_RGBM_SINGLE_DYNAMIC
(
RGB_TEST
)

53 #ifde‡
RGBLIGHT_EFFECT_ALTERNATING


54 
	$_RGBM_SINGLE_DYNAMIC
(
ALTERNATING
)

56 #ifde‡
RGBLIGHT_EFFECT_TWINKLE


57 
	$_RGBM_MULTI_DYNAMIC
(
TWINKLE
)

58 
	$_RGBM_TMP_DYNAMIC
(
twökÀ_38
, 
TWINKLE
)

59 
	$_RGBM_TMP_DYNAMIC
(
twökÀ_39
, 
TWINKLE
)

60 
	$_RGBM_TMP_DYNAMIC
(
twökÀ_40
, 
TWINKLE
)

61 
	$_RGBM_TMP_DYNAMIC
(
twökÀ_41
, 
TWINKLE
)

62 
	$_RGBM_TMP_DYNAMIC
(
TWINKLE_íd
, 
TWINKLE
)

70 #unde‡
_RGBM_SINGLE_STATIC


71 #unde‡
_RGBM_SINGLE_DYNAMIC


72 #unde‡
_RGBM_MULTI_STATIC


73 #unde‡
_RGBM_MULTI_DYNAMIC


74 #unde‡
_RGBM_TMP_STATIC


75 #unde‡
_RGBM_TMP_DYNAMIC


	@rgblight_post_config.h

1 #i‡
deföed
(
RGBLED_SPLIT
Ë&& !deföed(
RGBLIGHT_SPLIT
)

4 
	#RGBLIGHT_SPLIT


	)

	@send_string_keycodes.h

17 #¥agm®
⁄˚


22 
	#X_ENT
 
X_ENTER


	)

23 
	#X_ESC
 
X_ESCAPE


	)

24 
	#X_BSPC
 
X_BSPACE


	)

25 
	#X_SPC
 
X_SPACE


	)

26 
	#X_MINS
 
X_MINUS


	)

27 
	#X_EQL
 
X_EQUAL


	)

28 
	#X_LBRC
 
X_LBRACKET


	)

29 
	#X_RBRC
 
X_RBRACKET


	)

30 
	#X_BSLS
 
X_BSLASH


	)

31 
	#X_NUHS
 
X_NONUS_HASH


	)

32 
	#X_SCLN
 
X_SCOLON


	)

33 
	#X_QUOT
 
X_QUOTE


	)

34 
	#X_GRV
 
X_GRAVE


	)

35 
	#X_COMM
 
X_COMMA


	)

36 
	#X_SLSH
 
X_SLASH


	)

37 
	#X_NUBS
 
X_NONUS_BSLASH


	)

40 
	#X_CLCK
 
X_CAPSLOCK


	)

41 
	#X_CAPS
 
X_CAPSLOCK


	)

42 
	#X_SLCK
 
X_SCROLLLOCK


	)

43 
	#X_NLCK
 
X_NUMLOCK


	)

44 
	#X_LCAP
 
X_LOCKING_CAPS


	)

45 
	#X_LNUM
 
X_LOCKING_NUM


	)

46 
	#X_LSCR
 
X_LOCKING_SCROLL


	)

49 
	#X_PSCR
 
X_PSCREEN


	)

50 
	#X_PAUS
 
X_PAUSE


	)

51 
	#X_BRK
 
X_PAUSE


	)

52 
	#X_INS
 
X_INSERT


	)

53 
	#X_DEL
 
X_DELETE


	)

54 
	#X_PGDN
 
X_PGDOWN


	)

55 
	#X_RGHT
 
X_RIGHT


	)

56 
	#X_APP
 
X_APPLICATION


	)

57 
	#X_EXEC
 
X_EXECUTE


	)

58 
	#X_SLCT
 
X_SELECT


	)

59 
	#X_AGIN
 
X_AGAIN


	)

60 
	#X_PSTE
 
X_PASTE


	)

61 
	#X_ERAS
 
X_ALT_ERASE


	)

62 
	#X_CLR
 
X_CLEAR


	)

65 
	#X_PSLS
 
X_KP_SLASH


	)

66 
	#X_PAST
 
X_KP_ASTERISK


	)

67 
	#X_PMNS
 
X_KP_MINUS


	)

68 
	#X_PPLS
 
X_KP_PLUS


	)

69 
	#X_PENT
 
X_KP_ENTER


	)

70 
	#X_P1
 
X_KP_1


	)

71 
	#X_P2
 
X_KP_2


	)

72 
	#X_P3
 
X_KP_3


	)

73 
	#X_P4
 
X_KP_4


	)

74 
	#X_P5
 
X_KP_5


	)

75 
	#X_P6
 
X_KP_6


	)

76 
	#X_P7
 
X_KP_7


	)

77 
	#X_P8
 
X_KP_8


	)

78 
	#X_P9
 
X_KP_9


	)

79 
	#X_P0
 
X_KP_0


	)

80 
	#X_PDOT
 
X_KP_DOT


	)

81 
	#X_PEQL
 
X_KP_EQUAL


	)

82 
	#X_PCMM
 
X_KP_COMMA


	)

85 
	#X_ZKHK
 
X_GRAVE


	)

86 
	#X_RO
 
X_INT1


	)

87 
	#X_KANA
 
X_INT2


	)

88 
	#X_JYEN
 
X_INT3


	)

89 
	#X_HENK
 
X_INT4


	)

90 
	#X_MHEN
 
X_INT5


	)

93 
	#X_HAEN
 
X_LANG1


	)

94 
	#X_HANJ
 
X_LANG2


	)

97 
	#X_LCTL
 
X_LCTRL


	)

98 
	#X_LSFT
 
X_LSHIFT


	)

99 
	#X_LOPT
 
X_LALT


	)

100 
	#X_LCMD
 
X_LGUI


	)

101 
	#X_LWIN
 
X_LGUI


	)

102 
	#X_RCTL
 
X_RCTRL


	)

103 
	#X_RSFT
 
X_RSHIFT


	)

104 
	#X_ALGR
 
X_RALT


	)

105 
	#X_ROPT
 
X_RALT


	)

106 
	#X_RCMD
 
X_RGUI


	)

107 
	#X_RWIN
 
X_RGUI


	)

110 
	#X_PWR
 
X_SYSTEM_POWER


	)

111 
	#X_SLEP
 
X_SYSTEM_SLEEP


	)

112 
	#X_WAKE
 
X_SYSTEM_WAKE


	)

115 
	#X_MUTE
 
X_AUDIO_MUTE


	)

116 
	#X_VOLU
 
X_AUDIO_VOL_UP


	)

117 
	#X_VOLD
 
X_AUDIO_VOL_DOWN


	)

118 
	#X_MNXT
 
X_MEDIA_NEXT_TRACK


	)

119 
	#X_MPRV
 
X_MEDIA_PREV_TRACK


	)

120 
	#X_MSTP
 
X_MEDIA_STOP


	)

121 
	#X_MPLY
 
X_MEDIA_PLAY_PAUSE


	)

122 
	#X_MSEL
 
X_MEDIA_SELECT


	)

123 
	#X_EJCT
 
X_MEDIA_EJECT


	)

124 
	#X_CALC
 
X_CALCULATOR


	)

125 
	#X_MYCM
 
X_MY_COMPUTER


	)

126 
	#X_WSCH
 
X_WWW_SEARCH


	)

127 
	#X_WHOM
 
X_WWW_HOME


	)

128 
	#X_WBAK
 
X_WWW_BACK


	)

129 
	#X_WFWD
 
X_WWW_FORWARD


	)

130 
	#X_WSTP
 
X_WWW_STOP


	)

131 
	#X_WREF
 
X_WWW_REFRESH


	)

132 
	#X_WFAV
 
X_WWW_FAVORITES


	)

133 
	#X_MFFD
 
X_MEDIA_FAST_FORWARD


	)

134 
	#X_MRWD
 
X_MEDIA_REWIND


	)

135 
	#X_BRIU
 
X_BRIGHTNESS_UP


	)

136 
	#X_BRID
 
X_BRIGHTNESS_DOWN


	)

139 
	#X_BRMU
 
X_PAUSE


	)

140 
	#X_BRMD
 
X_SCROLLLOCK


	)

143 
	#X_MS_U
 
X_MS_UP


	)

144 
	#X_MS_D
 
X_MS_DOWN


	)

145 
	#X_MS_L
 
X_MS_LEFT


	)

146 
	#X_MS_R
 
X_MS_RIGHT


	)

147 
	#X_BTN1
 
X_MS_BTN1


	)

148 
	#X_BTN2
 
X_MS_BTN2


	)

149 
	#X_BTN3
 
X_MS_BTN3


	)

150 
	#X_BTN4
 
X_MS_BTN4


	)

151 
	#X_BTN5
 
X_MS_BTN5


	)

152 
	#X_WH_U
 
X_MS_WH_UP


	)

153 
	#X_WH_D
 
X_MS_WH_DOWN


	)

154 
	#X_WH_L
 
X_MS_WH_LEFT


	)

155 
	#X_WH_R
 
X_MS_WH_RIGHT


	)

156 
	#X_ACL0
 
X_MS_ACCEL0


	)

157 
	#X_ACL1
 
X_MS_ACCEL1


	)

158 
	#X_ACL2
 
X_MS_ACCEL2


	)

161 
	#X_A
 04

	)

162 
	#X_B
 05

	)

163 
	#X_C
 06

	)

164 
	#X_D
 07

	)

165 
	#X_E
 08

	)

166 
	#X_F
 09

	)

167 
	#X_G
 0a

	)

168 
	#X_H
 0b

	)

169 
	#X_I
 0c

	)

170 
	#X_J
 0d

	)

171 
	#X_K
 0e

	)

172 
	#X_L
 0f

	)

173 
	#X_M
 10

	)

174 
	#X_N
 11

	)

175 
	#X_O
 12

	)

176 
	#X_P
 13

	)

177 
	#X_Q
 14

	)

178 
	#X_R
 15

	)

179 
	#X_S
 16

	)

180 
	#X_T
 17

	)

181 
	#X_U
 18

	)

182 
	#X_V
 19

	)

183 
	#X_W
 1a

	)

184 
	#X_X
 1b

	)

185 
	#X_Y
 1c

	)

186 
	#X_Z
 1d

	)

187 
	#X_1
 1e

	)

188 
	#X_2
 1f

	)

189 
	#X_3
 20

	)

190 
	#X_4
 21

	)

191 
	#X_5
 22

	)

192 
	#X_6
 23

	)

193 
	#X_7
 24

	)

194 
	#X_8
 25

	)

195 
	#X_9
 26

	)

196 
	#X_0
 27

	)

197 
	#X_ENTER
 28

	)

198 
	#X_ESCAPE
 29

	)

199 
	#X_BSPACE
 2a

	)

200 
	#X_TAB
 2b

	)

201 
	#X_SPACE
 2c

	)

202 
	#X_MINUS
 2d

	)

203 
	#X_EQUAL
 2e

	)

204 
	#X_LBRACKET
 2f

	)

205 
	#X_RBRACKET
 30

	)

206 
	#X_BSLASH
 31

	)

207 
	#X_NONUS_HASH
 32

	)

208 
	#X_SCOLON
 33

	)

209 
	#X_QUOTE
 34

	)

210 
	#X_GRAVE
 35

	)

211 
	#X_COMMA
 36

	)

212 
	#X_DOT
 37

	)

213 
	#X_SLASH
 38

	)

214 
	#X_CAPSLOCK
 39

	)

215 
	#X_F1
 3a

	)

216 
	#X_F2
 3b

	)

217 
	#X_F3
 3c

	)

218 
	#X_F4
 3d

	)

219 
	#X_F5
 3e

	)

220 
	#X_F6
 3f

	)

221 
	#X_F7
 40

	)

222 
	#X_F8
 41

	)

223 
	#X_F9
 42

	)

224 
	#X_F10
 43

	)

225 
	#X_F11
 44

	)

226 
	#X_F12
 45

	)

227 
	#X_PSCREEN
 46

	)

228 
	#X_SCROLLLOCK
 47

	)

229 
	#X_PAUSE
 48

	)

230 
	#X_INSERT
 49

	)

231 
	#X_HOME
 4a

	)

232 
	#X_PGUP
 4b

	)

233 
	#X_DELETE
 4c

	)

234 
	#X_END
 4d

	)

235 
	#X_PGDOWN
 4e

	)

236 
	#X_RIGHT
 4f

	)

237 
	#X_LEFT
 50

	)

238 
	#X_DOWN
 51

	)

239 
	#X_UP
 52

	)

240 
	#X_NUMLOCK
 53

	)

241 
	#X_KP_SLASH
 54

	)

242 
	#X_KP_ASTERISK
 55

	)

243 
	#X_KP_MINUS
 56

	)

244 
	#X_KP_PLUS
 57

	)

245 
	#X_KP_ENTER
 58

	)

246 
	#X_KP_1
 59

	)

247 
	#X_KP_2
 5a

	)

248 
	#X_KP_3
 5b

	)

249 
	#X_KP_4
 5c

	)

250 
	#X_KP_5
 5d

	)

251 
	#X_KP_6
 5e

	)

252 
	#X_KP_7
 5f

	)

253 
	#X_KP_8
 60

	)

254 
	#X_KP_9
 61

	)

255 
	#X_KP_0
 62

	)

256 
	#X_KP_DOT
 63

	)

257 
	#X_NONUS_BSLASH
 64

	)

258 
	#X_APPLICATION
 65

	)

259 
	#X_POWER
 66

	)

260 
	#X_KP_EQUAL
 67

	)

261 
	#X_F13
 68

	)

262 
	#X_F14
 69

	)

263 
	#X_F15
 6a

	)

264 
	#X_F16
 6b

	)

265 
	#X_F17
 6c

	)

266 
	#X_F18
 6d

	)

267 
	#X_F19
 6e

	)

268 
	#X_F20
 6f

	)

269 
	#X_F21
 70

	)

270 
	#X_F22
 71

	)

271 
	#X_F23
 72

	)

272 
	#X_F24
 73

	)

273 
	#X_EXECUTE
 74

	)

274 
	#X_HELP
 75

	)

275 
	#X_MENU
 76

	)

276 
	#X_SELECT
 77

	)

277 
	#X_STOP
 78

	)

278 
	#X_AGAIN
 79

	)

279 
	#X_UNDO
 7a

	)

280 
	#X_CUT
 7b

	)

281 
	#X_COPY
 7c

	)

282 
	#X_PASTE
 7d

	)

283 
	#X_FIND
 7e

	)

284 
	#X__MUTE
 7f

	)

285 
	#X__VOLUP
 80

	)

286 
	#X__VOLDOWN
 81

	)

287 
	#X_LOCKING_CAPS
 82

	)

288 
	#X_LOCKING_NUM
 83

	)

289 
	#X_LOCKING_SCROLL
 84

	)

290 
	#X_KP_COMMA
 85

	)

291 
	#X_KP_EQUAL_AS400
 86

	)

292 
	#X_INT1
 87

	)

293 
	#X_INT2
 88

	)

294 
	#X_INT3
 89

	)

295 
	#X_INT4
 8a

	)

296 
	#X_INT5
 8b

	)

297 
	#X_INT6
 8c

	)

298 
	#X_INT7
 8d

	)

299 
	#X_INT8
 8e

	)

300 
	#X_INT9
 8f

	)

301 
	#X_LANG1
 90

	)

302 
	#X_LANG2
 91

	)

303 
	#X_LANG3
 92

	)

304 
	#X_LANG4
 93

	)

305 
	#X_LANG5
 94

	)

306 
	#X_LANG6
 95

	)

307 
	#X_LANG7
 96

	)

308 
	#X_LANG8
 97

	)

309 
	#X_LANG9
 98

	)

310 
	#X_ALT_ERASE
 99

	)

311 
	#X_SYSREQ
 9a

	)

312 
	#X_CANCEL
 9b

	)

313 
	#X_CLEAR
 9c

	)

314 
	#X_PRIOR
 9d

	)

315 
	#X_RETURN
 9e

	)

316 
	#X_SEPARATOR
 9f

	)

317 
	#X_OUT
 
a0


	)

318 
	#X_OPER
 
a1


	)

319 
	#X_CLEAR_AGAIN
 
a2


	)

320 
	#X_CRSEL
 
a3


	)

321 
	#X_EXSEL
 
a4


	)

324 
	#X_LCTRL
 
e0


	)

325 
	#X_LSHIFT
 
e1


	)

326 
	#X_LALT
 
e2


	)

327 
	#X_LGUI
 
e3


	)

328 
	#X_RCTRL
 
e4


	)

329 
	#X_RSHIFT
 
e5


	)

330 
	#X_RALT
 
e6


	)

331 
	#X_RGUI
 
e7


	)

335 
	#X_SYSTEM_POWER
 
a5


	)

336 
	#X_SYSTEM_SLEEP
 
a6


	)

337 
	#X_SYSTEM_WAKE
 
a7


	)

340 
	#X_AUDIO_MUTE
 
a8


	)

341 
	#X_AUDIO_VOL_UP
 
a9


	)

342 
	#X_AUDIO_VOL_DOWN
 
Ø


	)

343 
	#X_MEDIA_NEXT_TRACK
 
ab


	)

344 
	#X_MEDIA_PREV_TRACK
 
ac


	)

345 
	#X_MEDIA_STOP
 
ad


	)

346 
	#X_MEDIA_PLAY_PAUSE
 
´


	)

347 
	#X_MEDIA_SELECT
 
af


	)

348 
	#X_MEDIA_EJECT
 
b0


	)

349 
	#X_MAIL
 
b1


	)

350 
	#X_CALCULATOR
 
b2


	)

351 
	#X_MY_COMPUTER
 
b3


	)

352 
	#X_WWW_SEARCH
 
b4


	)

353 
	#X_WWW_HOME
 
b5


	)

354 
	#X_WWW_BACK
 
b6


	)

355 
	#X_WWW_FORWARD
 
b7


	)

356 
	#X_WWW_STOP
 
b8


	)

357 
	#X_WWW_REFRESH
 
b9


	)

358 
	#X_WWW_FAVORITES
 
ba


	)

359 
	#X_MEDIA_FAST_FORWARD
 
bb


	)

360 
	#X_MEDIA_REWIND
 
bc


	)

361 
	#X_BRIGHTNESS_UP
 
bd


	)

362 
	#X_BRIGHTNESS_DOWN
 
be


	)

365 
	#X_MS_UP
 
f0


	)

366 
	#X_MS_DOWN
 
f1


	)

367 
	#X_MS_LEFT
 
f2


	)

368 
	#X_MS_RIGHT
 
f3


	)

369 
	#X_MS_BTN1
 
f4


	)

370 
	#X_MS_BTN2
 
f5


	)

371 
	#X_MS_BTN3
 
f6


	)

372 
	#X_MS_BTN4
 
f7


	)

373 
	#X_MS_BTN5
 
f8


	)

374 
	#X_MS_WH_UP
 
f9


	)

375 
	#X_MS_WH_DOWN
 
Á


	)

376 
	#X_MS_WH_LEFT
 
fb


	)

377 
	#X_MS_WH_RIGHT
 
fc


	)

378 
	#X_MS_ACCEL0
 
fd


	)

379 
	#X_MS_ACCEL1
 
„


	)

380 
	#X_MS_ACCEL2
 
ff


	)

383 
	#STRINGIZE
(
z
Ë#z

	)

384 
	#ADD_SLASH_X
(
y
Ë
	`STRINGIZE
(\
x
##y)

	)

385 
	#SYMBOL_STR
(
x
Ë
	`ADD_SLASH_X
(x)

	)

387 
	#SS_QMK_PREFIX
 1

	)

389 
	#SS_TAP_CODE
 1

	)

390 
	#SS_DOWN_CODE
 2

	)

391 
	#SS_UP_CODE
 3

	)

392 
	#SS_DELAY_CODE
 4

	)

394 
	#SS_TAP
(
keycode
Ë"\1\1" 
	`SYMBOL_STR
(keycode)

	)

395 
	#SS_DOWN
(
keycode
Ë"\1\2" 
	`SYMBOL_STR
(keycode)

	)

396 
	#SS_UP
(
keycode
Ë"\1\3" 
	`SYMBOL_STR
(keycode)

	)

397 
	#SS_DELAY
(
m£cs
Ë"\1\4" 
	`STRINGIZE
(m£csË"|"

	)

400 
	#SS_LCTL
(
°rög
Ë
	`SS_DOWN
(
X_LCTL
Ë°rög 
	`SS_UP
(X_LCTL)

	)

401 
	#SS_LSFT
(
°rög
Ë
	`SS_DOWN
(
X_LSFT
Ë°rög 
	`SS_UP
(X_LSFT)

	)

402 
	#SS_LALT
(
°rög
Ë
	`SS_DOWN
(
X_LALT
Ë°rög 
	`SS_UP
(X_LALT)

	)

403 
	#SS_LGUI
(
°rög
Ë
	`SS_DOWN
(
X_LGUI
Ë°rög 
	`SS_UP
(X_LGUI)

	)

404 
	#SS_LCMD
(
°rög
Ë
	`SS_LGUI
(°rög)

	)

405 
	#SS_LWIN
(
°rög
Ë
	`SS_LGUI
(°rög)

	)

407 
	#SS_RCTL
(
°rög
Ë
	`SS_DOWN
(
X_RCTL
Ë°rög 
	`SS_UP
(X_RCTL)

	)

408 
	#SS_RSFT
(
°rög
Ë
	`SS_DOWN
(
X_RSFT
Ë°rög 
	`SS_UP
(X_RSFT)

	)

409 
	#SS_RALT
(
°rög
Ë
	`SS_DOWN
(
X_RALT
Ë°rög 
	`SS_UP
(X_RALT)

	)

410 
	#SS_RGUI
(
°rög
Ë
	`SS_DOWN
(
X_RGUI
Ë°rög 
	`SS_UP
(X_RGUI)

	)

411 
	#SS_ALGR
(
°rög
Ë
	`SS_RALT
(°rög)

	)

412 
	#SS_RCMD
(
°rög
Ë
	`SS_RGUI
(°rög)

	)

413 
	#SS_RWIN
(
°rög
Ë
	`SS_RGUI
(°rög)

	)

416 
	#SS_LCTRL
(
°rög
Ë
	`SS_LCTL
(°rög)

	)

	@variable_trace.c

17 
	~"v¨übÀ_åa˚.h
"

18 
	~<°ddef.h
>

19 
	~<°rög.h
>

21 #ifde‡
NO_PRINT


25 #i‚de‡
CONSOLE_ENABLE


29 
	#NUM_TRACED_VARIABLES
 1

	)

30 #i‚de‡
MAX_VARIABLE_TRACE_SIZE


31 
	#MAX_VARIABLE_TRACE_SIZE
 4

	)

35 c⁄° * 
	m«me
;

36 * 
	maddr
;

37 
	msize
;

38 c⁄° * 
	mfunc
;

39 
	mlöe
;

40 
uöt8_t
 
	mœ°_vÆue
[
MAX_VARIABLE_TRACE_SIZE
];

42 } 
	tåa˚d_v¨übÀ_t
;

44 
åa˚d_v¨übÀ_t
 
	gåa˚d_v¨übÀs
[
NUM_TRACED_VARIABLES
];

46 
	$add_åa˚d_v¨übÀ
(c⁄° * 
«me
, * 
addr
, 
size
, c⁄° * 
func
, 
löe
) {

47 
	`vîify_åa˚d_v¨übÀs
(
func
, 
löe
);

48 i‡(
size
 > 
MAX_VARIABLE_TRACE_SIZE
) {

49 #i‡
	`deföed
(
__AVR__
)

50 
	`x¥ötf
("Tø˚d v¨übÀ \"%S\"Éx˚ed†thêmaximum sizê%d\n", 
«me
, 
size
);

52 
	`x¥ötf
("Tø˚d v¨übÀ \"%s\"Éx˚ed†thêmaximum sizê%d\n", 
«me
, 
size
);

54 
size
 = 
MAX_VARIABLE_TRACE_SIZE
;

56 
ödex
 = -1;

57 
i
 = 0; i < 
NUM_TRACED_VARIABLES
; i++) {

58 i‡(
ödex
 =-1 && 
åa˚d_v¨übÀs
[
i
].
addr
 =
NULL
) {

59 
ödex
 = 
i
;

60 } i‡(
	`°rcmp_P
(
«me
, 
åa˚d_v¨übÀs
[
i
].name) == 0) {

61 
ödex
 = 
i
;

66 i‡(
ödex
 == -1) {

67 
	`x¥ötf
("You c™ o∆yÅø˚ %d v¨übÀ†©Åhêßmêtime\n", 
NUM_TRACED_VARIABLES
);

71 
åa˚d_v¨übÀ_t
* 
t
 = &
åa˚d_v¨übÀs
[
ödex
];

72 
t
->
«me
 =Çame;

73 
t
->
addr
 =áddr;

74 
t
->
size
 = size;

75 
t
->
func
 = func;

76 
t
->
löe
 =Üine;

77 
	`mem˝y
(&
t
->
œ°_vÆue
[0], 
addr
, 
size
);

78 
	}
}

80 
	$ªmove_åa˚d_v¨übÀ
(c⁄° * 
«me
, c⁄° * 
func
, 
löe
) {

81 
	`vîify_åa˚d_v¨übÀs
(
func
, 
löe
);

82 
i
 = 0; i < 
NUM_TRACED_VARIABLES
; i++) {

83 i‡(
	`°rcmp_P
(
«me
, 
åa˚d_v¨übÀs
[
i
].name) == 0) {

84 
åa˚d_v¨übÀs
[
i
].
«me
 = 0;

85 
åa˚d_v¨übÀs
[
i
].
addr
 = 
NULL
;

89 
	}
}

91 
	$vîify_åa˚d_v¨übÀs
(c⁄° * 
func
, 
löe
) {

92 
i
 = 0; i < 
NUM_TRACED_VARIABLES
; i++) {

93 
åa˚d_v¨übÀ_t
* 
t
 = &
åa˚d_v¨übÀs
[
i
];

94 i‡(
t
->
addr
 !
NULL
 &&Å->
«me
 != NULL) {

95 i‡(
	`memcmp
(
t
->
œ°_vÆue
,Å->
addr
,Å->
size
) != 0) {

96 #i‡
	`deföed
(
__AVR__
)

97 
	`x¥ötf
("Tø˚d v¨übÀ \"%S\" ha†bì¿modifõd\n", 
t
->
«me
);

98 
	`x¥ötf
("Bëwì¿%S:%d\n", 
t
->
func
,Å->
löe
);

99 
	`x¥ötf
("And %S:%d\n", 
func
, 
löe
);

102 
	`x¥ötf
("Tø˚d v¨übÀ \"%s\" ha†bì¿modifõd\n", 
t
->
«me
);

103 
	`x¥ötf
("Bëwì¿%s:%d\n", 
t
->
func
,Å->
löe
);

104 
	`x¥ötf
("And %s:%d\n", 
func
, 
löe
);

106 
	`x¥ötf
("Previous value ");

107 
j
 = 0; j < 
t
->
size
; j++) {

108 
	`¥öt_hex8
(
t
->
œ°_vÆue
[
j
]);

110 
	`x¥ötf
("\nNew value ");

111 
uöt8_t
* 
addr
 = (uöt8_t*)(
t
->addr);

112 
j
 = 0; j < 
t
->
size
; j++) {

113 
	`¥öt_hex8
(
addr
[
j
]);

115 
	`x¥ötf
("\n");

116 
	`mem˝y
(
t
->
œ°_vÆue
, 
addr
,Å->
size
);

120 
t
->
func
 = func;

121 
t
->
löe
 =Üine;

123 
	}
}

	@variable_trace.h

17 #i‚de‡
VARIABLE_TRACE_H


18 
	#VARIABLE_TRACE_H


	)

22 
	~"¥öt.h
"

24 #ifde‡
NUM_TRACED_VARIABLES


29 
	#ADD_TRACED_VARIABLE
(
«me
, 
addr
, 
size
Ë
	`add_åa˚d_v¨übÀ
(
	`PSTR
“ame), (*Ôddr, size, PSTR(
__FILE__
), 
__LINE__
)

	)

32 
	#REMOVE_TRACED_VARIABLE
(
«me
Ë
	`ªmove_åa˚d_v¨übÀ
(
	`PSTR
“ame), PSTR(
__FILE__
), 
__LINE__
)

	)

35 
	#VERIFY_TRACED_VARIABLES
(Ë
	`vîify_åa˚d_v¨übÀs
(
	`PSTR
(
__FILE__
), 
__LINE__
)

	)

39 
	#ADD_TRACED_VARIABLE
(
«me
, 
addr
, 
size
)

	)

40 
	#REMOVE_TRACED_VARIABLE
(
«me
)

	)

41 
	#VERIFY_TRACED_VARIABLES
()

	)

46 
add_åa˚d_v¨übÀ
(c⁄° * 
«me
, * 
addr
, 
size
, c⁄° * 
func
, 
löe
);

47 
ªmove_åa˚d_v¨übÀ
(c⁄° * 
«me
, c⁄° * 
func
, 
löe
);

48 
vîify_åa˚d_v¨übÀs
(c⁄° * 
func
, 
löe
);

	@velocikey.c

1 
	~"vñocikey.h
"

2 
	~"timî.h
"

3 
	~"ìc⁄fig.h
"

4 
	~"ì¥om.h
"

6 #i‚de‡
MIN


7 
	#MIN
(
a
, 
b
Ë((◊Ë< (b)Ë? (aË: (b))

	)

9 #i‚de‡
MAX


10 
	#MAX
(
a
, 
b
Ë((◊Ë> (b)Ë? (aË: (b))

	)

13 
	#TYPING_SPEED_MAX_VALUE
 200

	)

14 
uöt8_t
 
	gtypög_•ìd
 = 0;

16 
boﬁ
 
	$vñocikey_íabÀd
(Ë{  
	`ì¥om_ªad_byã
(
EECONFIG_VELOCIKEY
Ë=1; 
	}
}

18 
	$vñocikey_toggÀ
() {

19 i‡(
	`vñocikey_íabÀd
())

20 
	`ì¥om_upd©e_byã
(
EECONFIG_VELOCIKEY
, 0);

22 
	`ì¥om_upd©e_byã
(
EECONFIG_VELOCIKEY
, 1);

23 
	}
}

25 
	$vñocikey_ac˚Àøã
() {

26 i‡(
typög_•ìd
 < 
TYPING_SPEED_MAX_VALUE
)Åyping_speed += (TYPING_SPEED_MAX_VALUE / 100);

27 
	}
}

29 
	$vñocikey_de˚Àøã
() {

30 
uöt16_t
 
deˇy_timî
 = 0;

32 i‡(
	`timî_ñ≠£d
(
deˇy_timî
) > 500 || decay_timer == 0) {

33 i‡(
typög_•ìd
 > 0)Åyping_speed -= 1;

35 i‡(
typög_•ìd
 > 
TYPING_SPEED_MAX_VALUE
 / 2)Åyping_speed -= 1;

37 i‡(
typög_•ìd
 > 
TYPING_SPEED_MAX_VALUE
 / 4 * 3)Åyping_speed -= 2;

38 
deˇy_timî
 = 
	`timî_ªad
();

40 
	}
}

42 
uöt8_t
 
	$vñocikey_m©ch_•ìd
(
uöt8_t
 
möVÆue
, uöt8_à
maxVÆue
Ë{  
	`MAX
(möVÆue, maxVÆuê- (maxVÆuê- möVÆueË* (()
typög_•ìd
 / 
TYPING_SPEED_MAX_VALUE
)); 
	}
}

	@velocikey.h

1 #i‚de‡
VELOCIKEY_H


2 
	#VELOCIKEY_H


	)

4 
	~<°döt.h
>

5 
	~<°dboﬁ.h
>

7 
boﬁ
 
vñocikey_íabÀd
();

8 
vñocikey_toggÀ
();

9 
vñocikey_ac˚Àøã
();

10 
vñocikey_de˚Àøã
();

11 
uöt8_t
 
vñocikey_m©ch_•ìd
(uöt8_à
möVÆue
, uöt8_à
maxVÆue
);

	@version.h

1 
	#QMK_VERSION
 "0.10.48-10-g69c128"

	)

2 
	#QMK_BUILDDATE
 "2021-07-14-22:35:05"

	)

3 
	#CHIBIOS_VERSION
 "bªakög_2020_q1"

	)

4 
	#CHIBIOS_CONTRIB_VERSION
 "bªakög_2020_q1"

	)

	@via.c

17 #i‚de‡
RAW_ENABLE


21 #i‚de‡
DYNAMIC_KEYMAP_ENABLE


29 #i‡
deföed
(
BACKLIGHT_ENABLE
Ë&& !deföed(
VIA_CUSTOM_LIGHTING_ENABLE
)

30 
	#VIA_QMK_BACKLIGHT_ENABLE


	)

37 #i‡
deföed
(
RGBLIGHT_ENABLE
Ë&& !deföed(
VIA_CUSTOM_LIGHTING_ENABLE
)

38 
	#VIA_QMK_RGBLIGHT_ENABLE


	)

41 
	~"qu™tum.h
"

43 
	~"vü.h
"

45 
	~"øw_hid.h
"

46 
	~"dy«mic_keym≠.h
"

47 
	~"tmk_c‹e/comm⁄/ì¥om.h
"

48 
	~"vîsi⁄.h
"

51 #i‡
deföed
(
VIA_QMK_BACKLIGHT_ENABLE
)

52 
vü_qmk_backlight_£t_vÆue
(
uöt8_t
 *
d©a
);

53 
vü_qmk_backlight_gë_vÆue
(
uöt8_t
 *
d©a
);

56 #i‡
deföed
(
VIA_QMK_RGBLIGHT_ENABLE
)

57 
vü_qmk_rgblight_£t_vÆue
(
uöt8_t
 *
d©a
);

58 
vü_qmk_rgblight_gë_vÆue
(
uöt8_t
 *
d©a
);

63 
boﬁ
 
	$vü_ì¥om_is_vÆid
() {

64 * 
p
 = 
QMK_BUILDDATE
;

65 
uöt8_t
 
magic0
 = ((
p
[2] & 0x0F) << 4) | (p[3] & 0x0F);

66 
uöt8_t
 
magic1
 = ((
p
[5] & 0x0F) << 4) | (p[6] & 0x0F);

67 
uöt8_t
 
magic2
 = ((
p
[8] & 0x0F) << 4) | (p[9] & 0x0F);

69  (
	`ì¥om_ªad_byã
((*)
VIA_EEPROM_MAGIC_ADDR
 + 0Ë=
magic0
 &&Éïrom_ªad_byã((*)VIA_EEPROM_MAGIC_ADDR + 1Ë=
magic1
 &&Éïrom_ªad_byã((*)VIA_EEPROM_MAGIC_ADDR + 2Ë=
magic2
);

70 
	}
}

74 
	$vü_ì¥om_£t_vÆid
(
boﬁ
 
vÆid
) {

75 * 
p
 = 
QMK_BUILDDATE
;

76 
uöt8_t
 
magic0
 = ((
p
[2] & 0x0F) << 4) | (p[3] & 0x0F);

77 
uöt8_t
 
magic1
 = ((
p
[5] & 0x0F) << 4) | (p[6] & 0x0F);

78 
uöt8_t
 
magic2
 = ((
p
[8] & 0x0F) << 4) | (p[9] & 0x0F);

80 
	`ì¥om_upd©e_byã
((*)
VIA_EEPROM_MAGIC_ADDR
 + 0, 
vÆid
 ? 
magic0
 : 0xFF);

81 
	`ì¥om_upd©e_byã
((*)
VIA_EEPROM_MAGIC_ADDR
 + 1, 
vÆid
 ? 
magic1
 : 0xFF);

82 
	`ì¥om_upd©e_byã
((*)
VIA_EEPROM_MAGIC_ADDR
 + 2, 
vÆid
 ? 
magic2
 : 0xFF);

83 
	}
}

88 
	$vü_ì¥om_ª£t
() {

90 
	`vü_ì¥om_£t_vÆid
(
Ál£
);

92 
	`ìc⁄fig_dißbÀ
();

93 
	}
}

101 
__©åibuã__
((
wók
)Ë
	$vü_öô_kb
(Ë{
	}
}

104 
	$vü_öô
() {

107 
	`vü_öô_kb
();

111 i‡(
	`vü_ì¥om_is_vÆid
()) {

114 
	`vü_£t_œyout_›ti⁄s
(
VIA_EEPROM_LAYOUT_OPTIONS_DEFAULT
);

116 
	`dy«mic_keym≠_ª£t
();

118 
	`dy«mic_keym≠_ma¸o_ª£t
();

120 
	`vü_ì¥om_£t_vÆid
(
åue
);

122 
	}
}

126 
uöt32_t
 
	$vü_gë_œyout_›ti⁄s
() {

127 
uöt32_t
 
vÆue
 = 0;

129 *
sour˚
 = (*)(
VIA_EEPROM_LAYOUT_OPTIONS_ADDR
);

130 
uöt8_t
 
i
 = 0; i < 
VIA_EEPROM_LAYOUT_OPTIONS_SIZE
; i++) {

131 
vÆue
 = value << 8;

132 
vÆue
 |
	`ì¥om_ªad_byã
(
sour˚
);

133 
sour˚
++;

135  
vÆue
;

136 
	}
}

138 
	$vü_£t_œyout_›ti⁄s
(
uöt32_t
 
vÆue
) {

140 *
èrgë
 = (*)(
VIA_EEPROM_LAYOUT_OPTIONS_ADDR
 + 
VIA_EEPROM_LAYOUT_OPTIONS_SIZE
 - 1);

141 
uöt8_t
 
i
 = 0; i < 
VIA_EEPROM_LAYOUT_OPTIONS_SIZE
; i++) {

142 
	`ì¥om_upd©e_byã
(
èrgë
, 
vÆue
 & 0xFF);

143 
vÆue
 = value >> 8;

144 
èrgë
--;

146 
	}
}

149 
boﬁ
 
	$¥o˚ss_ªc‹d_vü
(
uöt16_t
 
keycode
, 
keyªc‹d_t
 *
ªc‹d
) {

151 i‡(
ªc‹d
->
evít
.
¥es£d
) {

152 i‡(
keycode
 >
MACRO00
 && keycodê<
MACRO15
) {

153 
uöt8_t
 
id
 = 
keycode
 - 
MACRO00
;

154 
	`dy«mic_keym≠_ma¸o_£nd
(
id
);

155  
Ál£
;

162 
keycode
) {

163 
FN_MO13
:

164 i‡(
ªc‹d
->
evít
.
¥es£d
) {

165 
	`œyî_⁄
(1);

166 
	`upd©e_åi_œyî
(1, 2, 3);

168 
	`œyî_off
(1);

169 
	`upd©e_åi_œyî
(1, 2, 3);

171  
Ál£
;

173 
FN_MO23
:

174 i‡(
ªc‹d
->
evít
.
¥es£d
) {

175 
	`œyî_⁄
(2);

176 
	`upd©e_åi_œyî
(1, 2, 3);

178 
	`œyî_off
(2);

179 
	`upd©e_åi_œyî
(1, 2, 3);

181  
Ál£
;

184  
åue
;

185 
	}
}

190 
__©åibuã__
((
wók
)Ë
	$øw_hid_ª˚ive_kb
(
uöt8_t
 *
d©a
, uöt8_à
Àngth
) {

191 
uöt8_t
 *
comm™d_id
 = &(
d©a
[0]);

192 *
comm™d_id
 = 
id_unh™dÀd
;

193 
	}
}

202 
	$øw_hid_ª˚ive
(
uöt8_t
 *
d©a
, uöt8_à
Àngth
) {

203 
uöt8_t
 *
comm™d_id
 = &(
d©a
[0]);

204 
uöt8_t
 *
comm™d_d©a
 = &(
d©a
[1]);

205 *
comm™d_id
) {

206 
id_gë_¥Ÿocﬁ_vîsi⁄
: {

207 
comm™d_d©a
[0] = 
VIA_PROTOCOL_VERSION
 >> 8;

208 
comm™d_d©a
[1] = 
VIA_PROTOCOL_VERSION
 & 0xFF;

211 
id_gë_keybﬂrd_vÆue
: {

212 
comm™d_d©a
[0]) {

213 
id_u±ime
: {

214 
uöt32_t
 
vÆue
 = 
	`timî_ªad32
();

215 
comm™d_d©a
[1] = (
vÆue
 >> 24) & 0xFF;

216 
comm™d_d©a
[2] = (
vÆue
 >> 16) & 0xFF;

217 
comm™d_d©a
[3] = (
vÆue
 >> 8) & 0xFF;

218 
comm™d_d©a
[4] = 
vÆue
 & 0xFF;

221 
id_œyout_›ti⁄s
: {

222 
uöt32_t
 
vÆue
 = 
	`vü_gë_œyout_›ti⁄s
();

223 
comm™d_d©a
[1] = (
vÆue
 >> 24) & 0xFF;

224 
comm™d_d©a
[2] = (
vÆue
 >> 16) & 0xFF;

225 
comm™d_d©a
[3] = (
vÆue
 >> 8) & 0xFF;

226 
comm™d_d©a
[4] = 
vÆue
 & 0xFF;

229 
id_swôch_m©rix_°©e
: {

230 #i‡((
MATRIX_COLS
 / 8 + 1Ë* 
MATRIX_ROWS
 <= 28)

231 
uöt8_t
 
i
 = 1;

232 
uöt8_t
 
row
 = 0;Ñow < 
MATRIX_ROWS
;Ñow++) {

233 
m©rix_row_t
 
vÆue
 = 
	`m©rix_gë_row
(
row
);

234 #i‡(
MATRIX_COLS
 > 24)

235 
comm™d_d©a
[
i
++] = (
vÆue
 >> 24) & 0xFF;

237 #i‡(
MATRIX_COLS
 > 16)

238 
comm™d_d©a
[
i
++] = (
vÆue
 >> 16) & 0xFF;

240 #i‡(
MATRIX_COLS
 > 8)

241 
comm™d_d©a
[
i
++] = (
vÆue
 >> 8) & 0xFF;

243 
comm™d_d©a
[
i
++] = 
vÆue
 & 0xFF;

249 
	`øw_hid_ª˚ive_kb
(
d©a
, 
Àngth
);

255 
id_£t_keybﬂrd_vÆue
: {

256 
comm™d_d©a
[0]) {

257 
id_œyout_›ti⁄s
: {

258 
uöt32_t
 
vÆue
 = ((uöt32_t)
comm™d_d©a
[1] << 24) | ((uint32_t)command_data[2] << 16) | ((uint32_t)command_data[3] << 8) | (uint32_t)command_data[4];

259 
	`vü_£t_œyout_›ti⁄s
(
vÆue
);

263 
	`øw_hid_ª˚ive_kb
(
d©a
, 
Àngth
);

269 
id_dy«mic_keym≠_gë_keycode
: {

270 
uöt16_t
 
keycode
 = 
	`dy«mic_keym≠_gë_keycode
(
comm™d_d©a
[0], command_data[1], command_data[2]);

271 
comm™d_d©a
[3] = 
keycode
 >> 8;

272 
comm™d_d©a
[4] = 
keycode
 & 0xFF;

275 
id_dy«mic_keym≠_£t_keycode
: {

276 
	`dy«mic_keym≠_£t_keycode
(
comm™d_d©a
[0], command_data[1], command_data[2], (command_data[3] << 8) | command_data[4]);

279 
id_dy«mic_keym≠_ª£t
: {

280 
	`dy«mic_keym≠_ª£t
();

283 
id_lightög_£t_vÆue
: {

284 #i‡
	`deföed
(
VIA_QMK_BACKLIGHT_ENABLE
)

285 
	`vü_qmk_backlight_£t_vÆue
(
comm™d_d©a
);

287 #i‡
	`deföed
(
VIA_QMK_RGBLIGHT_ENABLE
)

288 
	`vü_qmk_rgblight_£t_vÆue
(
comm™d_d©a
);

290 #i‡
	`deföed
(
VIA_CUSTOM_LIGHTING_ENABLE
)

291 
	`øw_hid_ª˚ive_kb
(
d©a
, 
Àngth
);

293 #i‡!
	`deföed
(
VIA_QMK_BACKLIGHT_ENABLE
Ë&& !deföed(
VIA_QMK_RGBLIGHT_ENABLE
Ë&& !deföed(
VIA_CUSTOM_LIGHTING_ENABLE
)

295 *
comm™d_id
 = 
id_unh™dÀd
;

299 
id_lightög_gë_vÆue
: {

300 #i‡
	`deföed
(
VIA_QMK_BACKLIGHT_ENABLE
)

301 
	`vü_qmk_backlight_gë_vÆue
(
comm™d_d©a
);

303 #i‡
	`deföed
(
VIA_QMK_RGBLIGHT_ENABLE
)

304 
	`vü_qmk_rgblight_gë_vÆue
(
comm™d_d©a
);

306 #i‡
	`deföed
(
VIA_CUSTOM_LIGHTING_ENABLE
)

307 
	`øw_hid_ª˚ive_kb
(
d©a
, 
Àngth
);

309 #i‡!
	`deföed
(
VIA_QMK_BACKLIGHT_ENABLE
Ë&& !deföed(
VIA_QMK_RGBLIGHT_ENABLE
Ë&& !deföed(
VIA_CUSTOM_LIGHTING_ENABLE
)

311 *
comm™d_id
 = 
id_unh™dÀd
;

315 
id_lightög_ßve
: {

316 #i‡
	`deföed
(
VIA_QMK_BACKLIGHT_ENABLE
)

317 
	`ìc⁄fig_upd©e_backlight_cuºít
();

319 #i‡
	`deföed
(
VIA_QMK_RGBLIGHT_ENABLE
)

320 
	`ìc⁄fig_upd©e_rgblight_cuºít
();

322 #i‡
	`deföed
(
VIA_CUSTOM_LIGHTING_ENABLE
)

323 
	`øw_hid_ª˚ive_kb
(
d©a
, 
Àngth
);

325 #i‡!
	`deföed
(
VIA_QMK_BACKLIGHT_ENABLE
Ë&& !deföed(
VIA_QMK_RGBLIGHT_ENABLE
Ë&& !deföed(
VIA_CUSTOM_LIGHTING_ENABLE
)

327 *
comm™d_id
 = 
id_unh™dÀd
;

331 
id_dy«mic_keym≠_ma¸o_gë_cou¡
: {

332 
comm™d_d©a
[0] = 
	`dy«mic_keym≠_ma¸o_gë_cou¡
();

335 
id_dy«mic_keym≠_ma¸o_gë_buf„r_size
: {

336 
uöt16_t
 
size
 = 
	`dy«mic_keym≠_ma¸o_gë_buf„r_size
();

337 
comm™d_d©a
[0] = 
size
 >> 8;

338 
comm™d_d©a
[1] = 
size
 & 0xFF;

341 
id_dy«mic_keym≠_ma¸o_gë_buf„r
: {

342 
uöt16_t
 
off£t
 = (
comm™d_d©a
[0] << 8) | command_data[1];

343 
uöt16_t
 
size
 = 
comm™d_d©a
[2];

344 
	`dy«mic_keym≠_ma¸o_gë_buf„r
(
off£t
, 
size
, &
comm™d_d©a
[3]);

347 
id_dy«mic_keym≠_ma¸o_£t_buf„r
: {

348 
uöt16_t
 
off£t
 = (
comm™d_d©a
[0] << 8) | command_data[1];

349 
uöt16_t
 
size
 = 
comm™d_d©a
[2];

350 
	`dy«mic_keym≠_ma¸o_£t_buf„r
(
off£t
, 
size
, &
comm™d_d©a
[3]);

353 
id_dy«mic_keym≠_ma¸o_ª£t
: {

354 
	`dy«mic_keym≠_ma¸o_ª£t
();

357 
id_dy«mic_keym≠_gë_œyî_cou¡
: {

358 
comm™d_d©a
[0] = 
	`dy«mic_keym≠_gë_œyî_cou¡
();

361 
id_dy«mic_keym≠_gë_buf„r
: {

362 
uöt16_t
 
off£t
 = (
comm™d_d©a
[0] << 8) | command_data[1];

363 
uöt16_t
 
size
 = 
comm™d_d©a
[2];

364 
	`dy«mic_keym≠_gë_buf„r
(
off£t
, 
size
, &
comm™d_d©a
[3]);

367 
id_dy«mic_keym≠_£t_buf„r
: {

368 
uöt16_t
 
off£t
 = (
comm™d_d©a
[0] << 8) | command_data[1];

369 
uöt16_t
 
size
 = 
comm™d_d©a
[2];

370 
	`dy«mic_keym≠_£t_buf„r
(
off£t
, 
size
, &
comm™d_d©a
[3]);

373 
id_ì¥om_ª£t
: {

374 
	`vü_ì¥om_ª£t
();

377 
id_boŸlﬂdî_jump
: {

380 
	`øw_hid_£nd
(
d©a
, 
Àngth
);

382 
	`waô_ms
(100);

383 
	`boŸlﬂdî_jump
();

389 *
comm™d_id
 = 
id_unh™dÀd
;

396 
	`øw_hid_£nd
(
d©a
, 
Àngth
);

397 
	}
}

399 #i‡
deföed
(
VIA_QMK_BACKLIGHT_ENABLE
)

401 #i‡
BACKLIGHT_LEVELS
 == 0

402 #îr‹ 
BACKLIGHT_LEVELS
 == 0

405 
	$vü_qmk_backlight_gë_vÆue
(
uöt8_t
 *
d©a
) {

406 
uöt8_t
 *
vÆue_id
 = &(
d©a
[0]);

407 
uöt8_t
 *
vÆue_d©a
 = &(
d©a
[1]);

408 *
vÆue_id
) {

409 
id_qmk_backlight_brighäess
: {

411 
vÆue_d©a
[0] = ((
uöt16_t
)
	`gë_backlight_Àvñ
()Ë* 255 / 
BACKLIGHT_LEVELS
;

414 
id_qmk_backlight_ef„˘
: {

415 #ifde‡
BACKLIGHT_BREATHING


416 
vÆue_d©a
[0] = 
	`is_backlight_bª©hög
() ? 1 : 0;

418 
vÆue_d©a
[0] = 0;

423 
	}
}

425 
	$vü_qmk_backlight_£t_vÆue
(
uöt8_t
 *
d©a
) {

426 
uöt8_t
 *
vÆue_id
 = &(
d©a
[0]);

427 
uöt8_t
 *
vÆue_d©a
 = &(
d©a
[1]);

428 *
vÆue_id
) {

429 
id_qmk_backlight_brighäess
: {

431 
	`backlight_Àvñ_n€ïrom
(((
uöt16_t
)
vÆue_d©a
[0]Ë* 
BACKLIGHT_LEVELS
 / 255);

434 
id_qmk_backlight_ef„˘
: {

435 #ifde‡
BACKLIGHT_BREATHING


436 i‡(
vÆue_d©a
[0] == 0) {

437 
	`backlight_dißbÀ_bª©hög
();

439 
	`backlight_íabÀ_bª©hög
();

445 
	}
}

449 #i‡
deföed
(
VIA_QMK_RGBLIGHT_ENABLE
)

451 
	$vü_qmk_rgblight_gë_vÆue
(
uöt8_t
 *
d©a
) {

452 
uöt8_t
 *
vÆue_id
 = &(
d©a
[0]);

453 
uöt8_t
 *
vÆue_d©a
 = &(
d©a
[1]);

454 *
vÆue_id
) {

455 
id_qmk_rgblight_brighäess
: {

456 
vÆue_d©a
[0] = 
	`rgblight_gë_vÆ
();

459 
id_qmk_rgblight_ef„˘
: {

460 
vÆue_d©a
[0] = 
	`rgblight_gë_mode
();

463 
id_qmk_rgblight_ef„˘_•ìd
: {

464 
vÆue_d©a
[0] = 
	`rgblight_gë_•ìd
();

467 
id_qmk_rgblight_cﬁ‹
: {

468 
vÆue_d©a
[0] = 
	`rgblight_gë_hue
();

469 
vÆue_d©a
[1] = 
	`rgblight_gë_ßt
();

473 
	}
}

475 
	$vü_qmk_rgblight_£t_vÆue
(
uöt8_t
 *
d©a
) {

476 
uöt8_t
 *
vÆue_id
 = &(
d©a
[0]);

477 
uöt8_t
 *
vÆue_d©a
 = &(
d©a
[1]);

478 *
vÆue_id
) {

479 
id_qmk_rgblight_brighäess
: {

480 
	`rgblight_£thsv_n€ïrom
(
	`rgblight_gë_hue
(), 
	`rgblight_gë_ßt
(), 
vÆue_d©a
[0]);

483 
id_qmk_rgblight_ef„˘
: {

484 
	`rgblight_mode_n€ïrom
(
vÆue_d©a
[0]);

485 i‡(
vÆue_d©a
[0] == 0) {

486 
	`rgblight_dißbÀ_n€ïrom
();

488 
	`rgblight_íabÀ_n€ïrom
();

492 
id_qmk_rgblight_ef„˘_•ìd
: {

493 
	`rgblight_£t_•ìd_n€ïrom
(
vÆue_d©a
[0]);

496 
id_qmk_rgblight_cﬁ‹
: {

497 
	`rgblight_£thsv_n€ïrom
(
vÆue_d©a
[0], vÆue_d©a[1], 
	`rgblight_gë_vÆ
());

501 
	}
}

	@via.h

17 #¥agm®
⁄˚


19 
	~<tmk_c‹e/comm⁄/ìc⁄fig.h
>

27 #i‚de‡
VIA_EEPROM_MAGIC_ADDR


28 
	#VIA_EEPROM_MAGIC_ADDR
 (
EECONFIG_SIZE
)

	)

31 
	#VIA_EEPROM_LAYOUT_OPTIONS_ADDR
 (
VIA_EEPROM_MAGIC_ADDR
 + 3)

	)

36 #i‚de‡
VIA_EEPROM_LAYOUT_OPTIONS_SIZE


37 
	#VIA_EEPROM_LAYOUT_OPTIONS_SIZE
 1

	)

44 #i‚de‡
VIA_EEPROM_LAYOUT_OPTIONS_DEFAULT


45 
	#VIA_EEPROM_LAYOUT_OPTIONS_DEFAULT
 0x00000000

	)

51 
	#VIA_EEPROM_CUSTOM_CONFIG_ADDR
 (
VIA_EEPROM_LAYOUT_OPTIONS_ADDR
 + 
VIA_EEPROM_LAYOUT_OPTIONS_SIZE
)

	)

53 #i‚de‡
VIA_EEPROM_CUSTOM_CONFIG_SIZE


54 
	#VIA_EEPROM_CUSTOM_CONFIG_SIZE
 0

	)

59 
	#VIA_PROTOCOL_VERSION
 0x0009

	)

61 
	evü_comm™d_id
 {

62 
	mid_gë_¥Ÿocﬁ_vîsi⁄
 = 0x01,

63 
	mid_gë_keybﬂrd_vÆue
 = 0x02,

64 
	mid_£t_keybﬂrd_vÆue
 = 0x03,

65 
	mid_dy«mic_keym≠_gë_keycode
 = 0x04,

66 
	mid_dy«mic_keym≠_£t_keycode
 = 0x05,

67 
	mid_dy«mic_keym≠_ª£t
 = 0x06,

68 
	mid_lightög_£t_vÆue
 = 0x07,

69 
	mid_lightög_gë_vÆue
 = 0x08,

70 
	mid_lightög_ßve
 = 0x09,

71 
	mid_ì¥om_ª£t
 = 0x0A,

72 
	mid_boŸlﬂdî_jump
 = 0x0B,

73 
	mid_dy«mic_keym≠_ma¸o_gë_cou¡
 = 0x0C,

74 
	mid_dy«mic_keym≠_ma¸o_gë_buf„r_size
 = 0x0D,

75 
	mid_dy«mic_keym≠_ma¸o_gë_buf„r
 = 0x0E,

76 
	mid_dy«mic_keym≠_ma¸o_£t_buf„r
 = 0x0F,

77 
	mid_dy«mic_keym≠_ma¸o_ª£t
 = 0x10,

78 
	mid_dy«mic_keym≠_gë_œyî_cou¡
 = 0x11,

79 
	mid_dy«mic_keym≠_gë_buf„r
 = 0x12,

80 
	mid_dy«mic_keym≠_£t_buf„r
 = 0x13,

81 
	mid_unh™dÀd
 = 0xFF,

84 
	evü_keybﬂrd_vÆue_id
 {

85 
	mid_u±ime
 = 0x01,

86 
	mid_œyout_›ti⁄s
 = 0x02,

87 
	mid_swôch_m©rix_°©e
 = 0x03

90 
	evü_lightög_vÆue
 {

92 
	mid_qmk_backlight_brighäess
 = 0x09,

93 
	mid_qmk_backlight_ef„˘
 = 0x0A,

96 
	mid_qmk_rgblight_brighäess
 = 0x80,

97 
	mid_qmk_rgblight_ef„˘
 = 0x81,

98 
	mid_qmk_rgblight_ef„˘_•ìd
 = 0x82,

99 
	mid_qmk_rgblight_cﬁ‹
 = 0x83,

107 
	evü_keycodes
 {

108 
	mFN_MO13
 = 0x5F10,

109 
	mFN_MO23
,

110 
	mMACRO00
,

111 
	mMACRO01
,

112 
	mMACRO02
,

113 
	mMACRO03
,

114 
	mMACRO04
,

115 
	mMACRO05
,

116 
	mMACRO06
,

117 
	mMACRO07
,

118 
	mMACRO08
,

119 
	mMACRO09
,

120 
	mMACRO10
,

121 
	mMACRO11
,

122 
	mMACRO12
,

123 
	mMACRO13
,

124 
	mMACRO14
,

125 
	mMACRO15
,

128 
	eu£r_keycodes
 {

129 
	mUSER00
 = 0x5F80,

130 
	mUSER01
,

131 
	mUSER02
,

132 
	mUSER03
,

133 
	mUSER04
,

134 
	mUSER05
,

135 
	mUSER06
,

136 
	mUSER07
,

137 
	mUSER08
,

138 
	mUSER09
,

139 
	mUSER10
,

140 
	mUSER11
,

141 
	mUSER12
,

142 
	mUSER13
,

143 
	mUSER14
,

144 
	mUSER15
,

149 
boﬁ
 
vü_ì¥om_is_vÆid
();

153 
vü_ì¥om_£t_vÆid
(
boﬁ
 
vÆid
);

158 
vü_ì¥om_ª£t
();

161 
vü_öô
();

164 
uöt32_t
 
vü_gë_œyout_›ti⁄s
();

165 
vü_£t_œyout_›ti⁄s
(
uöt32_t
 
vÆue
);

168 
boﬁ
 
¥o˚ss_ªc‹d_vü
(
uöt16_t
 
keycode
, 
keyªc‹d_t
 *
ªc‹d
);

	@wpm.c

18 
	~"wpm.h
"

21 
uöt8_t
 
	gcuºít_wpm
 = 0;

22 
uöt8_t
 
	gœã°_wpm
 = 0;

23 
uöt16_t
 
	gwpm_timî
 = 0;

26 c⁄° 
	gwpm_smoŸhög
 = 0.0487;

28 
	$£t_cuºít_wpm
(
uöt8_t
 
√w_wpm
Ë{ 
cuºít_wpm
 =Çew_wpm; 
	}
}

30 
uöt8_t
 
	$gë_cuºít_wpm
(Ë{  
cuºít_wpm
; 
	}
}

32 
boﬁ
 
	$wpm_keycode
(
uöt16_t
 
keycode
Ë{  
	`wpm_keycode_kb
(keycode); 
	}
}

34 
__©åibuã__
((
wók
)Ë
boﬁ
 
	$wpm_keycode_kb
(
uöt16_t
 
keycode
Ë{  
	`wpm_keycode_u£r
(keycode); 
	}
}

36 
__©åibuã__
((
wók
)Ë
boﬁ
 
	$wpm_keycode_u£r
(
uöt16_t
 
keycode
) {

37 i‡((
keycode
 >
QK_MOD_TAP
 && keycodê<
QK_MOD_TAP_MAX
Ë|| (keycodê>
QK_LAYER_TAP
 && keycodê<
QK_LAYER_TAP_MAX
Ë|| (keycodê>
QK_MODS
 && keycodê<
QK_MODS_MAX
)) {

38 
keycode
 = keycode & 0xFF;

39 } i‡(
keycode
 > 0xFF) {

40 
keycode
 = 0;

42 i‡((
keycode
 >
KC_A
 && keycodê<
KC_0
Ë|| (keycodê>
KC_TAB
 && keycodê<
KC_SLASH
)) {

43  
åue
;

46  
Ál£
;

47 
	}
}

49 
	$upd©e_wpm
(
uöt16_t
 
keycode
) {

50 i‡(
	`wpm_keycode
(
keycode
)) {

51 i‡(
wpm_timî
 > 0) {

52 
œã°_wpm
 = 60000 / 
	`timî_ñ≠£d
(
wpm_timî
) / 5;

53 
cuºít_wpm
 = (
œã°_wpm
 - cuºít_wpmË* 
wpm_smoŸhög
 + current_wpm;

55 
wpm_timî
 = 
	`timî_ªad
();

57 
	}
}

59 
	$deˇy_wpm
() {

60 i‡(
	`timî_ñ≠£d
(
wpm_timî
) > 1000) {

61 
cuºít_wpm
 = (0 - cuºít_wpmË* 
wpm_smoŸhög
 + current_wpm;

62 
wpm_timî
 = 
	`timî_ªad
();

64 
	}
}

	@wpm.h

18 #¥agm®
⁄˚


20 
	~"qu™tum.h
"

22 
boﬁ
 
wpm_keycode
(
uöt16_t
 
keycode
);

23 
boﬁ
 
wpm_keycode_kb
(
uöt16_t
 
keycode
);

24 
boﬁ
 
wpm_keycode_u£r
(
uöt16_t
 
keycode
);

26 
£t_cuºít_wpm
(
uöt8_t
);

27 
uöt8_t
 
gë_cuºít_wpm
();

28 
upd©e_wpm
(
uöt16_t
);

30 
deˇy_wpm
();

	@rgb_matrix_animations/rgb_matrix_effects.inc

2 
	~"rgb_m©rix_™im©i⁄s/sﬁid_cﬁ‹_™im.h
"

3 
	~"rgb_m©rix_™im©i⁄s/Æpha_mods_™im.h
"

4 
	~"rgb_m©rix_™im©i⁄s/gødõ¡_up_down_™im.h
"

5 
	~"rgb_m©rix_™im©i⁄s/gødõ¡_À·_right_™im.h
"

6 
	~"rgb_m©rix_™im©i⁄s/bª©hög_™im.h
"

7 
	~"rgb_m©rix_™im©i⁄s/cﬁ‹b™d_ßt_™im.h
"

8 
	~"rgb_m©rix_™im©i⁄s/cﬁ‹b™d_vÆ_™im.h
"

9 
	~"rgb_m©rix_™im©i⁄s/cﬁ‹b™d_pöwhìl_ßt_™im.h
"

10 
	~"rgb_m©rix_™im©i⁄s/cﬁ‹b™d_pöwhìl_vÆ_™im.h
"

11 
	~"rgb_m©rix_™im©i⁄s/cﬁ‹b™d_•úÆ_ßt_™im.h
"

12 
	~"rgb_m©rix_™im©i⁄s/cﬁ‹b™d_•úÆ_vÆ_™im.h
"

13 
	~"rgb_m©rix_™im©i⁄s/cy˛e_Æl_™im.h
"

14 
	~"rgb_m©rix_™im©i⁄s/cy˛e_À·_right_™im.h
"

15 
	~"rgb_m©rix_™im©i⁄s/cy˛e_up_down_™im.h
"

16 
	~"rgb_m©rix_™im©i⁄s/øöbow_movög_chevr⁄_™im.h
"

17 
	~"rgb_m©rix_™im©i⁄s/cy˛e_out_ö_™im.h
"

18 
	~"rgb_m©rix_™im©i⁄s/cy˛e_out_ö_duÆ_™im.h
"

19 
	~"rgb_m©rix_™im©i⁄s/cy˛e_pöwhìl_™im.h
"

20 
	~"rgb_m©rix_™im©i⁄s/cy˛e_•úÆ_™im.h
"

21 
	~"rgb_m©rix_™im©i⁄s/duÆ_bóc⁄_™im.h
"

22 
	~"rgb_m©rix_™im©i⁄s/øöbow_bóc⁄_™im.h
"

23 
	~"rgb_m©rix_™im©i⁄s/øöbow_pöwhìls_™im.h
"

24 
	~"rgb_m©rix_™im©i⁄s/øödr›s_™im.h
"

25 
	~"rgb_m©rix_™im©i⁄s/jñlybón_øödr›s_™im.h
"

26 
	~"rgb_m©rix_™im©i⁄s/typög_hótm≠_™im.h
"

27 
	~"rgb_m©rix_™im©i⁄s/digôÆ_øö_™im.h
"

28 
	~"rgb_m©rix_™im©i⁄s/sﬁid_ªa˘ive_sim∂e_™im.h
"

29 
	~"rgb_m©rix_™im©i⁄s/sﬁid_ªa˘ive_™im.h
"

30 
	~"rgb_m©rix_™im©i⁄s/sﬁid_ªa˘ive_wide.h
"

31 
	~"rgb_m©rix_™im©i⁄s/sﬁid_ªa˘ive_¸oss.h
"

32 
	~"rgb_m©rix_™im©i⁄s/sﬁid_ªa˘ive_√xus.h
"

33 
	~"rgb_m©rix_™im©i⁄s/•œsh_™im.h
"

34 
	~"rgb_m©rix_™im©i⁄s/sﬁid_•œsh_™im.h
"

	@rgb_matrix_runners/effect_runner_dx_dy.h

1 #¥agm®
⁄˚


3 
	$HSV
 (*
	tdx_dy_f
)(
	tHSV
 
	thsv
, 
	töt16_t
 
	tdx
, i¡16_à
	tdy
, 
	tuöt8_t
 
	ttime
);

5 
boﬁ
 
	$ef„˘_ru¬î_dx_dy
(
ef„˘_∑øms_t
* 
∑øms
, 
dx_dy_f
 
ef„˘_func
) {

6 
	`RGB_MATRIX_USE_LIMITS
(
Àd_mö
, 
Àd_max
);

8 
uöt8_t
 
time
 = 
	`sˇÀ16by8
(
g_rgb_timî
, 
rgb_m©rix_c⁄fig
.
•ìd
 / 2);

9 
uöt8_t
 
i
 = 
Àd_mö
; i < 
Àd_max
; i++) {

10 
	`RGB_MATRIX_TEST_LED_FLAGS
();

11 
öt16_t
 
dx
 = 
g_Àd_c⁄fig
.
poöt
[
i
].
x
 - 
k_rgb_m©rix_˚¡î
.x;

12 
öt16_t
 
dy
 = 
g_Àd_c⁄fig
.
poöt
[
i
].
y
 - 
k_rgb_m©rix_˚¡î
.y;

13 
RGB
 
rgb
 = 
	`hsv_to_rgb
(
	`ef„˘_func
(
rgb_m©rix_c⁄fig
.
hsv
, 
dx
, 
dy
, 
time
));

14 
	`rgb_m©rix_£t_cﬁ‹
(
i
, 
rgb
.
r
,Ñgb.
g
,Ñgb.
b
);

16  
Àd_max
 < 
DRIVER_LED_TOTAL
;

17 
	}
}

	@rgb_matrix_runners/effect_runner_dx_dy_dist.h

1 #¥agm®
⁄˚


3 
	$HSV
 (*
	tdx_dy_di°_f
)(
	tHSV
 
	thsv
, 
	töt16_t
 
	tdx
, i¡16_à
	tdy
, 
	tuöt8_t
 
	tdi°
, uöt8_à
	ttime
);

5 
boﬁ
 
	$ef„˘_ru¬î_dx_dy_di°
(
ef„˘_∑øms_t
* 
∑øms
, 
dx_dy_di°_f
 
ef„˘_func
) {

6 
	`RGB_MATRIX_USE_LIMITS
(
Àd_mö
, 
Àd_max
);

8 
uöt8_t
 
time
 = 
	`sˇÀ16by8
(
g_rgb_timî
, 
rgb_m©rix_c⁄fig
.
•ìd
 / 2);

9 
uöt8_t
 
i
 = 
Àd_mö
; i < 
Àd_max
; i++) {

10 
	`RGB_MATRIX_TEST_LED_FLAGS
();

11 
öt16_t
 
dx
 = 
g_Àd_c⁄fig
.
poöt
[
i
].
x
 - 
k_rgb_m©rix_˚¡î
.x;

12 
öt16_t
 
dy
 = 
g_Àd_c⁄fig
.
poöt
[
i
].
y
 - 
k_rgb_m©rix_˚¡î
.y;

13 
uöt8_t
 
di°
 = 
	`sqπ16
(
dx
 * dx + 
dy
 * dy);

14 
RGB
 
rgb
 = 
	`hsv_to_rgb
(
	`ef„˘_func
(
rgb_m©rix_c⁄fig
.
hsv
, 
dx
, 
dy
, 
di°
, 
time
));

15 
	`rgb_m©rix_£t_cﬁ‹
(
i
, 
rgb
.
r
,Ñgb.
g
,Ñgb.
b
);

17  
Àd_max
 < 
DRIVER_LED_TOTAL
;

18 
	}
}

	@rgb_matrix_runners/effect_runner_i.h

1 #¥agm®
⁄˚


3 
	$HSV
 (*
	ti_f
)(
	tHSV
 
	thsv
, 
	tuöt8_t
 
	ti
, uöt8_à
	ttime
);

5 
boﬁ
 
	$ef„˘_ru¬î_i
(
ef„˘_∑øms_t
* 
∑øms
, 
i_f
 
ef„˘_func
) {

6 
	`RGB_MATRIX_USE_LIMITS
(
Àd_mö
, 
Àd_max
);

8 
uöt8_t
 
time
 = 
	`sˇÀ16by8
(
g_rgb_timî
, 
rgb_m©rix_c⁄fig
.
•ìd
 / 4);

9 
uöt8_t
 
i
 = 
Àd_mö
; i < 
Àd_max
; i++) {

10 
	`RGB_MATRIX_TEST_LED_FLAGS
();

11 
RGB
 
rgb
 = 
	`hsv_to_rgb
(
	`ef„˘_func
(
rgb_m©rix_c⁄fig
.
hsv
, 
i
, 
time
));

12 
	`rgb_m©rix_£t_cﬁ‹
(
i
, 
rgb
.
r
,Ñgb.
g
,Ñgb.
b
);

14  
Àd_max
 < 
DRIVER_LED_TOTAL
;

15 
	}
}

	@rgb_matrix_runners/effect_runner_reactive.h

1 #¥agm®
⁄˚


3 #ifde‡
RGB_MATRIX_KEYREACTIVE_ENABLED


5 
	$HSV
 (*
	tªa˘ive_f
)(
	tHSV
 
	thsv
, 
	tuöt16_t
 
	toff£t
);

7 
boﬁ
 
	$ef„˘_ru¬î_ªa˘ive
(
ef„˘_∑øms_t
* 
∑øms
, 
ªa˘ive_f
 
ef„˘_func
) {

8 
	`RGB_MATRIX_USE_LIMITS
(
Àd_mö
, 
Àd_max
);

10 
uöt16_t
 
max_tick
 = 65535 / 
rgb_m©rix_c⁄fig
.
•ìd
;

11 
uöt8_t
 
i
 = 
Àd_mö
; i < 
Àd_max
; i++) {

12 
	`RGB_MATRIX_TEST_LED_FLAGS
();

13 
uöt16_t
 
tick
 = 
max_tick
;

15 
öt8_t
 
j
 = 
g_œ°_hô_åackî
.
cou¡
 - 1; j >= 0; j--) {

16 i‡(
g_œ°_hô_åackî
.
ödex
[
j
] =
i
 && g_œ°_hô_åackî.
tick
[j] <Åick) {

17 
tick
 = 
g_œ°_hô_åackî
.tick[
j
];

22 
uöt16_t
 
off£t
 = 
	`sˇÀ16by8
(
tick
, 
rgb_m©rix_c⁄fig
.
•ìd
);

23 
RGB
 
rgb
 = 
	`hsv_to_rgb
(
	`ef„˘_func
(
rgb_m©rix_c⁄fig
.
hsv
, 
off£t
));

24 
	`rgb_m©rix_£t_cﬁ‹
(
i
, 
rgb
.
r
,Ñgb.
g
,Ñgb.
b
);

26  
Àd_max
 < 
DRIVER_LED_TOTAL
;

27 
	}
}

	@rgb_matrix_runners/effect_runner_reactive_splash.h

1 #¥agm®
⁄˚


3 #ifde‡
RGB_MATRIX_KEYREACTIVE_ENABLED


5 
	$HSV
 (*
	tªa˘ive_•œsh_f
)(
	tHSV
 
	thsv
, 
	töt16_t
 
	tdx
, i¡16_à
	tdy
, 
	tuöt8_t
 
	tdi°
, 
	tuöt16_t
 
	ttick
);

7 
boﬁ
 
	$ef„˘_ru¬î_ªa˘ive_•œsh
(
uöt8_t
 
°¨t
, 
ef„˘_∑øms_t
* 
∑øms
, 
ªa˘ive_•œsh_f
 
ef„˘_func
) {

8 
	`RGB_MATRIX_USE_LIMITS
(
Àd_mö
, 
Àd_max
);

10 
uöt8_t
 
cou¡
 = 
g_œ°_hô_åackî
.count;

11 
uöt8_t
 
i
 = 
Àd_mö
; i < 
Àd_max
; i++) {

12 
	`RGB_MATRIX_TEST_LED_FLAGS
();

13 
HSV
 
hsv
 = 
rgb_m©rix_c⁄fig
.hsv;

14 
hsv
.
v
 = 0;

15 
uöt8_t
 
j
 = 
°¨t
; j < 
cou¡
; j++) {

16 
öt16_t
 
dx
 = 
g_Àd_c⁄fig
.
poöt
[
i
].
x
 - 
g_œ°_hô_åackî
.x[
j
];

17 
öt16_t
 
dy
 = 
g_Àd_c⁄fig
.
poöt
[
i
].
y
 - 
g_œ°_hô_åackî
.y[
j
];

18 
uöt8_t
 
di°
 = 
	`sqπ16
(
dx
 * dx + 
dy
 * dy);

19 
uöt16_t
 
tick
 = 
	`sˇÀ16by8
(
g_œ°_hô_åackî
.tick[
j
], 
rgb_m©rix_c⁄fig
.
•ìd
);

20 
hsv
 = 
	`ef„˘_func
(hsv, 
dx
, 
dy
, 
di°
, 
tick
);

22 
hsv
.
v
 = 
	`sˇÀ8
(hsv.v, 
rgb_m©rix_c⁄fig
.hsv.v);

23 
RGB
 
rgb
 = 
	`hsv_to_rgb
(
hsv
);

24 
	`rgb_m©rix_£t_cﬁ‹
(
i
, 
rgb
.
r
,Ñgb.
g
,Ñgb.
b
);

26  
Àd_max
 < 
DRIVER_LED_TOTAL
;

27 
	}
}

	@rgb_matrix_runners/effect_runner_sin_cos_i.h

1 #¥agm®
⁄˚


3 
	$HSV
 (*
	tsö_cos_i_f
)(
	tHSV
 
	thsv
, 
	töt8_t
 
	tsö
, i¡8_à
	tcos
, 
	tuöt8_t
 
	ti
, uöt8_à
	ttime
);

5 
boﬁ
 
	$ef„˘_ru¬î_sö_cos_i
(
ef„˘_∑øms_t
* 
∑øms
, 
sö_cos_i_f
 
ef„˘_func
) {

6 
	`RGB_MATRIX_USE_LIMITS
(
Àd_mö
, 
Àd_max
);

8 
uöt16_t
 
time
 = 
	`sˇÀ16by8
(
g_rgb_timî
, 
rgb_m©rix_c⁄fig
.
•ìd
 / 4);

9 
öt8_t
 
cos_vÆue
 = 
	`cos8
(
time
) - 128;

10 
öt8_t
 
sö_vÆue
 = 
	`sö8
(
time
) - 128;

11 
uöt8_t
 
i
 = 
Àd_mö
; i < 
Àd_max
; i++) {

12 
	`RGB_MATRIX_TEST_LED_FLAGS
();

13 
RGB
 
rgb
 = 
	`hsv_to_rgb
(
	`ef„˘_func
(
rgb_m©rix_c⁄fig
.
hsv
, 
cos_vÆue
, 
sö_vÆue
, 
i
, 
time
));

14 
	`rgb_m©rix_£t_cﬁ‹
(
i
, 
rgb
.
r
,Ñgb.
g
,Ñgb.
b
);

16  
Àd_max
 < 
DRIVER_LED_TOTAL
;

17 
	}
}

	@rgb_matrix_animations/alpha_mods_anim.h

1 #i‚de‡
DISABLE_RGB_MATRIX_ALPHAS_MODS


2 
	$RGB_MATRIX_EFFECT
(
ALPHAS_MODS
)

3 #ifde‡
RGB_MATRIX_CUSTOM_EFFECT_IMPLS


6 
boﬁ
 
	$ALPHAS_MODS
(
ef„˘_∑øms_t
* 
∑øms
) {

7 
	`RGB_MATRIX_USE_LIMITS
(
Àd_mö
, 
Àd_max
);

9 
HSV
 
hsv
 = 
rgb_m©rix_c⁄fig
.hsv;

10 
RGB
 
rgb1
 = 
	`hsv_to_rgb
(
hsv
);

11 
hsv
.
h
 +
rgb_m©rix_c⁄fig
.
•ìd
;

12 
RGB
 
rgb2
 = 
	`hsv_to_rgb
(
hsv
);

14 
uöt8_t
 
i
 = 
Àd_mö
; i < 
Àd_max
; i++) {

15 
	`RGB_MATRIX_TEST_LED_FLAGS
();

16 i‡(
	`HAS_FLAGS
(
g_Àd_c⁄fig
.
Êags
[
i
], 
LED_FLAG_MODIFIER
)) {

17 
	`rgb_m©rix_£t_cﬁ‹
(
i
, 
rgb2
.
r
,Ñgb2.
g
,Ñgb2.
b
);

19 
	`rgb_m©rix_£t_cﬁ‹
(
i
, 
rgb1
.
r
,Ñgb1.
g
,Ñgb1.
b
);

22  
Àd_max
 < 
DRIVER_LED_TOTAL
;

23 
	}
}

	@rgb_matrix_animations/breathing_anim.h

1 #i‚de‡
DISABLE_RGB_MATRIX_BREATHING


2 
	$RGB_MATRIX_EFFECT
(
BREATHING
)

3 #ifde‡
RGB_MATRIX_CUSTOM_EFFECT_IMPLS


5 
boﬁ
 
	$BREATHING
(
ef„˘_∑øms_t
* 
∑øms
) {

6 
	`RGB_MATRIX_USE_LIMITS
(
Àd_mö
, 
Àd_max
);

8 
HSV
 
hsv
 = 
rgb_m©rix_c⁄fig
.hsv;

9 
uöt16_t
 
time
 = 
	`sˇÀ16by8
(
g_rgb_timî
, 
rgb_m©rix_c⁄fig
.
•ìd
 / 8);

10 
hsv
.
v
 = 
	`sˇÀ8
(
	`abs8
(
	`sö8
(
time
) - 128) * 2, hsv.v);

11 
RGB
 
rgb
 = 
	`hsv_to_rgb
(
hsv
);

12 
uöt8_t
 
i
 = 
Àd_mö
; i < 
Àd_max
; i++) {

13 
	`RGB_MATRIX_TEST_LED_FLAGS
();

14 
	`rgb_m©rix_£t_cﬁ‹
(
i
, 
rgb
.
r
,Ñgb.
g
,Ñgb.
b
);

16  
Àd_max
 < 
DRIVER_LED_TOTAL
;

17 
	}
}

	@rgb_matrix_animations/colorband_pinwheel_sat_anim.h

1 #i‚de‡
DISABLE_RGB_MATRIX_BAND_PINWHEEL_SAT


2 
	$RGB_MATRIX_EFFECT
(
BAND_PINWHEEL_SAT
)

3 #ifde‡
RGB_MATRIX_CUSTOM_EFFECT_IMPLS


5 
HSV
 
	$BAND_PINWHEEL_SAT_m©h
(
HSV
 
hsv
, 
öt16_t
 
dx
, i¡16_à
dy
, 
uöt8_t
 
time
) {

6 
hsv
.
s
 = 
	`sˇÀ8
(hsv.†- 
time
 - 
	`©™2_8
(
dy
, 
dx
) * 3, hsv.s);

7  
hsv
;

8 
	}
}

10 
boﬁ
 
	$BAND_PINWHEEL_SAT
(
ef„˘_∑øms_t
* 
∑øms
Ë{  
	`ef„˘_ru¬î_dx_dy
’¨ams, &
BAND_PINWHEEL_SAT_m©h
); 
	}
}

	@rgb_matrix_animations/colorband_pinwheel_val_anim.h

1 #i‚de‡
DISABLE_RGB_MATRIX_BAND_PINWHEEL_VAL


2 
	$RGB_MATRIX_EFFECT
(
BAND_PINWHEEL_VAL
)

3 #ifde‡
RGB_MATRIX_CUSTOM_EFFECT_IMPLS


5 
HSV
 
	$BAND_PINWHEEL_VAL_m©h
(
HSV
 
hsv
, 
öt16_t
 
dx
, i¡16_à
dy
, 
uöt8_t
 
time
) {

6 
hsv
.
v
 = 
	`sˇÀ8
(hsv.v - 
time
 - 
	`©™2_8
(
dy
, 
dx
) * 3, hsv.v);

7  
hsv
;

8 
	}
}

10 
boﬁ
 
	$BAND_PINWHEEL_VAL
(
ef„˘_∑øms_t
* 
∑øms
Ë{  
	`ef„˘_ru¬î_dx_dy
’¨ams, &
BAND_PINWHEEL_VAL_m©h
); 
	}
}

	@rgb_matrix_animations/colorband_sat_anim.h

1 #i‚de‡
DISABLE_RGB_MATRIX_BAND_SAT


2 
	$RGB_MATRIX_EFFECT
(
BAND_SAT
)

3 #ifde‡
RGB_MATRIX_CUSTOM_EFFECT_IMPLS


5 
HSV
 
	$BAND_SAT_m©h
(
HSV
 
hsv
, 
uöt8_t
 
i
, uöt8_à
time
) {

6 
öt16_t
 
s
 = 
hsv
.†- 
	`abs
(
	`sˇÀ8
(
g_Àd_c⁄fig
.
poöt
[
i
].
x
, 228Ë+ 28 - 
time
) * 8;

7 
hsv
.
s
 = 
	`sˇÀ8
(s < 0 ? 0 : s, hsv.s);

8  
hsv
;

9 
	}
}

11 
boﬁ
 
	$BAND_SAT
(
ef„˘_∑øms_t
* 
∑øms
Ë{  
	`ef„˘_ru¬î_i
’¨ams, &
BAND_SAT_m©h
); 
	}
}

	@rgb_matrix_animations/colorband_spiral_sat_anim.h

1 #i‚de‡
DISABLE_RGB_MATRIX_BAND_SPIRAL_SAT


2 
	$RGB_MATRIX_EFFECT
(
BAND_SPIRAL_SAT
)

3 #ifde‡
RGB_MATRIX_CUSTOM_EFFECT_IMPLS


5 
HSV
 
	$BAND_SPIRAL_SAT_m©h
(
HSV
 
hsv
, 
öt16_t
 
dx
, i¡16_à
dy
, 
uöt8_t
 
di°
, uöt8_à
time
) {

6 
hsv
.
s
 = 
	`sˇÀ8
(hsv.†+ 
di°
 - 
time
 - 
	`©™2_8
(
dy
, 
dx
), hsv.s);

7  
hsv
;

8 
	}
}

10 
boﬁ
 
	$BAND_SPIRAL_SAT
(
ef„˘_∑øms_t
* 
∑øms
Ë{  
	`ef„˘_ru¬î_dx_dy_di°
’¨ams, &
BAND_SPIRAL_SAT_m©h
); 
	}
}

	@rgb_matrix_animations/colorband_spiral_val_anim.h

1 #i‚de‡
DISABLE_RGB_MATRIX_BAND_SPIRAL_VAL


2 
	$RGB_MATRIX_EFFECT
(
BAND_SPIRAL_VAL
)

3 #ifde‡
RGB_MATRIX_CUSTOM_EFFECT_IMPLS


5 
HSV
 
	$BAND_SPIRAL_VAL_m©h
(
HSV
 
hsv
, 
öt16_t
 
dx
, i¡16_à
dy
, 
uöt8_t
 
di°
, uöt8_à
time
) {

6 
hsv
.
v
 = 
	`sˇÀ8
(hsv.v + 
di°
 - 
time
 - 
	`©™2_8
(
dy
, 
dx
), hsv.v);

7  
hsv
;

8 
	}
}

10 
boﬁ
 
	$BAND_SPIRAL_VAL
(
ef„˘_∑øms_t
* 
∑øms
Ë{  
	`ef„˘_ru¬î_dx_dy_di°
’¨ams, &
BAND_SPIRAL_VAL_m©h
); 
	}
}

	@rgb_matrix_animations/colorband_val_anim.h

1 #i‚de‡
DISABLE_RGB_MATRIX_BAND_VAL


2 
	$RGB_MATRIX_EFFECT
(
BAND_VAL
)

3 #ifde‡
RGB_MATRIX_CUSTOM_EFFECT_IMPLS


5 
HSV
 
	$BAND_VAL_m©h
(
HSV
 
hsv
, 
uöt8_t
 
i
, uöt8_à
time
) {

6 
öt16_t
 
v
 = 
hsv
.v - 
	`abs
(
	`sˇÀ8
(
g_Àd_c⁄fig
.
poöt
[
i
].
x
, 228Ë+ 28 - 
time
) * 8;

7 
hsv
.
v
 = 
	`sˇÀ8
(v < 0 ? 0 : v, hsv.v);

8  
hsv
;

9 
	}
}

11 
boﬁ
 
	$BAND_VAL
(
ef„˘_∑øms_t
* 
∑øms
Ë{  
	`ef„˘_ru¬î_i
’¨ams, &
BAND_VAL_m©h
); 
	}
}

	@rgb_matrix_animations/cycle_all_anim.h

1 #i‚de‡
DISABLE_RGB_MATRIX_CYCLE_ALL


2 
	$RGB_MATRIX_EFFECT
(
CYCLE_ALL
)

3 #ifde‡
RGB_MATRIX_CUSTOM_EFFECT_IMPLS


5 
HSV
 
	$CYCLE_ALL_m©h
(
HSV
 
hsv
, 
uöt8_t
 
i
, uöt8_à
time
) {

6 
hsv
.
h
 = 
time
;

7  
hsv
;

8 
	}
}

10 
boﬁ
 
	$CYCLE_ALL
(
ef„˘_∑øms_t
* 
∑øms
Ë{  
	`ef„˘_ru¬î_i
’¨ams, &
CYCLE_ALL_m©h
); 
	}
}

	@rgb_matrix_animations/cycle_left_right_anim.h

1 #i‚de‡
DISABLE_RGB_MATRIX_CYCLE_LEFT_RIGHT


2 
	$RGB_MATRIX_EFFECT
(
CYCLE_LEFT_RIGHT
)

3 #ifde‡
RGB_MATRIX_CUSTOM_EFFECT_IMPLS


5 
HSV
 
	$CYCLE_LEFT_RIGHT_m©h
(
HSV
 
hsv
, 
uöt8_t
 
i
, uöt8_à
time
) {

6 
hsv
.
h
 = 
g_Àd_c⁄fig
.
poöt
[
i
].
x
 - 
time
;

7  
hsv
;

8 
	}
}

10 
boﬁ
 
	$CYCLE_LEFT_RIGHT
(
ef„˘_∑øms_t
* 
∑øms
Ë{  
	`ef„˘_ru¬î_i
’¨ams, &
CYCLE_LEFT_RIGHT_m©h
); 
	}
}

	@rgb_matrix_animations/cycle_out_in_anim.h

1 #i‚de‡
DISABLE_RGB_MATRIX_CYCLE_OUT_IN


2 
	$RGB_MATRIX_EFFECT
(
CYCLE_OUT_IN
)

3 #ifde‡
RGB_MATRIX_CUSTOM_EFFECT_IMPLS


5 
HSV
 
	$CYCLE_OUT_IN_m©h
(
HSV
 
hsv
, 
öt16_t
 
dx
, i¡16_à
dy
, 
uöt8_t
 
di°
, uöt8_à
time
) {

6 
hsv
.
h
 = 3 * 
di°
 / 2 + 
time
;

7  
hsv
;

8 
	}
}

10 
boﬁ
 
	$CYCLE_OUT_IN
(
ef„˘_∑øms_t
* 
∑øms
Ë{  
	`ef„˘_ru¬î_dx_dy_di°
’¨ams, &
CYCLE_OUT_IN_m©h
); 
	}
}

	@rgb_matrix_animations/cycle_out_in_dual_anim.h

1 #i‚de‡
DISABLE_RGB_MATRIX_CYCLE_OUT_IN_DUAL


2 
	$RGB_MATRIX_EFFECT
(
CYCLE_OUT_IN_DUAL
)

3 #ifde‡
RGB_MATRIX_CUSTOM_EFFECT_IMPLS


5 
HSV
 
	$CYCLE_OUT_IN_DUAL_m©h
(
HSV
 
hsv
, 
öt16_t
 
dx
, i¡16_à
dy
, 
uöt8_t
 
time
) {

6 
dx
 = (
k_rgb_m©rix_˚¡î
.
x
 / 2Ë- 
	`abs8
(dx);

7 
uöt8_t
 
di°
 = 
	`sqπ16
(
dx
 * dx + 
dy
 * dy);

8 
hsv
.
h
 = 3 * 
di°
 + 
time
;

9  
hsv
;

10 
	}
}

12 
boﬁ
 
	$CYCLE_OUT_IN_DUAL
(
ef„˘_∑øms_t
* 
∑øms
Ë{  
	`ef„˘_ru¬î_dx_dy
’¨ams, &
CYCLE_OUT_IN_DUAL_m©h
); 
	}
}

	@rgb_matrix_animations/cycle_pinwheel_anim.h

1 #i‚de‡
DISABLE_RGB_MATRIX_CYCLE_PINWHEEL


2 
	$RGB_MATRIX_EFFECT
(
CYCLE_PINWHEEL
)

3 #ifde‡
RGB_MATRIX_CUSTOM_EFFECT_IMPLS


5 
HSV
 
	$CYCLE_PINWHEEL_m©h
(
HSV
 
hsv
, 
öt16_t
 
dx
, i¡16_à
dy
, 
uöt8_t
 
time
) {

6 
hsv
.
h
 = 
	`©™2_8
(
dy
, 
dx
Ë+ 
time
;

7  
hsv
;

8 
	}
}

10 
boﬁ
 
	$CYCLE_PINWHEEL
(
ef„˘_∑øms_t
* 
∑øms
Ë{  
	`ef„˘_ru¬î_dx_dy
’¨ams, &
CYCLE_PINWHEEL_m©h
); 
	}
}

	@rgb_matrix_animations/cycle_spiral_anim.h

1 #i‚de‡
DISABLE_RGB_MATRIX_CYCLE_SPIRAL


2 
	$RGB_MATRIX_EFFECT
(
CYCLE_SPIRAL
)

3 #ifde‡
RGB_MATRIX_CUSTOM_EFFECT_IMPLS


5 
HSV
 
	$CYCLE_SPIRAL_m©h
(
HSV
 
hsv
, 
öt16_t
 
dx
, i¡16_à
dy
, 
uöt8_t
 
di°
, uöt8_à
time
) {

6 
hsv
.
h
 = 
di°
 - 
time
 - 
	`©™2_8
(
dy
, 
dx
);

7  
hsv
;

8 
	}
}

10 
boﬁ
 
	$CYCLE_SPIRAL
(
ef„˘_∑øms_t
* 
∑øms
Ë{  
	`ef„˘_ru¬î_dx_dy_di°
’¨ams, &
CYCLE_SPIRAL_m©h
); 
	}
}

	@rgb_matrix_animations/cycle_up_down_anim.h

1 #i‚de‡
DISABLE_RGB_MATRIX_CYCLE_UP_DOWN


2 
	$RGB_MATRIX_EFFECT
(
CYCLE_UP_DOWN
)

3 #ifde‡
RGB_MATRIX_CUSTOM_EFFECT_IMPLS


5 
HSV
 
	$CYCLE_UP_DOWN_m©h
(
HSV
 
hsv
, 
uöt8_t
 
i
, uöt8_à
time
) {

6 
hsv
.
h
 = 
g_Àd_c⁄fig
.
poöt
[
i
].
y
 - 
time
;

7  
hsv
;

8 
	}
}

10 
boﬁ
 
	$CYCLE_UP_DOWN
(
ef„˘_∑øms_t
* 
∑øms
Ë{  
	`ef„˘_ru¬î_i
’¨ams, &
CYCLE_UP_DOWN_m©h
); 
	}
}

	@rgb_matrix_animations/digital_rain_anim.h

1 #i‡
deföed
(
RGB_MATRIX_FRAMEBUFFER_EFFECTS
Ë&& !deföed(
DISABLE_RGB_MATRIX_DIGITAL_RAIN
)

2 
	$RGB_MATRIX_EFFECT
(
DIGITAL_RAIN
)

3 #ifde‡
RGB_MATRIX_CUSTOM_EFFECT_IMPLS


5 #i‚de‡
RGB_DIGITAL_RAIN_DROPS


7 
	#RGB_DIGITAL_RAIN_DROPS
 24

	)

10 
boﬁ
 
	$DIGITAL_RAIN
(
ef„˘_∑øms_t
* 
∑øms
) {

12 c⁄° 
uöt8_t
 
dr›_ticks
 = 28;

13 c⁄° 
uöt8_t
 
puª_gªí_öãnsôy
 = 0xd0;

14 c⁄° 
uöt8_t
 
max_brighäess_boo°
 = 0xc0;

15 c⁄° 
uöt8_t
 
max_öãnsôy
 = 0xff;

17 
uöt8_t
 
dr›
 = 0;

19 i‡(
∑øms
->
öô
) {

20 
	`rgb_m©rix_£t_cﬁ‹_Æl
(0, 0, 0);

21 
	`mem£t
(
g_rgb_‰ame_buf„r
, 0, (g_rgb_frame_buffer));

22 
dr›
 = 0;

25 
uöt8_t
 
cﬁ
 = 0; cﬁ < 
MATRIX_COLS
; col++) {

26 
uöt8_t
 
row
 = 0;Ñow < 
MATRIX_ROWS
;Ñow++) {

27 i‡(
row
 =0 && 
dr›
 =0 && 
	`ønd
(Ë< 
RAND_MAX
 / 
RGB_DIGITAL_RAIN_DROPS
) {

30 
g_rgb_‰ame_buf„r
[
row
][
cﬁ
] = 
max_öãnsôy
;

31 } i‡(
g_rgb_‰ame_buf„r
[
row
][
cﬁ
] > 0 && g_rgb_‰ame_buf„r[row][cﬁ] < 
max_öãnsôy
) {

33 
g_rgb_‰ame_buf„r
[
row
][
cﬁ
]--;

36 
uöt8_t
 
Àd
[
LED_HITS_TO_REMEMBER
];

37 
uöt8_t
 
Àd_cou¡
 = 
	`rgb_m©rix_m≠_row_cﬁumn_to_Àd
(
row
, 
cﬁ
, 
Àd
);

40 i‡(
Àd_cou¡
 > 0) {

41 i‡(
g_rgb_‰ame_buf„r
[
row
][
cﬁ
] > 
puª_gªí_öãnsôy
) {

42 c⁄° 
uöt8_t
 
boo°
 = (uöt8_t)((
uöt16_t
)
max_brighäess_boo°
 * (
g_rgb_‰ame_buf„r
[
row
][
cﬁ
] - 
puª_gªí_öãnsôy
Ë/ (
max_öãnsôy
 -Öure_green_intensity));

43 
	`rgb_m©rix_£t_cﬁ‹
(
Àd
[0], 
boo°
, 
max_öãnsôy
, boost);

45 c⁄° 
uöt8_t
 
gªí
 = (uöt8_t)((
uöt16_t
)
max_öãnsôy
 * 
g_rgb_‰ame_buf„r
[
row
][
cﬁ
] / 
puª_gªí_öãnsôy
);

46 
	`rgb_m©rix_£t_cﬁ‹
(
Àd
[0], 0, 
gªí
, 0);

52 i‡(++
dr›
 > 
dr›_ticks
) {

54 
dr›
 = 0;

55 
uöt8_t
 
row
 = 
MATRIX_ROWS
 - 1;Ñow > 0;Ñow--) {

56 
uöt8_t
 
cﬁ
 = 0; cﬁ < 
MATRIX_COLS
; col++) {

58 i‡(
row
 =
MATRIX_ROWS
 - 1 && 
g_rgb_‰ame_buf„r
[row][
cﬁ
] =
max_öãnsôy
) {

59 
g_rgb_‰ame_buf„r
[
row
][
cﬁ
]--;

62 i‡(
g_rgb_‰ame_buf„r
[
row
 - 1][
cﬁ
] =
max_öãnsôy
) {

64 
g_rgb_‰ame_buf„r
[
row
 - 1][
cﬁ
]--;

66 
g_rgb_‰ame_buf„r
[
row
][
cﬁ
] = 
max_öãnsôy
;

71  
Ál£
;

72 
	}
}

	@rgb_matrix_animations/dual_beacon_anim.h

1 #i‚de‡
DISABLE_RGB_MATRIX_DUAL_BEACON


2 
	$RGB_MATRIX_EFFECT
(
DUAL_BEACON
)

3 #ifde‡
RGB_MATRIX_CUSTOM_EFFECT_IMPLS


5 
HSV
 
	$DUAL_BEACON_m©h
(
HSV
 
hsv
, 
öt8_t
 
sö
, i¡8_à
cos
, 
uöt8_t
 
i
, uöt8_à
time
) {

6 
hsv
.
h
 +((
g_Àd_c⁄fig
.
poöt
[
i
].
y
 - 
k_rgb_m©rix_˚¡î
.yË* 
cos
 + (g_Àd_c⁄fig.poöt[i].
x
 - k_rgb_m©rix_˚¡î.xË* 
sö
) / 128;

7  
hsv
;

8 
	}
}

10 
boﬁ
 
	$DUAL_BEACON
(
ef„˘_∑øms_t
* 
∑øms
Ë{  
	`ef„˘_ru¬î_sö_cos_i
’¨ams, &
DUAL_BEACON_m©h
); 
	}
}

	@rgb_matrix_animations/gradient_left_right_anim.h

1 #i‚de‡
DISABLE_RGB_MATRIX_GRADIENT_LEFT_RIGHT


2 
	$RGB_MATRIX_EFFECT
(
GRADIENT_LEFT_RIGHT
)

3 #ifde‡
RGB_MATRIX_CUSTOM_EFFECT_IMPLS


5 
boﬁ
 
	$GRADIENT_LEFT_RIGHT
(
ef„˘_∑øms_t
* 
∑øms
) {

6 
	`RGB_MATRIX_USE_LIMITS
(
Àd_mö
, 
Àd_max
);

8 
HSV
 
hsv
 = 
rgb_m©rix_c⁄fig
.hsv;

9 
uöt8_t
 
sˇÀ
 = 
	`sˇÀ8
(64, 
rgb_m©rix_c⁄fig
.
•ìd
);

10 
uöt8_t
 
i
 = 
Àd_mö
; i < 
Àd_max
; i++) {

11 
	`RGB_MATRIX_TEST_LED_FLAGS
();

14 
hsv
.
h
 = 
rgb_m©rix_c⁄fig
.hsv.h + (
sˇÀ
 * 
g_Àd_c⁄fig
.
poöt
[
i
].
x
 >> 5);

15 
RGB
 
rgb
 = 
	`hsv_to_rgb
(
hsv
);

16 
	`rgb_m©rix_£t_cﬁ‹
(
i
, 
rgb
.
r
,Ñgb.
g
,Ñgb.
b
);

18  
Àd_max
 < 
DRIVER_LED_TOTAL
;

19 
	}
}

	@rgb_matrix_animations/gradient_up_down_anim.h

1 #i‚de‡
DISABLE_RGB_MATRIX_GRADIENT_UP_DOWN


2 
	$RGB_MATRIX_EFFECT
(
GRADIENT_UP_DOWN
)

3 #ifde‡
RGB_MATRIX_CUSTOM_EFFECT_IMPLS


5 
boﬁ
 
	$GRADIENT_UP_DOWN
(
ef„˘_∑øms_t
* 
∑øms
) {

6 
	`RGB_MATRIX_USE_LIMITS
(
Àd_mö
, 
Àd_max
);

8 
HSV
 
hsv
 = 
rgb_m©rix_c⁄fig
.hsv;

9 
uöt8_t
 
sˇÀ
 = 
	`sˇÀ8
(64, 
rgb_m©rix_c⁄fig
.
•ìd
);

10 
uöt8_t
 
i
 = 
Àd_mö
; i < 
Àd_max
; i++) {

11 
	`RGB_MATRIX_TEST_LED_FLAGS
();

14 
hsv
.
h
 = 
rgb_m©rix_c⁄fig
.hsv.h + 
sˇÀ
 * (
g_Àd_c⁄fig
.
poöt
[
i
].
y
 >> 4);

15 
RGB
 
rgb
 = 
	`hsv_to_rgb
(
hsv
);

16 
	`rgb_m©rix_£t_cﬁ‹
(
i
, 
rgb
.
r
,Ñgb.
g
,Ñgb.
b
);

18  
Àd_max
 < 
DRIVER_LED_TOTAL
;

19 
	}
}

	@rgb_matrix_animations/jellybean_raindrops_anim.h

1 #i‚de‡
DISABLE_RGB_MATRIX_JELLYBEAN_RAINDROPS


2 
	$RGB_MATRIX_EFFECT
(
JELLYBEAN_RAINDROPS
)

3 #ifde‡
RGB_MATRIX_CUSTOM_EFFECT_IMPLS


5 
	$jñlybón_øödr›s_£t_cﬁ‹
(
i
, 
ef„˘_∑øms_t
* 
∑øms
) {

6 i‡(!
	`HAS_ANY_FLAGS
(
g_Àd_c⁄fig
.
Êags
[
i
], 
∑øms
->flags)) ;

7 
HSV
 
hsv
 = {
	`ønd
(Ë& 0xFF,Ñ™d(Ë& 0xFF, 
rgb_m©rix_c⁄fig
.hsv.
v
};

8 
RGB
 
rgb
 = 
	`hsv_to_rgb
(
hsv
);

9 
	`rgb_m©rix_£t_cﬁ‹
(
i
, 
rgb
.
r
,Ñgb.
g
,Ñgb.
b
);

10 
	}
}

12 
boﬁ
 
	$JELLYBEAN_RAINDROPS
(
ef„˘_∑øms_t
* 
∑øms
) {

13 i‡(!
∑øms
->
öô
) {

15 i‡(
	`sˇÀ16by8
(
g_rgb_timî
, 
	`qadd8
(
rgb_m©rix_c⁄fig
.
•ìd
, 16)) % 5 == 0) {

16 
	`jñlybón_øödr›s_£t_cﬁ‹
(
	`ønd
(Ë% 
DRIVER_LED_TOTAL
, 
∑øms
);

18  
Ál£
;

21 
	`RGB_MATRIX_USE_LIMITS
(
Àd_mö
, 
Àd_max
);

22 
i
 = 
Àd_mö
; i < 
Àd_max
; i++) {

23 
	`jñlybón_øödr›s_£t_cﬁ‹
(
i
, 
∑øms
);

25  
Àd_max
 < 
DRIVER_LED_TOTAL
;

26 
	}
}

	@rgb_matrix_animations/rainbow_beacon_anim.h

1 #i‚de‡
DISABLE_RGB_MATRIX_RAINBOW_BEACON


2 
	$RGB_MATRIX_EFFECT
(
RAINBOW_BEACON
)

3 #ifde‡
RGB_MATRIX_CUSTOM_EFFECT_IMPLS


5 
HSV
 
	$RAINBOW_BEACON_m©h
(
HSV
 
hsv
, 
öt8_t
 
sö
, i¡8_à
cos
, 
uöt8_t
 
i
, uöt8_à
time
) {

6 
hsv
.
h
 +((
g_Àd_c⁄fig
.
poöt
[
i
].
y
 - 
k_rgb_m©rix_˚¡î
.yË* 2 * 
cos
 + (g_Àd_c⁄fig.poöt[i].
x
 - k_rgb_m©rix_˚¡î.xË* 2 * 
sö
) / 128;

7  
hsv
;

8 
	}
}

10 
boﬁ
 
	$RAINBOW_BEACON
(
ef„˘_∑øms_t
* 
∑øms
Ë{  
	`ef„˘_ru¬î_sö_cos_i
’¨ams, &
RAINBOW_BEACON_m©h
); 
	}
}

	@rgb_matrix_animations/rainbow_moving_chevron_anim.h

1 #i‚de‡
DISABLE_RGB_MATRIX_RAINBOW_MOVING_CHEVRON


2 
	$RGB_MATRIX_EFFECT
(
RAINBOW_MOVING_CHEVRON
)

3 #ifde‡
RGB_MATRIX_CUSTOM_EFFECT_IMPLS


5 
HSV
 
	$RAINBOW_MOVING_CHEVRON_m©h
(
HSV
 
hsv
, 
uöt8_t
 
i
, uöt8_à
time
) {

6 
hsv
.
h
 +
	`abs8
(
g_Àd_c⁄fig
.
poöt
[
i
].
y
 - 
k_rgb_m©rix_˚¡î
.yË+ (g_Àd_c⁄fig.poöt[i].
x
 - 
time
);

7  
hsv
;

8 
	}
}

10 
boﬁ
 
	$RAINBOW_MOVING_CHEVRON
(
ef„˘_∑øms_t
* 
∑øms
Ë{  
	`ef„˘_ru¬î_i
’¨ams, &
RAINBOW_MOVING_CHEVRON_m©h
); 
	}
}

	@rgb_matrix_animations/rainbow_pinwheels_anim.h

1 #i‚de‡
DISABLE_RGB_MATRIX_RAINBOW_PINWHEELS


2 
	$RGB_MATRIX_EFFECT
(
RAINBOW_PINWHEELS
)

3 #ifde‡
RGB_MATRIX_CUSTOM_EFFECT_IMPLS


5 
HSV
 
	$RAINBOW_PINWHEELS_m©h
(
HSV
 
hsv
, 
öt8_t
 
sö
, i¡8_à
cos
, 
uöt8_t
 
i
, uöt8_à
time
) {

6 
hsv
.
h
 +((
g_Àd_c⁄fig
.
poöt
[
i
].
y
 - 
k_rgb_m©rix_˚¡î
.yË* 3 * 
cos
 + (56 - 
	`abs8
(g_Àd_c⁄fig.poöt[i].
x
 - k_rgb_m©rix_˚¡î.x)Ë* 3 * 
sö
) / 128;

7  
hsv
;

8 
	}
}

10 
boﬁ
 
	$RAINBOW_PINWHEELS
(
ef„˘_∑øms_t
* 
∑øms
Ë{  
	`ef„˘_ru¬î_sö_cos_i
’¨ams, &
RAINBOW_PINWHEELS_m©h
); 
	}
}

	@rgb_matrix_animations/raindrops_anim.h

1 #i‚de‡
DISABLE_RGB_MATRIX_RAINDROPS


2 
	$RGB_MATRIX_EFFECT
(
RAINDROPS
)

3 #ifde‡
RGB_MATRIX_CUSTOM_EFFECT_IMPLS


5 
	$øödr›s_£t_cﬁ‹
(
i
, 
ef„˘_∑øms_t
* 
∑øms
) {

6 i‡(!
	`HAS_ANY_FLAGS
(
g_Àd_c⁄fig
.
Êags
[
i
], 
∑øms
->flags)) ;

7 
HSV
 
hsv
 = {0, 
rgb_m©rix_c⁄fig
.hsv.
s
,Ñgb_m©rix_c⁄fig.hsv.
v
};

10 
öt16_t
 
dñèH
 = ((
rgb_m©rix_c⁄fig
.
hsv
.
h
 + 180) % 360 -Ñgb_matrix_config.hsv.h) / 4;

11 i‡(
dñèH
 > 127) {

12 
dñèH
 -= 256;

13 } i‡(
dñèH
 < -127) {

14 
dñèH
 += 256;

17 
hsv
.
h
 = 
rgb_m©rix_c⁄fig
.hsv.h + (
dñèH
 * (
	`ønd
() & 0x03));

18 
RGB
 
rgb
 = 
	`hsv_to_rgb
(
hsv
);

19 
	`rgb_m©rix_£t_cﬁ‹
(
i
, 
rgb
.
r
,Ñgb.
g
,Ñgb.
b
);

20 
	}
}

22 
boﬁ
 
	$RAINDROPS
(
ef„˘_∑øms_t
* 
∑øms
) {

23 i‡(!
∑øms
->
öô
) {

25 i‡(
	`sˇÀ16by8
(
g_rgb_timî
, 
	`qadd8
(
rgb_m©rix_c⁄fig
.
•ìd
, 16)) % 10 == 0) {

26 
	`øödr›s_£t_cﬁ‹
(
	`ønd
(Ë% 
DRIVER_LED_TOTAL
, 
∑øms
);

28  
Ál£
;

31 
	`RGB_MATRIX_USE_LIMITS
(
Àd_mö
, 
Àd_max
);

32 
i
 = 
Àd_mö
; i < 
Àd_max
; i++) {

33 
	`øödr›s_£t_cﬁ‹
(
i
, 
∑øms
);

35  
Àd_max
 < 
DRIVER_LED_TOTAL
;

36 
	}
}

	@rgb_matrix_animations/solid_color_anim.h

1 
	$RGB_MATRIX_EFFECT
(
SOLID_COLOR
)

2 #ifde‡
RGB_MATRIX_CUSTOM_EFFECT_IMPLS


4 
boﬁ
 
	$SOLID_COLOR
(
ef„˘_∑øms_t
* 
∑øms
) {

5 
	`RGB_MATRIX_USE_LIMITS
(
Àd_mö
, 
Àd_max
);

7 
RGB
 
rgb
 = 
	`hsv_to_rgb
(
rgb_m©rix_c⁄fig
.
hsv
);

8 
uöt8_t
 
i
 = 
Àd_mö
; i < 
Àd_max
; i++) {

9 
	`RGB_MATRIX_TEST_LED_FLAGS
();

10 
	`rgb_m©rix_£t_cﬁ‹
(
i
, 
rgb
.
r
,Ñgb.
g
,Ñgb.
b
);

12  
Àd_max
 < 
DRIVER_LED_TOTAL
;

13 
	}
}

	@rgb_matrix_animations/solid_reactive_anim.h

1 #ifde‡
RGB_MATRIX_KEYREACTIVE_ENABLED


2 #i‚de‡
DISABLE_RGB_MATRIX_SOLID_REACTIVE


3 
	$RGB_MATRIX_EFFECT
(
SOLID_REACTIVE
)

4 #ifde‡
RGB_MATRIX_CUSTOM_EFFECT_IMPLS


6 
HSV
 
	$SOLID_REACTIVE_m©h
(
HSV
 
hsv
, 
uöt16_t
 
off£t
) {

7 
hsv
.
h
 +
	`qsub8
(130, 
off£t
);

8  
hsv
;

9 
	}
}

11 
boﬁ
 
	$SOLID_REACTIVE
(
ef„˘_∑øms_t
* 
∑øms
Ë{  
	`ef„˘_ru¬î_ªa˘ive
’¨ams, &
SOLID_REACTIVE_m©h
); 
	}
}

	@rgb_matrix_animations/solid_reactive_cross.h

1 #ifde‡
RGB_MATRIX_KEYREACTIVE_ENABLED


2 #i‡!
deföed
(
DISABLE_RGB_MATRIX_SOLID_REACTIVE_CROSS
Ë|| !deföed(
DISABLE_RGB_MATRIX_SOLID_REACTIVE_MULTICROSS
)

4 #i‚de‡
DISABLE_RGB_MATRIX_SOLID_REACTIVE_CROSS


5 
	$RGB_MATRIX_EFFECT
(
SOLID_REACTIVE_CROSS
)

8 #i‚de‡
DISABLE_RGB_MATRIX_SOLID_REACTIVE_MULTICROSS


9 
	$RGB_MATRIX_EFFECT
(
SOLID_REACTIVE_MULTICROSS
)

12 #ifde‡
RGB_MATRIX_CUSTOM_EFFECT_IMPLS


14 
HSV
 
	$SOLID_REACTIVE_CROSS_m©h
(
HSV
 
hsv
, 
öt16_t
 
dx
, i¡16_à
dy
, 
uöt8_t
 
di°
, 
uöt16_t
 
tick
) {

15 
uöt16_t
 
ef„˘
 = 
tick
 + 
di°
;

16 
dx
 = dx < 0 ? dx * -1 : dx;

17 
dy
 = dy < 0 ? dy * -1 : dy;

18 
dx
 = dx * 16 > 255 ? 255 : dx * 16;

19 
dy
 = dy * 16 > 255 ? 255 : dy * 16;

20 
ef„˘
 +
dx
 > 
dy
 ? dy : dx;

21 i‡(
ef„˘
 > 255)Éffect = 255;

22 
hsv
.
v
 = 
	`qadd8
(hsv.v, 255 - 
ef„˘
);

23  
hsv
;

24 
	}
}

26 #i‚de‡
DISABLE_RGB_MATRIX_SOLID_REACTIVE_CROSS


27 
boﬁ
 
	$SOLID_REACTIVE_CROSS
(
ef„˘_∑øms_t
* 
∑øms
Ë{  
	`ef„˘_ru¬î_ªa˘ive_•œsh
(
	`qsub8
(
g_œ°_hô_åackî
.
cou¡
, 1),Ö¨ams, &
SOLID_REACTIVE_CROSS_m©h
); 
	}
}

30 #i‚de‡
DISABLE_RGB_MATRIX_SOLID_REACTIVE_MULTICROSS


31 
boﬁ
 
	$SOLID_REACTIVE_MULTICROSS
(
ef„˘_∑øms_t
* 
∑øms
Ë{  
	`ef„˘_ru¬î_ªa˘ive_•œsh
(0,Ö¨ams, &
SOLID_REACTIVE_CROSS_m©h
); 
	}
}

	@rgb_matrix_animations/solid_reactive_nexus.h

1 #ifde‡
RGB_MATRIX_KEYREACTIVE_ENABLED


2 #i‡!
deföed
(
DISABLE_RGB_MATRIX_SOLID_REACTIVE_NEXUS
Ë|| !deföed(
DISABLE_RGB_MATRIX_SOLID_REACTIVE_MULTINEXUS
)

4 #i‚de‡
DISABLE_RGB_MATRIX_SOLID_REACTIVE_NEXUS


5 
	$RGB_MATRIX_EFFECT
(
SOLID_REACTIVE_NEXUS
)

8 #i‚de‡
DISABLE_RGB_MATRIX_SOLID_REACTIVE_MULTINEXUS


9 
	$RGB_MATRIX_EFFECT
(
SOLID_REACTIVE_MULTINEXUS
)

12 #ifde‡
RGB_MATRIX_CUSTOM_EFFECT_IMPLS


14 
HSV
 
	$SOLID_REACTIVE_NEXUS_m©h
(
HSV
 
hsv
, 
öt16_t
 
dx
, i¡16_à
dy
, 
uöt8_t
 
di°
, 
uöt16_t
 
tick
) {

15 
uöt16_t
 
ef„˘
 = 
tick
 - 
di°
;

16 i‡(
ef„˘
 > 255)Éffect = 255;

17 i‡(
di°
 > 72Ë
ef„˘
 = 255;

18 i‡((
dx
 > 8 || dx < -8Ë&& (
dy
 > 8 || dy < -8)Ë
ef„˘
 = 255;

19 
hsv
.
v
 = 
	`qadd8
(hsv.v, 255 - 
ef„˘
);

20 
hsv
.
h
 = 
rgb_m©rix_c⁄fig
.hsv.h + 
dy
 / 4;

21  
hsv
;

22 
	}
}

24 #i‚de‡
DISABLE_RGB_MATRIX_SOLID_REACTIVE_NEXUS


25 
boﬁ
 
	$SOLID_REACTIVE_NEXUS
(
ef„˘_∑øms_t
* 
∑øms
Ë{  
	`ef„˘_ru¬î_ªa˘ive_•œsh
(
	`qsub8
(
g_œ°_hô_åackî
.
cou¡
, 1),Ö¨ams, &
SOLID_REACTIVE_NEXUS_m©h
); 
	}
}

28 #i‚de‡
DISABLE_RGB_MATRIX_SOLID_REACTIVE_MULTINEXUS


29 
boﬁ
 
	$SOLID_REACTIVE_MULTINEXUS
(
ef„˘_∑øms_t
* 
∑øms
Ë{  
	`ef„˘_ru¬î_ªa˘ive_•œsh
(0,Ö¨ams, &
SOLID_REACTIVE_NEXUS_m©h
); 
	}
}

	@rgb_matrix_animations/solid_reactive_simple_anim.h

1 #ifde‡
RGB_MATRIX_KEYREACTIVE_ENABLED


2 #i‚de‡
DISABLE_RGB_MATRIX_SOLID_REACTIVE_SIMPLE


3 
	$RGB_MATRIX_EFFECT
(
SOLID_REACTIVE_SIMPLE
)

4 #ifde‡
RGB_MATRIX_CUSTOM_EFFECT_IMPLS


6 
HSV
 
	$SOLID_REACTIVE_SIMPLE_m©h
(
HSV
 
hsv
, 
uöt16_t
 
off£t
) {

7 
hsv
.
v
 = 
	`sˇÀ8
(255 - 
off£t
, hsv.v);

8  
hsv
;

9 
	}
}

11 
boﬁ
 
	$SOLID_REACTIVE_SIMPLE
(
ef„˘_∑øms_t
* 
∑øms
Ë{  
	`ef„˘_ru¬î_ªa˘ive
’¨ams, &
SOLID_REACTIVE_SIMPLE_m©h
); 
	}
}

	@rgb_matrix_animations/solid_reactive_wide.h

1 #ifde‡
RGB_MATRIX_KEYREACTIVE_ENABLED


2 #i‡!
deföed
(
DISABLE_RGB_MATRIX_SOLID_REACTIVE_WIDE
Ë|| !deföed(
DISABLE_RGB_MATRIX_SOLID_REACTIVE_MULTIWIDE
)

4 #i‚de‡
DISABLE_RGB_MATRIX_SOLID_REACTIVE_WIDE


5 
	$RGB_MATRIX_EFFECT
(
SOLID_REACTIVE_WIDE
)

8 #i‚de‡
DISABLE_RGB_MATRIX_SOLID_REACTIVE_MULTIWIDE


9 
	$RGB_MATRIX_EFFECT
(
SOLID_REACTIVE_MULTIWIDE
)

12 #ifde‡
RGB_MATRIX_CUSTOM_EFFECT_IMPLS


14 
HSV
 
	$SOLID_REACTIVE_WIDE_m©h
(
HSV
 
hsv
, 
öt16_t
 
dx
, i¡16_à
dy
, 
uöt8_t
 
di°
, 
uöt16_t
 
tick
) {

15 
uöt16_t
 
ef„˘
 = 
tick
 + 
di°
 * 5;

16 i‡(
ef„˘
 > 255)Éffect = 255;

17 
hsv
.
v
 = 
	`qadd8
(hsv.v, 255 - 
ef„˘
);

18  
hsv
;

19 
	}
}

21 #i‚de‡
DISABLE_RGB_MATRIX_SOLID_REACTIVE_WIDE


22 
boﬁ
 
	$SOLID_REACTIVE_WIDE
(
ef„˘_∑øms_t
* 
∑øms
Ë{  
	`ef„˘_ru¬î_ªa˘ive_•œsh
(
	`qsub8
(
g_œ°_hô_åackî
.
cou¡
, 1),Ö¨ams, &
SOLID_REACTIVE_WIDE_m©h
); 
	}
}

25 #i‚de‡
DISABLE_RGB_MATRIX_SOLID_REACTIVE_MULTIWIDE


26 
boﬁ
 
	$SOLID_REACTIVE_MULTIWIDE
(
ef„˘_∑øms_t
* 
∑øms
Ë{  
	`ef„˘_ru¬î_ªa˘ive_•œsh
(0,Ö¨ams, &
SOLID_REACTIVE_WIDE_m©h
); 
	}
}

	@rgb_matrix_animations/solid_splash_anim.h

1 #ifde‡
RGB_MATRIX_KEYREACTIVE_ENABLED


2 #i‡!
deföed
(
DISABLE_RGB_MATRIX_SOLID_SPLASH
Ë|| !deföed(
DISABLE_RGB_MATRIX_SOLID_MULTISPLASH
)

4 #i‚de‡
DISABLE_RGB_MATRIX_SOLID_SPLASH


5 
	$RGB_MATRIX_EFFECT
(
SOLID_SPLASH
)

8 #i‚de‡
DISABLE_RGB_MATRIX_SOLID_MULTISPLASH


9 
	$RGB_MATRIX_EFFECT
(
SOLID_MULTISPLASH
)

12 #ifde‡
RGB_MATRIX_CUSTOM_EFFECT_IMPLS


14 
HSV
 
	$SOLID_SPLASH_m©h
(
HSV
 
hsv
, 
öt16_t
 
dx
, i¡16_à
dy
, 
uöt8_t
 
di°
, 
uöt16_t
 
tick
) {

15 
uöt16_t
 
ef„˘
 = 
tick
 - 
di°
;

16 i‡(
ef„˘
 > 255)Éffect = 255;

17 
hsv
.
v
 = 
	`qadd8
(hsv.v, 255 - 
ef„˘
);

18  
hsv
;

19 
	}
}

21 #i‚de‡
DISABLE_RGB_MATRIX_SOLID_SPLASH


22 
boﬁ
 
	$SOLID_SPLASH
(
ef„˘_∑øms_t
* 
∑øms
Ë{  
	`ef„˘_ru¬î_ªa˘ive_•œsh
(
	`qsub8
(
g_œ°_hô_åackî
.
cou¡
, 1),Ö¨ams, &
SOLID_SPLASH_m©h
); 
	}
}

25 #i‚de‡
DISABLE_RGB_MATRIX_SOLID_MULTISPLASH


26 
boﬁ
 
	$SOLID_MULTISPLASH
(
ef„˘_∑øms_t
* 
∑øms
Ë{  
	`ef„˘_ru¬î_ªa˘ive_•œsh
(0,Ö¨ams, &
SOLID_SPLASH_m©h
); 
	}
}

	@rgb_matrix_animations/splash_anim.h

1 #ifde‡
RGB_MATRIX_KEYREACTIVE_ENABLED


2 #i‡!
deföed
(
DISABLE_RGB_MATRIX_SPLASH
Ë|| !deföed(
DISABLE_RGB_MATRIX_MULTISPLASH
)

4 #i‚de‡
DISABLE_RGB_MATRIX_SPLASH


5 
	$RGB_MATRIX_EFFECT
(
SPLASH
)

8 #i‚de‡
DISABLE_RGB_MATRIX_MULTISPLASH


9 
	$RGB_MATRIX_EFFECT
(
MULTISPLASH
)

12 #ifde‡
RGB_MATRIX_CUSTOM_EFFECT_IMPLS


14 
HSV
 
	$SPLASH_m©h
(
HSV
 
hsv
, 
öt16_t
 
dx
, i¡16_à
dy
, 
uöt8_t
 
di°
, 
uöt16_t
 
tick
) {

15 
uöt16_t
 
ef„˘
 = 
tick
 - 
di°
;

16 i‡(
ef„˘
 > 255)Éffect = 255;

17 
hsv
.
h
 +
ef„˘
;

18 
hsv
.
v
 = 
	`qadd8
(hsv.v, 255 - 
ef„˘
);

19  
hsv
;

20 
	}
}

22 #i‚de‡
DISABLE_RGB_MATRIX_SPLASH


23 
boﬁ
 
	$SPLASH
(
ef„˘_∑øms_t
* 
∑øms
Ë{  
	`ef„˘_ru¬î_ªa˘ive_•œsh
(
	`qsub8
(
g_œ°_hô_åackî
.
cou¡
, 1),Ö¨ams, &
SPLASH_m©h
); 
	}
}

26 #i‚de‡
DISABLE_RGB_MATRIX_MULTISPLASH


27 
boﬁ
 
	$MULTISPLASH
(
ef„˘_∑øms_t
* 
∑øms
Ë{  
	`ef„˘_ru¬î_ªa˘ive_•œsh
(0,Ö¨ams, &
SPLASH_m©h
); 
	}
}

	@rgb_matrix_animations/typing_heatmap_anim.h

1 #i‡
deföed
(
RGB_MATRIX_FRAMEBUFFER_EFFECTS
Ë&& !deföed(
DISABLE_RGB_MATRIX_TYPING_HEATMAP
)

2 
	$RGB_MATRIX_EFFECT
(
TYPING_HEATMAP
)

3 #ifde‡
RGB_MATRIX_CUSTOM_EFFECT_IMPLS


5 
	$¥o˚ss_rgb_m©rix_typög_hótm≠
(
keyªc‹d_t
* 
ªc‹d
) {

6 
uöt8_t
 
row
 = 
ªc‹d
->
evít
.
key
.row;

7 
uöt8_t
 
cﬁ
 = 
ªc‹d
->
evít
.
key
.col;

8 
uöt8_t
 
m_row
 = 
row
 - 1;

9 
uöt8_t
 
p_row
 = 
row
 + 1;

10 
uöt8_t
 
m_cﬁ
 = 
cﬁ
 - 1;

11 
uöt8_t
 
p_cﬁ
 = 
cﬁ
 + 1;

13 i‡(
m_cﬁ
 < 
cﬁ
Ë
g_rgb_‰ame_buf„r
[
row
][m_cﬁ] = 
	`qadd8
(g_rgb_frame_buffer[row][m_col], 16);

14 
g_rgb_‰ame_buf„r
[
row
][
cﬁ
] = 
	`qadd8
(g_rgb_frame_buffer[row][col], 32);

15 i‡(
p_cﬁ
 < 
MATRIX_COLS
Ë
g_rgb_‰ame_buf„r
[
row
][p_cﬁ] = 
	`qadd8
(g_rgb_frame_buffer[row][p_col], 16);

17 i‡(
p_row
 < 
MATRIX_ROWS
) {

18 i‡(
m_cﬁ
 < 
cﬁ
Ë
g_rgb_‰ame_buf„r
[
p_row
][m_cﬁ] = 
	`qadd8
(g_rgb_frame_buffer[p_row][m_col], 13);

19 
g_rgb_‰ame_buf„r
[
p_row
][
cﬁ
] = 
	`qadd8
(g_rgb_frame_buffer[p_row][col], 16);

20 i‡(
p_cﬁ
 < 
MATRIX_COLS
Ë
g_rgb_‰ame_buf„r
[
p_row
][p_cﬁ] = 
	`qadd8
(g_rgb_frame_buffer[p_row][p_col], 13);

23 i‡(
m_row
 < 
row
) {

24 i‡(
m_cﬁ
 < 
cﬁ
Ë
g_rgb_‰ame_buf„r
[
m_row
][m_cﬁ] = 
	`qadd8
(g_rgb_frame_buffer[m_row][m_col], 13);

25 
g_rgb_‰ame_buf„r
[
m_row
][
cﬁ
] = 
	`qadd8
(g_rgb_frame_buffer[m_row][col], 16);

26 i‡(
p_cﬁ
 < 
MATRIX_COLS
Ë
g_rgb_‰ame_buf„r
[
m_row
][p_cﬁ] = 
	`qadd8
(g_rgb_frame_buffer[m_row][p_col], 13);

28 
	}
}

30 
boﬁ
 
	$TYPING_HEATMAP
(
ef„˘_∑øms_t
* 
∑øms
) {

32 
uöt8_t
 
Àd_mö
 = 
RGB_MATRIX_LED_PROCESS_LIMIT
 * 
∑øms
->
ôî
;

33 
uöt8_t
 
Àd_max
 = 
Àd_mö
 + 
RGB_MATRIX_LED_PROCESS_LIMIT
;

34 i‡(
Àd_max
 > (
g_rgb_‰ame_buf„r
))Üed_max = (g_rgb_frame_buffer);

36 i‡(
∑øms
->
öô
) {

37 
	`rgb_m©rix_£t_cﬁ‹_Æl
(0, 0, 0);

38 
	`mem£t
(
g_rgb_‰ame_buf„r
, 0,  g_rgb_frame_buffer);

42 
i
 = 
Àd_mö
; i < 
Àd_max
; i++) {

43 
uöt8_t
 
row
 = 
i
 % 
MATRIX_ROWS
;

44 
uöt8_t
 
cﬁ
 = 
i
 / 
MATRIX_ROWS
;

45 
uöt8_t
 
vÆ
 = 
g_rgb_‰ame_buf„r
[
row
][
cﬁ
];

48 
uöt8_t
 
Àd
[
LED_HITS_TO_REMEMBER
];

49 
uöt8_t
 
Àd_cou¡
 = 
	`rgb_m©rix_m≠_row_cﬁumn_to_Àd
(
row
, 
cﬁ
, 
Àd
);

50 
uöt8_t
 
j
 = 0; j < 
Àd_cou¡
; ++j) {

51 i‡(!
	`HAS_ANY_FLAGS
(
g_Àd_c⁄fig
.
Êags
[
Àd
[
j
]], 
∑øms
->flags)) ;

53 
HSV
 
hsv
 = {170 - 
	`qsub8
(
vÆ
, 85), 
rgb_m©rix_c⁄fig
.hsv.
s
, 
	`sˇÀ8
((
	`qadd8
(170, vÆË- 170Ë* 3,Ñgb_m©rix_c⁄fig.hsv.
v
)};

54 
RGB
 
rgb
 = 
	`hsv_to_rgb
(
hsv
);

55 
	`rgb_m©rix_£t_cﬁ‹
(
Àd
[
j
], 
rgb
.
r
,Ñgb.
g
,Ñgb.
b
);

58 
g_rgb_‰ame_buf„r
[
row
][
cﬁ
] = 
	`qsub8
(
vÆ
, 1);

61  
Àd_max
 < (
g_rgb_‰ame_buf„r
);

62 
	}
}

	@
1
.
0
94
2502
api.c
api.h
color.c
color.h
config_common.h
debounce.h
dip_switch.c
dip_switch.h
dynamic_keymap.c
dynamic_keymap.h
dynamic_macro.h
encoder.c
encoder.h
fauxclicky.c
fauxclicky.h
joystick.c
joystick.h
keycode_config.c
keycode_config.h
keymap.h
keymap_common.c
led_matrix.c
led_matrix_drivers.c
led_tables.c
led_tables.h
ledmatrix.h
matrix.c
matrix_common.c
pointing_device.c
pointing_device.h
quantum.c
quantum.h
quantum_keycodes.h
rgb.h
rgb_matrix.c
rgb_matrix.h
rgb_matrix_drivers.c
rgb_matrix_types.h
rgblight.c
rgblight.h
rgblight_breathe_table.h
rgblight_list.h
rgblight_modes.h
rgblight_post_config.h
send_string_keycodes.h
variable_trace.c
variable_trace.h
velocikey.c
velocikey.h
version.h
via.c
via.h
wpm.c
wpm.h
rgb_matrix_animations/rgb_matrix_effects.inc
rgb_matrix_runners/effect_runner_dx_dy.h
rgb_matrix_runners/effect_runner_dx_dy_dist.h
rgb_matrix_runners/effect_runner_i.h
rgb_matrix_runners/effect_runner_reactive.h
rgb_matrix_runners/effect_runner_reactive_splash.h
rgb_matrix_runners/effect_runner_sin_cos_i.h
rgb_matrix_animations/alpha_mods_anim.h
rgb_matrix_animations/breathing_anim.h
rgb_matrix_animations/colorband_pinwheel_sat_anim.h
rgb_matrix_animations/colorband_pinwheel_val_anim.h
rgb_matrix_animations/colorband_sat_anim.h
rgb_matrix_animations/colorband_spiral_sat_anim.h
rgb_matrix_animations/colorband_spiral_val_anim.h
rgb_matrix_animations/colorband_val_anim.h
rgb_matrix_animations/cycle_all_anim.h
rgb_matrix_animations/cycle_left_right_anim.h
rgb_matrix_animations/cycle_out_in_anim.h
rgb_matrix_animations/cycle_out_in_dual_anim.h
rgb_matrix_animations/cycle_pinwheel_anim.h
rgb_matrix_animations/cycle_spiral_anim.h
rgb_matrix_animations/cycle_up_down_anim.h
rgb_matrix_animations/digital_rain_anim.h
rgb_matrix_animations/dual_beacon_anim.h
rgb_matrix_animations/gradient_left_right_anim.h
rgb_matrix_animations/gradient_up_down_anim.h
rgb_matrix_animations/jellybean_raindrops_anim.h
rgb_matrix_animations/rainbow_beacon_anim.h
rgb_matrix_animations/rainbow_moving_chevron_anim.h
rgb_matrix_animations/rainbow_pinwheels_anim.h
rgb_matrix_animations/raindrops_anim.h
rgb_matrix_animations/solid_color_anim.h
rgb_matrix_animations/solid_reactive_anim.h
rgb_matrix_animations/solid_reactive_cross.h
rgb_matrix_animations/solid_reactive_nexus.h
rgb_matrix_animations/solid_reactive_simple_anim.h
rgb_matrix_animations/solid_reactive_wide.h
rgb_matrix_animations/solid_splash_anim.h
rgb_matrix_animations/splash_anim.h
rgb_matrix_animations/typing_heatmap_anim.h
